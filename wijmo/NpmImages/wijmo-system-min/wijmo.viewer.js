/*
    *
    * Wijmo Library 5.20171.293
    * http://wijmo.com/
    *
    * Copyright(c) GrapeCity, Inc.  All rights reserved.
    *
    * Licensed under the Wijmo Commercial License.
    * sales@wijmo.com
    * wijmo.com/products/wijmo-5/license/
    *
    */
System.register(["wijmo/wijmo","wijmo/wijmo.input","wijmo/wijmo.grid","wijmo/wijmo.viewer"],function(n,t){"use strict";function ni(n,t,r,u){var f,e=n?1:-1;return r instanceof i.Point?(f=r.x,u=r.y):(f=r,u=u||0),new i.Point(t.x+e*f,t.y+e*u)}function at(n){var r=ti(af+n+vf),t;return i.addClass(r,'wj-svg-btn'),t=document.createElement('a'),t.appendChild(r),i.addClass(t,'wj-btn'),t.tabIndex=0,t}function dr(n,t){var r,i;n.landscape!==t&&(n.landscape=t,r=n.width,n.width=n.height,n.height=r,i=n.leftMargin,t?(n.leftMargin=n.bottomMargin,n.bottomMargin=n.rightMargin,n.rightMargin=n.topMargin,n.topMargin=i):(n.leftMargin=n.topMargin,n.topMargin=n.rightMargin,n.rightMargin=n.bottomMargin,n.bottomMargin=i))}function rf(n){if(!n)return null;var t={};return t.height=n.height?new h(n.height):null,t.width=n.width?new h(n.width):null,t.bottomMargin=n.bottomMargin?new h(n.bottomMargin):null,t.leftMargin=n.leftMargin?new h(n.leftMargin):null,t.rightMargin=n.rightMargin?new h(n.rightMargin):null,t.topMargin=n.topMargin?new h(n.topMargin):null,t.landscape=n.landscape,t.paperSize=n.paperSize,t}function uf(n){var i=[];for(var t in n)t&&t.length&&t[0]!="_"&&!isNaN(parseInt(t))&&i.push({text:n[t],value:t});return i}function ft(n,t){var i,r,u;if(n&&(i=n.children,i))for(r=i.length-1;r>-1;r--)u=i[r],(t==null||t(u))&&n.removeChild(u)}function et(n){var t,i=document.createElement("div"),r=document.createDocumentFragment();for(i.innerHTML=n;t=i.firstChild;)r.appendChild(t);return r}function ti(n){return et(n).firstChild}function f(n,t,i,r){for(var e=t.split(","),u,f=0;f<e.length;f++)u=e[f].trim(),n.addEventListener?n.addEventListener(u,i,r):n.attachEvent?n.attachEvent('on'+u,i):n['on'+u]=i}function oi(n,t,i){for(var f=t.split(","),r,u=0;u<f.length;u++)r=f[u].trim(),n.removeEventListener?n.removeEventListener(r,i):n.detachEvent?n.detachEvent('on'+r,i):n['on'+r]=null}function ii(n,t){if(t){i.addClass(n,nr);return}i.removeClass(n,nr)}function gr(n,t){if(t){i.addClass(n,tr);return}i.removeClass(n,tr)}function nu(n,t){if(t){i.removeClass(n,y);return}i.addClass(n,y)}function ff(n){return i.hasClass(n,tr)}function ef(n){return i.hasClass(n,nr)}function d(n,t,i,r){var u,f;n&&(u=t[ir],u||(u=t[ir]={}),f=u[n],f||(f=u[n]=[]),f.push(i));t.addHandler(i,r)}function vt(n,t){var i,r;n&&(i=t[ir],i)&&(r=i[n],r)&&r.forEach(function(n){return t.removeHandler(n)})}function ri(n){var t=n||i.culture.Viewer.errorOccured;return n.Message&&(t=n.Message,n.ExceptionMessage&&(t+='<br/>'+n.ExceptionMessage)),t}function tu(n){for(var f,r=!0,t,u,e,o=0;o<n.children.length;o++){if(t=n.children[o],f=i.hasClass(t,'wj-separator'),u=i.hasClass(t,y),!f&&!u){r=!1;continue}f&&(r?u||i.addClass(t,y):(u&&i.removeClass(t,y),e=t),r=!0)}r&&e&&i.addClass(e,'hidden')}function ki(n,t){if(i.isString(t)){if(di(n,'DateTime'))return new Date(t);if(n==='width'||n==='height'||di(n,'Margin'))return new h(t)}return t}function of(n,t){return i.isString(t)&&(n==='width'||n==='height'||di(n,'Margin'))?new h(t):t}function di(n,t){return n.slice(-t.length)===t}function iu(n,t){var i,r,u;t=t||{};i=[];for(r in t)i.push(r+'='+t[r]);return i.length&&(u=n.indexOf('?')<0?'?':'&',n+=u+i.join('&')),n}function ui(){for(var n,r,f,t,u=[],i=0;i<arguments.length;i++)u[i]=arguments[i];for(n=[],r=0,f=u.length;r<f;r++)t=u[r],t&&(typeof t!='string'?n=n.concat(sf(t)):n.push(ru(t).join('/')));return n.join('/')}function sf(n){var t,i,r;if(n==null)return null;for(t=[],i=0,r=n.length;i<r;i++)t=t.concat(ru(n[i]));return t}function ru(n){var t=n.split('/');return t.length>0&&!t[t.length-1].length&&t.splice(t.length-1),t}function p(n,t){var u,r;return t&&t.cache||(n=gi(n)),t&&(u=(t.method||'GET').toUpperCase(),u!=='GET'&&(t.data&&(r=hf(t.data),r!=null&&(t.data=r)),t.requestHeaders?t.requestHeaders['Content-Type']||(t.requestHeaders['Content-Type']='application/x-www-form-urlencoded'):t.requestHeaders={'Content-Type':'application/x-www-form-urlencoded'})),i.httpRequest(n,t)}function hf(n){var r=[],t,u;n=n||{};for(t in n)if(n[t]!==null&&n[t]!==undefined)if(i.isArray(n[t]))if(n[t].length>0)for(u=0;u<n[t].length;u++)r.push(t+'='+encodeURIComponent(n[t][u]));else r.push(t+'=');else r.push(t+'='+encodeURIComponent(n[t]));return r.join('&')}function gi(n){return n+(n.indexOf('?')==-1?'?':'&')+'_='+(new Date).getTime()}function ct(n){return h.convertValue(n,o.Twip,o.Dip)}function si(n){return JSON.parse(n,ki)}function cf(n){return JSON.parse(n,ki)}function hi(){return'ontouchstart'in window?yf:pf}var e=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),bf=t&&t.id,i,a,ci,lf,af,vf,u,y,yt,uu,nr,tr,ir,v,rr,o,h,s,fu,ur,li,ai,b,c,w,fr,eu,pt,ou,er,yf,pf,ut,ot,su,l,vi,st,yi,fi,lt,or,hu,sr,wt,hr,cr,cu,tt,pi,bt,kt,ht,lu,au,wi,vu,yu,pu,it,lr,nt,dt,ar,vr,yr,gt,wu,bi,pr,bu,ku,rt,g,wr,du,k,br,r,gu,kr,ei,nf,tf,wf;return n("_pointMove",ni),n("_createSvgBtn",at),n("_setLandscape",dr),n("_clonePageSettings",rf),n("_enumToArray",uf),n("_removeChildren",ft),n("_toDOMs",et),n("_toDOM",ti),n("_addEvent",f),n("_removeEvent",oi),n("_checkImageButton",ii),n("_disableImageButton",gr),n("_showImageButton",nu),n("_isDisabledImageButton",ff),n("_isCheckedImageButton",ef),n("_addWjHandler",d),n("_removeAllWjHandlers",vt),n("_getErrorMessage",ri),n("_checkSeparatorShown",tu),n("_statusJsonReviver",ki),n("_pageSettingsJsonReviver",of),n("_strEndsWith",di),n("_appendQueryString",iu),n("_joinUrl",ui),n("_joinStringUrl",sf),n("_prepareStringUrl",ru),n("_httpRequest",p),n("_objToParams",hf),n("_disableCache",gi),n("_twipToPixel",ct),n("_parseReportExecutionInfo",si),n("_parseExecutionInfo",cf),n("_getTouchEventMap",hi),{setters:[function(n){i=n},function(n){a=n},function(n){ci=n},function(n){lf=n}],execute:function(){window.wijmo=window.wijmo||{};window.wijmo.viewer=lf;af='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox = "0 0 24 24" xml: space = "preserve" >';vf='</svg>';n("icons",u={paginated:'<rect x="16" y= "1" width="1" height="1" /><rect x="17" y= "2" width="1" height="1" /><rect x="18" y= "3" width="1" height="1" /><path d= "M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z" /><rect x="6" y= "8" width="10" height="1" /><rect x="6" y= "5" width="5" height="1" /><rect x="6" y= "11" width="10" height="1" /><rect x="6" y= "14" width="10" height="1" /><rect x="6" y= "17" width="10" height="1" /><rect x="6" y= "20" width="10" height="1" />',print:'<rect x="5" y= "1" width="14" height="4" /><polygon points= "22,8 22,7 19,7 19,6 5,6 5,7 2,7 2,8 1,8 1,11 1,20 2,20 2,21 5,21 5,11 19,11 19,21 22,21 22,20 23,20 23, 11 23, 8 "/><path d="M6,12v11h12V12H6z M16,21H8v-1h8V21z M16,18H8v-1h8V18z M16,15H8v-1h8V15z" />',exports:'<path d="M19.6,23"/><polyline points="5,19 5,2 13,2 13,7 14.3,7 15,7 18,7 18,9 20,9 20,7 20,6.4 20,5 20,4 19,4 19,5 15,5 15,2 15,1 16,1 16,0 15,0 5,0 3,0 3,2 3,19 3,21 5,21 "/><rect x="18" y="3" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="16" y="1" width="1" height="1"/><polygon points="17,16.6 20,14.1 17,11.6 17,13.6 13,13.6 13,14.6 17,14.6 "/><rect x="3" y="20.9" width="2" height="3.1"/><rect x="4.5" y="22" width="15.6" height="2"/><rect x="18" y="8.4" width="2" height="1.6"/><rect x="18" y="18" width="2.1" height="6"/>',portrait:'<path d="M19,0L19,0L5,0v0H3v24h0.1H5h14h1.7H21V0H19z M12.5,23h-1v-1h1V23z M19,21H5V2h14V21z"/>',landscape:'<path d="M24,19L24,19l0-14h0V3H0v0.1V5v14v1.7V21h24V19z M1,12.5v-1h1v1H1z M3,19V5h19v14H3z"/>',pageSetup:'<rect x="18" y="1" width="1" height="1"/><rect x="19" y="2" width="1" height="1"/><rect x="20" y="3" width="1" height="1"/><polygon points="22,5 22,4 21,4 21,5 20.4,5 20,5 17,5 17,2 17,1.3 17,1 18,1 18,0 17,0 17,0 7,0 6,0 5,0 5,5 7,5 7,2 15,2 15,7 16,7 17,7 20,7 20,22.1 7,22.1 7,19 5,19 5,24 5.9,24 7,24 20,24 21.1,24 22,24 22,5 "/><rect x="5" y="7" width="2" height="2"/><rect x="5" y="11" width="2" height="2"/><rect x="5" y="15" width="2" height="2"/><rect x="9" y="11" width="2" height="2"/><rect x="1" y="11" width="2" height="2"/><polygon points="9,8 9,8 8,8 8,9 9,9 9,10 10,10 10,8 "/><polygon points="2,9 2,9 2,10 3,10 3,9 4,9 4,8 2,8 "/><polygon points="3,16 3,16 4,16 4,15 3,15 3,14 2,14 2,16 "/><polygon points="10,15 10,15 10,14 9,14 9,15 8,15 8,16 10,16 "/>',previousPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="5.6,10.7 12,4.4 18.4,10.7 18.4,15 13.5,10.1 13.5,19.6 10.4,19.6 10.4,10.1 5.6,15 " />',nextPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="18.4,13.3 12,19.6 5.6,13.3 5.6,9 10.5,13.9 10.5,4.4 13.6,4.4 13.6,13.9 18.4,9 " />',firstPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="6.5,13.1 12,7.8 17.5,13.1 17.5,17.5 13.5,13.5 13.5,19.6 10.4,19.6 10.4,13.5 6.5,17.5 " /><rect x="6.5" y= "4.4" width="10.9" height="2.2" />',lastPage:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="17.5,10.9 12,16.2 6.5,10.9 6.5,6.5 10.5,10.5 10.5,4.4 13.6,4.4 13.6,10.5 17.5,6.5 " /><rect x="6.5" y= "17.5" transform="matrix(-1 -8.987357e-011 8.987357e-011 -1 24 37.0909)" width="10.9" height="2.2" />',backwardHistory:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="10.7,18.4 4.4,12 10.7,5.6 15,5.6 10.1,10.5 19.6,10.5 19.6,13.6 10.1,13.6 15,18.4 " />',forwardHistory:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon points="13.3,5.6 19.6,12 13.3,18.4 9,18.4 13.9,13.5 4.4,13.5 4.4,10.4 13.9,10.4 9,5.6 " />',selectTool:'<polygon points="19.9,13.4 5.6,1.1 5.3,19.9 10.5,14.7 14.3,23.3 16.4,22.4 12.6,13.8 "/>',moveTool:'<polygon points="12.5,3 14.5,3 12,0 9.5,3 11.5,3 11.5,21 11.5,21 9.6,21 12,24 14.5,21 12.5,21 "/><polygon points="21,12.5 21,14.5 24,12 21,9.5 21,11.5 3,11.5 3,11.5 3,9.6 0,12 3,14.5 3,12.5 "/>',continuousView:'<polygon points="22,0 22,5 9,5 9,0 7,0 7,5 7,7 7,7 24,7 24,7 24,5 24,0 "/><polygon points="23,15 19,15 19,11 20,11 20,10 19,10 18,10 17,10 9,10 7.4,10 7,10 7,24 9,24 9,12 17,12 17,15 17,16.6 17,17 22,17 22,24 24,24 24,17 24,15.1 24,15 24,15 24,14 23,14 "/><rect x="22" y="13" width="1" height="1"/><polygon points="20.9,12 20.9,13 22,13 22,12 21,12 21,11 20,11 20,12 "/><polygon points="4.9,5.2 2.5,2.2 0,5.2 2,5.2 2,9.2 3,9.2 3,5.2 "/><polygon points="2.9,19.2 2.9,15.2 1.9,15.2 1.9,19.2 0,19.2 2.5,22.1 4.9,19.2 "/>',singleView:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z"/>',fitWholePage:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M18,22.1H5V2h8v5h1h1h3V22.1z"/><polygon points="17,13.5 15,11 15,13 13,13 13,14 15,14 15,16 "/><polygon points="6,13.5 8,16 8,14 10,14 10,13 8,13 8,11 "/><polygon points="11.5,7 9,9 11,9 11,11 12,11 12,9 14,9 "/><polygon points="11.5,20 14,18 12,18 12,16 11,16 11,18 9,18 "/>',fitPageWidth:'<rect x="16" y="1" width="1" height="1"/><rect x="17" y="2" width="1" height="1"/><rect x="18" y="3" width="1" height="1"/><path d="M20,5V4h-1v1h-0.6H18h-3V2V1.3V1h1V0h-1h0H5H4H3v24h2v0h13h1.1H20L20,5L20,5z M5,22.1V2h8v5h1h1h3v15.1H5z"/><polygon points="14,15.5 17,13 14,10.6 14,12.6 13,12.6 13,13.6 14,13.6 "/><polyline points="6,13.1 9,15.6 9,13.6 10,13.6 10,12.6 9,12.6 9,10.6 6,13.1 "/>',zoomOut:'<circle opacity=".25" cx="12" cy="12" r="12"/><rect opacity=".75" x="5" y="10" width="14" height="3"/>',zoomIn:'<circle opacity=".25" cx="12" cy="12" r="12"/><polygon opacity=".75" points="19,10 13.5,10 13.5,4.5 10.5,4.5 10.5,10 5,10 5,13 10.5,13 10.5,18.5 13.5,18.5 13.5,13 19,13 " />',fullScreen:'<path d="M22,0H0v2.8V4v20h1.5H2h20h0.7H24V4V0H22z M7,1h1v1H7V1z M5,1h1v1H5V1z M3,1h1v1H3V1z M22,22H2L2,4h20L22,22z" /><polygon points="19.6,9.9 20,6 16.1,6.4 17.6,7.8 14.7,10.6 15.4,11.3 18.3,8.5"/><polygon points="4.4,16.2 4,20 7.9,19.7 6.5,18.3 9.3,15.5 8.6,14.8 5.8,17.6"/>',exitFullScreen:'<path d="M22,0H0v2.8V4v20h1.5H2h20h0.7H24V4V0H22z M7,1h1v1H7V1z M5,1h1v1H5V1z M3,1h1v1H3V1z M22,22H2L2,4h20L22,22z" /><polygon points="9.2,18.6 9.6,14.7 5.7,15.1 7.2,16.5 4.3,19.3 5,20 7.9,17.2"/><polygon points="14.8,7.5 14.4,11.3 18.3,11 16.9,9.6 19.7,6.8 19,6.1 16.2,8.9"/>',thumbnails:'<path d="M20,2h-5h-2v2v5v2v0h2v0h5v0h2v0V9V4V2H20z M20,9h-5V4h5V9z"/><path d="M20,13h-5h-2v2v5v2v0h2v0h5v0h2v0v-2v-5v-2H20z M20,20h-5v-5h5V20z"/><path d="M9,13H4H2v2v5v2v0h2v0h5v0h2v0v-2v-5v-2H9z M9,20H4v-5h5V20z"/><rect x="2" y="2" width="9" height="9"/>',outlines:'<path d="M22,0H2H0v2v20v2h2h20h2v-2V2V0H22z M2,2h12v20H2V2z M22,22h-6V2h6V22z"/><rect x="17.5" y="5" width="3" height="1" /><rect x="17.5" y="8" width="3" height="1"/><rect x="17.5" y="11" width="3" height="1"/>',search:'<circle stroke-width="2" fill="none" cx="9.5" cy="9.5" r="8.5"/><rect x="16.9" y="13.7" transform="matrix(-0.7193 0.6947 -0.6947 -0.7193 44.3315 18.4942)" width="3" height="9"/>',searchNext:'<polygon points="12,12.6 4,4.5 4,11.4 12,19.5 20,11.4 20,4.5 "/>',searchPrevious:'<polygon points="12,11.4 20,19.5 20,12.6 12,4.5 4,12.6 4,19.5 "/>',hamburgerMenu:'<rect x="2" y="4.875" width="20" height="1.5"/><rect x="2" y="11.25" width="20" height="1.5"/><rect x="2" y="17.625" width="20" height="1.5"/>',viewMenu:'<path transform="scale(1.5)" d="M8,2.9c-4.4,0-8,2.2-8,5s3.6,5,8,5s8-2.2,8-5S12.4,2.9,8,2.9z M8,11.8c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4s4, 1.8,4,4C12, 10,10.2,11.8,8,11.8z"/><circle class="st0" cx="12" cy="11.85" r="3.45"/>',searchOptions:'<polygon points="12,12.6 4,4.5 4,11.4 12,19.5 20,11.4 20,4.5 "/>',searchLeft:'<polygon points="11.4,12 19.5,20 12.6,20 4.5,12 12.6,4 19.5,4 "/>',searchRight:'<polygon points="12.6,12 4.5,4 11.4,4 19.5,12 11.4,20 4.5,20 "/>',showZoomBar:'<path d="M22.8,20.7l-4.4-4.4c1.1-1.6,1.8-3.5,1.8-5.6c0-5.2-4.3-9.5-9.5-9.5s-9.5,4.3-9.5,9.5s4.3,9.5,9.5,9.5 c2.1,0,4-0.7,5.6-1.8l4.4,4.4L22.8,20.7z M4.2,10.7c0-3.6,2.9-6.5,6.5-6.5s6.5,2.9,6.5,6.5s-2.9,6.5-6.5,6.5S4.2,14.3,4.2,10.7z"/><polygon points="7.2,9.2 7.2,7.2 9.2,7.2 9.2,6.2 6.2,6.2 6.2,9.2 "/><polygon points="12.2,7.2 14.2,7.2 14.2,9.2 15.2,9.2 15.2,6.2 12.2,6.2 "/><polygon points="9.2,14.2 7.2,14.2 7.2,12.2 6.2,12.2 6.2,15.2 9.2,15.2 "/><polygon points="14.2,12.2 14.2,14.2 12.2,14.2 12.2,15.2 15.2,15.2 15.2,12.2 "/>'});n("_hiddenCss",y='hidden');n("_commandTagAttr",yt='command-tag');uu=function(){function n(){this._actions=[];this._isStarted=!1}return n.prototype._any=function(){return this._actions.length>0},n.prototype.queue=function(n){var t=this,i=this._any();(this._actions.push(function(){n();t._continue()}),this.isStarted&&!i)&&this._continue()},n.prototype._continue=function(){var n=this._actions.shift();n&&n()},n.prototype.start=function(){this._isStarted||(this._isStarted=!0,this._continue())},Object.defineProperty(n.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),n}();n("_ActionQueue",uu);nr='wj-state-active';tr='wj-state-disabled';ir='__wjEvents';v=function(){function n(n){this._hasOutlines=!1;this._pageCount=0;this._supportedExportDescriptions=[];this._isLoadCompleted=!1;this._isDisposed=!1;this._errors=[];this.pageCountChanged=new i.Event;this.disposed=new i.Event;this.pageSettingsChanged=new i.Event;this.loadCompleted=new i.Event;this.queryLoadingData=new i.Event;this._service=this._createDocumentService(n);this._paginated=n.paginated}return n.prototype.onQueryLoadingData=function(n){this.queryLoadingData.raise(this,n)},n.prototype._updateIsLoadCompleted=function(n){this._isLoadCompleted!==n&&(this._isLoadCompleted=n,n&&this.onLoadCompleted())},n.prototype._updateIsDisposed=function(n){this._isDisposed!==n&&(this._isDisposed=n,this.onDisposed())},n.prototype._getIsDisposed=function(){return this._isDisposed},n.prototype._checkHasOutlines=function(n){return n.hasOutlines},n.prototype._checkIsLoadCompleted=function(n){return n.status===c.completed||n.status===c.stopped||n.status===c.loaded},n._isMobile=function(){return n._isMobileEnvironment==null&&(n._isMobileEnvironment=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))||this._isIOS()),n._isMobileEnvironment},n._isIOS=function(){return n._isIOSEnvironment==null&&(n._isIOSEnvironment=!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))),n._isIOSEnvironment},Object.defineProperty(n.prototype,"executionDateTime",{get:function(){return this._executionDateTime},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"expiredDateTime",{get:function(){return this._expiredDateTime},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoadCompleted",{get:function(){return this._isLoadCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this._getIsDisposed()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageSettings",{get:function(){return this._pageSettings},enumerable:!0,configurable:!0}),n.prototype.onPageSettingsChanged=function(n){this.pageSettingsChanged.raise(this,n||new i.EventArgs)},n.prototype.onLoadCompleted=function(n){this.loadCompleted.raise(this,n||new i.EventArgs)},n.prototype.onDisposed=function(n){this.disposed.raise(this,n||new i.EventArgs)},n.prototype.setPageSettings=function(n){var t=this;return this._innerService.setPageSettings(n).then(function(n){return t._updatePageSettings(n)})},n.prototype._updatePageSettings=function(n){this._pageSettings=n;this.onPageSettingsChanged()},Object.defineProperty(n.prototype,"_innerService",{get:function(){return this._service},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paginated",{get:function(){return this.pageSettings?this.pageSettings.paginated:this._paginated},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasOutlines",{get:function(){return this._hasOutlines},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageCount",{get:function(){return this._pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"initialPosition",{get:function(){return this._initialPosition},set:function(n){this._initialPosition=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"service",{get:function(){return this._service},enumerable:!0,configurable:!0}),n.prototype.getSupportedExportDescriptions=function(){return this._innerService.getSupportedExportDescriptions()},n.prototype.getBookmark=function(n){return this._innerService.getBookmark(n)},n.prototype.executeCustomAction=function(n){return this._innerService.executeCustomAction(n)},n.prototype.getOutlines=function(){return this._innerService.getOutlines()},n.prototype.getFeatures=function(){var n=this;return this._innerService.getFeatures().then(function(t){n._features=t})},n.prototype.dispose=function(){var n=this;return this._innerService.dispose().then(function(){return n._updateIsDisposed(!0)})},n.prototype.load=function(){var t=this,i={},n;this._paginated!=null&&(i["pageSettings.paginated"]=this.paginated);n=new li(i);this.onQueryLoadingData(n);return this._innerService.load(n.data).then(function(n){t._updateExecutionInfo(n);t._updateIsLoadCompleted(!0)})},n.prototype._updateExecutionInfo=function(n){n!=null&&(this._executionDateTime=this._getExecutionDateTime(n),this._expiredDateTime=this._getExpiredDateTime(n),this._updatePageSettings(n.pageSettings),this._features=n.features,this._updateDocumentStatus(n.status))},n.prototype._updateDocumentStatus=function(n){n&&(this._errors=n.errorList,this._initialPosition=n.initialPosition,this._updatePageCount(this._getPageCount(n)),this._expiredDateTime=this._getExpiredDateTime(n),this._hasOutlines=this._checkHasOutlines(n),this._updateIsLoadCompleted(this._checkIsLoadCompleted(n)))},n.prototype._getExecutionDateTime=function(n){return n.loadedDateTime},n.prototype._getExpiredDateTime=function(n){return n.expiredDateTime},n.prototype._getPageCount=function(n){return n.pageCount},n.prototype._updatePageCount=function(n){this._pageCount!==n&&(this._pageCount=n,this.onPageCountChanged())},n.prototype.getStatus=function(){var n=this;return this._innerService.getStatus().then(function(t){n._updateDocumentStatus(t)})},n.prototype._createDocumentService=function(){throw n._abstractMethodException;},n.prototype.onPageCountChanged=function(n){this.pageCountChanged.raise(this,n||new i.EventArgs)},n.prototype.print=function(){var r,t;if(n._isMobile()){r=this.getRenderToFilterUrl({format:'pdf'});window.open(r);return}t=new i.PrintDocument({title:'Document'});this.renderToFilter({format:'html'}).then(function(n){t.append(n.responseText);t.print()})},n.prototype.renderToFilter=function(n){return this._innerService.renderToFilter(n)},n.prototype.getRenderToFilterUrl=function(n){return this._innerService.getRenderToFilterUrl(n)},n.prototype.search=function(n,t,i){return this._innerService.search(n,t,i)},n}();v._abstractMethodException='It is an abstract method, please implement it.';v._isMobileEnvironment=null;v._isIOSEnvironment=null;n("_DocumentSource",v);rr=function(){function n(n){this._url='';this._url=n.serviceUrl||'';this._documentPath=n.filePath}return Object.defineProperty(n.prototype,"serviceUrl",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"filePath",{get:function(){return this._documentPath},enumerable:!0,configurable:!0}),n.prototype.getStatus=function(){throw v._abstractMethodException;},n.prototype.setPageSettings=function(){throw v._abstractMethodException;},n.prototype.getBookmark=function(){throw v._abstractMethodException;},n.prototype.executeCustomAction=function(){throw v._abstractMethodException;},n.prototype.load=function(){throw v._abstractMethodException;},n.prototype.dispose=function(){throw v._abstractMethodException;},n.prototype.getOutlines=function(){throw v._abstractMethodException;},n.prototype.renderToFilter=function(){throw v._abstractMethodException;},n.prototype.search=function(){throw v._abstractMethodException;},n.prototype.getRenderToFilterUrl=function(){throw v._abstractMethodException;},n.prototype.getSupportedExportDescriptions=function(){throw v._abstractMethodException;},n.prototype.getFeatures=function(){throw v._abstractMethodException;},n}();n("_DocumentService",rr),function(n){n[n.Document=0]="Document";n[n.Inch=1]="Inch";n[n.Mm=2]="Mm";n[n.Pica=3]="Pica";n[n.Point=4]="Point";n[n.Twip=5]="Twip";n[n.InHs=6]="InHs";n[n.Display=7]="Display";n[n.Cm=8]="Cm";n[n.Dip=9]="Dip"}(o||(o={}));n("_UnitType",o);h=function(){function n(t,r){var f,u;r===void 0&&(r=o.Dip);n._initUnitTypeDic();i.isObject(t)?(f=t,t=f.value,r=f.units):i.isString(t)&&(u=parseFloat(t),isNaN(u)||(r=n._unitTypeDic[t.substr(u.toString().length)],t=u));this._value=t;this._units=r;this._valueInPixel=n.convertValue(t,r,o.Dip)}return n._initUnitTypeDic=function(){if(!n._unitTypeDic){n._unitTypeDic={};for(var t in n._unitTypes)n._unitTypeDic[n._unitTypeDic[t]=n._unitTypes[t]]=t}},Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"units",{get:function(){return this._units},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"valueInPixel",{get:function(){return this._valueInPixel},enumerable:!0,configurable:!0}),n.prototype.toString=function(){return n.toString(this)},n.toString=function(t){return t.value==null?'':t.value+n._unitTypeDic[t.units]},n.convertValue=function(t,i,r){if(i===r)return t;var u;switch(i){case o.Document:u=t/n._DocumentUnitsPerInch;break;case o.Inch:u=t;break;case o.Mm:u=t/n._MmPerInch;break;case o.Pica:u=t/n._PicaPerInch;break;case o.Point:u=t/n._PointsPerInch;break;case o.Twip:u=t/n._TwipsPerInch;break;case o.InHs:u=t/100;break;case o.Display:u=t/n._DisplayPerInch;break;case o.Cm:u=t/n._CmPerInch;break;case o.Dip:u=t/n._DipPerInch;break;default:throw'Invalid from _UnitType: '+i;}switch(r){case o.Document:return u*n._DocumentUnitsPerInch;case o.Inch:return u;case o.Mm:return u*n._MmPerInch;case o.Pica:return u*n._PicaPerInch;case o.Point:return u*n._PointsPerInch;case o.Twip:return u*n._TwipsPerInch;case o.InHs:return u*100;case o.Display:return u*n._DisplayPerInch;case o.Cm:return u*n._CmPerInch;case o.Dip:return u*n._DipPerInch;default:throw'Invalid to _UnitType: '+r;}},n}();h._MmPerInch=25.4;h._DocumentUnitsPerInch=300;h._PointsPerInch=72;h._TwipsPerInch=1440;h._PicaPerInch=6;h._CmPerInch=h._MmPerInch/10;h._DisplayPerInch=75;h._DipPerInch=96;h._unitTypes={doc:o.Document,in:o.Inch,mm:o.Mm,pc:o.Pica,pt:o.Point,tw:o.Twip,inhs:o.InHs,dsp:o.Display,cm:o.Cm,dip:o.Dip,px:o.Dip};n("_Unit",h);s=function(){function n(){this._callbacks=[]}return n.prototype.then=function(n,t){return this._callbacks.push({onFulfilled:n,onRejected:t}),this},n.prototype.catch=function(n){return this.then(null,n)},n.prototype.resolve=function(n){var t=this;setTimeout(function(){try{t.onFulfilled(n)}catch(i){t.onRejected(i)}},0)},n.prototype.reject=function(n){var t=this;setTimeout(function(){t.onRejected(n)},0)},n.prototype.onFulfilled=function(n){for(var t,i;t=this._callbacks.shift();)t.onFulfilled&&(i=t.onFulfilled(n),i!==undefined&&(n=i))},n.prototype.onRejected=function(n){for(var t,i;t=this._callbacks.shift();)if(t.onRejected){i=t.onRejected(n);this.onFulfilled(i);return}throw n;},n}();n("_Promise",s);fu=function(n){function t(t){var i=n.call(this)||this;return i._promises=t,i._init(),i}return e(t,n),t.prototype._init=function(){var t=this;if(!this._promises||!this._promises.length){this.reject('No promises in current composited promise.');return}var r=this._promises.length,u=0,i=[],n=!1;this._promises.some(function(f){return f.then(function(f){n||(i.push(f),++u>=r&&t.resolve(i))}).catch(function(i){n=!0;t.reject(i)}),n})},t}(s);n("_CompositedPromise",fu),function(n){n[n.Custom=0]="Custom";n[n.Letter=1]="Letter";n[n.LetterSmall=2]="LetterSmall";n[n.Tabloid=3]="Tabloid";n[n.Ledger=4]="Ledger";n[n.Legal=5]="Legal";n[n.Statement=6]="Statement";n[n.Executive=7]="Executive";n[n.A3=8]="A3";n[n.A4=9]="A4";n[n.A4Small=10]="A4Small";n[n.A5=11]="A5";n[n.B4=12]="B4";n[n.B5=13]="B5";n[n.Folio=14]="Folio";n[n.Quarto=15]="Quarto";n[n.Standard10x14=16]="Standard10x14";n[n.Standard11x17=17]="Standard11x17";n[n.Note=18]="Note";n[n.Number9Envelope=19]="Number9Envelope";n[n.Number10Envelope=20]="Number10Envelope";n[n.Number11Envelope=21]="Number11Envelope";n[n.Number12Envelope=22]="Number12Envelope";n[n.Number14Envelope=23]="Number14Envelope";n[n.CSheet=24]="CSheet";n[n.DSheet=25]="DSheet";n[n.ESheet=26]="ESheet";n[n.DLEnvelope=27]="DLEnvelope";n[n.C5Envelope=28]="C5Envelope";n[n.C3Envelope=29]="C3Envelope";n[n.C4Envelope=30]="C4Envelope";n[n.C6Envelope=31]="C6Envelope";n[n.C65Envelope=32]="C65Envelope";n[n.B4Envelope=33]="B4Envelope";n[n.B5Envelope=34]="B5Envelope";n[n.B6Envelope=35]="B6Envelope";n[n.ItalyEnvelope=36]="ItalyEnvelope";n[n.MonarchEnvelope=37]="MonarchEnvelope";n[n.PersonalEnvelope=38]="PersonalEnvelope";n[n.USStandardFanfold=39]="USStandardFanfold";n[n.GermanStandardFanfold=40]="GermanStandardFanfold";n[n.GermanLegalFanfold=41]="GermanLegalFanfold";n[n.IsoB4=42]="IsoB4";n[n.JapanesePostcard=43]="JapanesePostcard";n[n.Standard9x11=44]="Standard9x11";n[n.Standard10x11=45]="Standard10x11";n[n.Standard15x11=46]="Standard15x11";n[n.InviteEnvelope=47]="InviteEnvelope";n[n.LetterExtra=50]="LetterExtra";n[n.LegalExtra=51]="LegalExtra";n[n.TabloidExtra=52]="TabloidExtra";n[n.A4Extra=53]="A4Extra";n[n.LetterTransverse=54]="LetterTransverse";n[n.A4Transverse=55]="A4Transverse";n[n.LetterExtraTransverse=56]="LetterExtraTransverse";n[n.APlus=57]="APlus";n[n.BPlus=58]="BPlus";n[n.LetterPlus=59]="LetterPlus";n[n.A4Plus=60]="A4Plus";n[n.A5Transverse=61]="A5Transverse";n[n.B5Transverse=62]="B5Transverse";n[n.A3Extra=63]="A3Extra";n[n.A5Extra=64]="A5Extra";n[n.B5Extra=65]="B5Extra";n[n.A2=66]="A2";n[n.A3Transverse=67]="A3Transverse";n[n.A3ExtraTransverse=68]="A3ExtraTransverse";n[n.JapaneseDoublePostcard=69]="JapaneseDoublePostcard";n[n.A6=70]="A6";n[n.JapaneseEnvelopeKakuNumber2=71]="JapaneseEnvelopeKakuNumber2";n[n.JapaneseEnvelopeKakuNumber3=72]="JapaneseEnvelopeKakuNumber3";n[n.JapaneseEnvelopeChouNumber3=73]="JapaneseEnvelopeChouNumber3";n[n.JapaneseEnvelopeChouNumber4=74]="JapaneseEnvelopeChouNumber4";n[n.LetterRotated=75]="LetterRotated";n[n.A3Rotated=76]="A3Rotated";n[n.A4Rotated=77]="A4Rotated";n[n.A5Rotated=78]="A5Rotated";n[n.B4JisRotated=79]="B4JisRotated";n[n.B5JisRotated=80]="B5JisRotated";n[n.JapanesePostcardRotated=81]="JapanesePostcardRotated";n[n.JapaneseDoublePostcardRotated=82]="JapaneseDoublePostcardRotated";n[n.A6Rotated=83]="A6Rotated";n[n.JapaneseEnvelopeKakuNumber2Rotated=84]="JapaneseEnvelopeKakuNumber2Rotated";n[n.JapaneseEnvelopeKakuNumber3Rotated=85]="JapaneseEnvelopeKakuNumber3Rotated";n[n.JapaneseEnvelopeChouNumber3Rotated=86]="JapaneseEnvelopeChouNumber3Rotated";n[n.JapaneseEnvelopeChouNumber4Rotated=87]="JapaneseEnvelopeChouNumber4Rotated";n[n.B6Jis=88]="B6Jis";n[n.B6JisRotated=89]="B6JisRotated";n[n.Standard12x11=90]="Standard12x11";n[n.JapaneseEnvelopeYouNumber4=91]="JapaneseEnvelopeYouNumber4";n[n.JapaneseEnvelopeYouNumber4Rotated=92]="JapaneseEnvelopeYouNumber4Rotated";n[n.Prc16K=93]="Prc16K";n[n.Prc32K=94]="Prc32K";n[n.Prc32KBig=95]="Prc32KBig";n[n.PrcEnvelopeNumber1=96]="PrcEnvelopeNumber1";n[n.PrcEnvelopeNumber2=97]="PrcEnvelopeNumber2";n[n.PrcEnvelopeNumber3=98]="PrcEnvelopeNumber3";n[n.PrcEnvelopeNumber4=99]="PrcEnvelopeNumber4";n[n.PrcEnvelopeNumber5=100]="PrcEnvelopeNumber5";n[n.PrcEnvelopeNumber6=101]="PrcEnvelopeNumber6";n[n.PrcEnvelopeNumber7=102]="PrcEnvelopeNumber7";n[n.PrcEnvelopeNumber8=103]="PrcEnvelopeNumber8";n[n.PrcEnvelopeNumber9=104]="PrcEnvelopeNumber9";n[n.PrcEnvelopeNumber10=105]="PrcEnvelopeNumber10";n[n.Prc16KRotated=106]="Prc16KRotated";n[n.Prc32KRotated=107]="Prc32KRotated";n[n.Prc32KBigRotated=108]="Prc32KBigRotated";n[n.PrcEnvelopeNumber1Rotated=109]="PrcEnvelopeNumber1Rotated";n[n.PrcEnvelopeNumber2Rotated=110]="PrcEnvelopeNumber2Rotated";n[n.PrcEnvelopeNumber3Rotated=111]="PrcEnvelopeNumber3Rotated";n[n.PrcEnvelopeNumber4Rotated=112]="PrcEnvelopeNumber4Rotated";n[n.PrcEnvelopeNumber5Rotated=113]="PrcEnvelopeNumber5Rotated";n[n.PrcEnvelopeNumber6Rotated=114]="PrcEnvelopeNumber6Rotated";n[n.PrcEnvelopeNumber7Rotated=115]="PrcEnvelopeNumber7Rotated";n[n.PrcEnvelopeNumber8Rotated=116]="PrcEnvelopeNumber8Rotated";n[n.PrcEnvelopeNumber9Rotated=117]="PrcEnvelopeNumber9Rotated";n[n.PrcEnvelopeNumber10Rotated=118]="PrcEnvelopeNumber10Rotated"}(ur||(ur={}));n("_PaperKind",ur);li=function(n){function t(t){var i=n.call(this)||this;return i._data=t||{},i}return e(t,n),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),t}(i.EventArgs);n("QueryLoadingDataEventArgs",li);ai=function(n){function t(t){var r=n.call(this,t)||this;return r._hasParameters=!1,r._status=c.notFound,r.statusChanged=new i.Event,r}return e(t,n),t.getReportNames=function(n,t){return b.getReportNames(n,t)},t.getReports=function(n,t,r){return i.isBoolean(r)&&(r={recursive:r}),b.getReports(n,t,r)},Object.defineProperty(t.prototype,"reportName",{get:function(){return this._innerService?this._innerService.reportName:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasParameters",{get:function(){return this._hasParameters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),t.prototype.load=function(){return n.prototype.load.call(this)},t.prototype._updateStatus=function(n){this._status!==n&&(this._status=n,this.onStatusChanged())},t.prototype.cancel=function(){var n=this;return this._innerService.cancel().then(function(t){return n._updateDocumentStatus(t)})},t.prototype.onStatusChanged=function(n){this.statusChanged.raise(this,n||new i.EventArgs)},t.prototype.dispose=function(){return n.prototype.dispose.call(this)},t.prototype.setParameters=function(n){var t=this;return this._innerService.setParameters(n).then(function(n){return void(t._parameters=n)})},t.prototype.getParameters=function(){var t=this,n;return this._parameters&&this._parameters.length?(n=new s,n.resolve(this._parameters),n):this._innerService.getParameters().then(function(n){return void(t._parameters=n)})},t.prototype._getIsDisposed=function(){return n.prototype._getIsDisposed.call(this)||this._innerService.isCleared},t.prototype._updateExecutionInfo=function(t){t==null||this.isDisposed||(this._hasParameters=!!t.hasParameters,n.prototype._updateExecutionInfo.call(this,t))},t.prototype._updateDocumentStatus=function(t){this._updateStatus(t.status);n.prototype._updateDocumentStatus.call(this,t)},t.prototype._checkIsLoadCompleted=function(n){return n.status===c.completed||n.status===c.stopped},t.prototype._createDocumentService=function(n){return new b(n)},Object.defineProperty(t.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),t.prototype.render=function(){var n=this;return this._innerService.render().then(function(t){return n._updateDocumentStatus(t)})},t.prototype.executeCustomAction=function(n){var t=this;return this._innerService.executeCustomAction(n).then(function(n){return t._updateDocumentStatus(n)})},t}(v);n("_Report",ai);b=function(n){function t(t){var i=n.call(this,t)||this;return i._reportName=t.reportName,i}return e(t,n),Object.defineProperty(t.prototype,"isCleared",{get:function(){return!this._instanceId&&this._status==c.cleared},enumerable:!0,configurable:!0}),t.getReportNames=function(n,i){return t.getReports(n,i).then(function(n){if(!n)return null;var t=[];return n.items.forEach(function(n){n.type===fr.Report&&t.push(n.name)}),t})},t.getReports=function(n,t,i){var r=new s,u=ui(n,t);return p(u,{data:i,success:function(n){r.resolve(JSON.parse(n.responseText))},error:function(n){return r.reject(n)}}),r},Object.defineProperty(t.prototype,"reportName",{get:function(){return this._reportName},enumerable:!0,configurable:!0}),t.prototype.getBookmark=function(n){var i=new s;return this._checkReportInstanceController(i)?(p(this._getReportInstancesUrl(t._bookmarkAction,n),{success:function(n){i.resolve(JSON.parse(n.responseText))}}),i):i},t.prototype.executeCustomAction=function(n){var i={};return i[t._customActionParam]=n,this.render(i)},t.prototype.getStatus=function(){var n=new s;return p(this._statusLocation,{success:function(t){n.resolve(JSON.parse(t.responseText,ki))}}),n},t.prototype.getDocumentStatus=function(){return this._getReportCache()},t.prototype._getReportCache=function(){var n=new s;return this._checkReportInstanceController(n)?(p(this._getReportInstancesUrl(),{success:function(t){n.resolve(si(t.responseText))}}),n):n},t.prototype.getParameters=function(){var n=new s;return this._checkReportInstanceController(n)?(p(this._getReportInstancesUrl(t._parametersAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t.prototype._getUrlMainPart=function(){return ui(this.serviceUrl,this.filePath,this.reportName)},t.prototype._getReportUrl=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return ui(this._getUrlMainPart(),t._reportCommand,i)},t.prototype._getReportInstancesUrl=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return ui(this._getUrlMainPart(),t._instancesCommand,this._instanceId,i)},t.prototype._checkReportController=function(n){if(this.serviceUrl!=null&&this.filePath){var i=this.filePath.slice(-5).toLowerCase()==='.flxr'||this.filePath.slice(-4).toLowerCase()==='.xml';if(!i||this.reportName)return!0}return n&&n.reject(t._invalidReportControllerError),!1},t.prototype._checkReportInstanceController=function(n){return this._checkReportController(n)&&this._instanceId?!0:(n&&n.reject(t._invalidReportCacheControllerError),!1)},t.prototype._getError=function(n){var t=n.responseText;try{t=JSON.parse(t)}finally{return t}},t.prototype.render=function(n){var r=this,i=new s;return this._checkReportInstanceController(i)?(p(this._getReportInstancesUrl(t._renderAction),{method:'POST',data:n,success:function(n){n.status===202?i.resolve({status:c.rendering}):i.resolve(si(n.responseText))},error:function(n){i.reject(r._getError(n))}}),i.then(function(n){r._status=n.status})):i},t.prototype.load=function(n){var t=this,i=new s;return this._checkReportController(i)?(p(this._getReportInstancesUrl(),{method:'POST',data:n,success:function(n){i.resolve(si(n.responseText))},error:function(n){i.reject(t._getError(n))}}),i.then(function(n){t._instanceId=n.id;t._status=c.loaded;t._outlinesLocation=n.outlinesLocation;t._statusLocation=n.statusLocation;t._pageSettingsLocation=n.pageSettingsLocation;t._featuresLocation=n.featuresLocation;t._parametersLocation=n.parametersLocation})):i},t.prototype.cancel=function(){var i=this,n=new s;return this._checkReportInstanceController(n)?this._status!==c.rendering?(n.reject('Cannot execute cancel when the report is not rendering.'),n):(p(this._getReportInstancesUrl(t._cancelAction),{method:'POST',success:function(t){n.resolve(si(t.responseText))}}),n.then(function(n){return void(i._status=n.status)}),n):n},t.prototype.dispose=function(){var t=this,n=new s;return this._checkReportInstanceController()?(p(this._getReportInstancesUrl(),{method:'DELETE',success:function(){t._status=c.cleared;t._instanceId='';n.resolve()}}),n):n},t.prototype.getOutlines=function(){var n=new s;return this._checkReportInstanceController(n)?(p(this._getReportInstancesUrl(t._outlinesAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t.prototype.renderToFilter=function(n){var i=this,t=new s;return this._checkReportInstanceController(t)?(p(this.getRenderToFilterUrl(n),{cache:!0,success:function(n){t.resolve(n)},error:function(n){t.reject(i._getError(n))}}),t):t},t.prototype.getRenderToFilterUrl=function(n){if(!this._checkReportInstanceController())return null;var i=this._getReportInstancesUrl(t._exportAction);return i=gi(i),iu(i,n)},t.prototype.search=function(n,i,r){var u=new s;return this._checkReportInstanceController(u)?(p(this._getReportInstancesUrl(t._searchAction),{success:function(n){u.resolve(JSON.parse(n.responseText))},data:{text:n,matchCase:!!i,wholeWord:!!r}}),u):u},t.prototype.setPageSettings=function(n){var u=this,i=new s,r;return this._checkReportInstanceController(i)?(r=this._getReportInstancesUrl(t._pageSettingsAction),p(r,{method:'PUT',data:n,success:function(n){i.resolve(JSON.parse(n.responseText,of))},error:function(n){i.reject(u._getError(n))}}),i):i},t.prototype.setParameters=function(n){var u=this,i=new s,r;return this._checkReportInstanceController(i)?(r=this._getReportInstancesUrl(t._parametersAction),p(r,{method:'PATCH',data:n,success:function(n){i.resolve(JSON.parse(n.responseText))},error:function(n){i.reject(u._getError(n))}}),i):i},t.prototype.getSupportedExportDescriptions=function(){var n=new s;return this._checkReportInstanceController(n)?(p(this._getReportInstancesUrl(t._supportedFormatsAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t.prototype.getFeatures=function(){var n=new s;return this._checkReportInstanceController(n)?(p(this._featuresLocation,{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t}(rr);b._reportCommand='$report';b._instancesCommand='$instances';b._customActionParam='actionString';b._renderAction='render';b._searchAction='search';b._cancelAction='stop';b._outlinesAction='outlines';b._exportAction='export';b._parametersAction='parameters';b._bookmarkAction='bookmarks';b._pageSettingsAction='pagesettings';b._supportedFormatsAction='supportedformats';b._invalidReportControllerError='Cannot call the service without service url, document path or report name.';b._invalidReportCacheControllerError='Cannot call the service when service url is not set or the report is not loaded.';n("_ReportService",b);c=function(){function n(){}return n}();c.loaded='Loaded';c.rendering='Rendering';c.completed='Completed';c.stopped='Stopped';c.cleared='Cleared';c.notFound='NotFound';n("_ExecutionStatus",c),function(n){n[n.Boolean=0]="Boolean";n[n.DateTime=1]="DateTime";n[n.Time=2]="Time";n[n.Date=3]="Date";n[n.Integer=4]="Integer";n[n.Float=5]="Float";n[n.String=6]="String"}(w||(w={}));n("_ParameterType",w),function(n){n[n.Folder=0]="Folder";n[n.File=1]="File";n[n.Report=2]="Report"}(fr||(fr={}));n("CatalogItemType",fr);eu=function(n){function t(t){var i=n.call(this,t)||this;return i._status=c.notFound,i}return e(t,n),Object.defineProperty(t.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_innerService",{get:function(){return this.service},enumerable:!0,configurable:!0}),t.prototype._createDocumentService=function(n){return new pt(n)},t.prototype.load=function(){return n.prototype.load.call(this)},t.prototype._updateStatus=function(n){this._status!==n&&(this._status=n)},t.prototype.getStatus=function(){var t=this,n=new li;this.onQueryLoadingData(n);return this._innerService.getStatus(n.data).then(function(n){return t._updateDocumentStatus(n)})},t.prototype.renderToFilter=function(n){var t=new li;this.onQueryLoadingData(t);return this._innerService.renderToFilter(n,t.data)},t.prototype._updateDocumentStatus=function(t){t!=null&&(this._updateStatus(t.status),n.prototype._updateDocumentStatus.call(this,t))},t}(v);n("_PdfDocumentSource",eu);pt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype._getPdfUrl=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return ui(this.serviceUrl,this.filePath,t._pdfCommand,i)},t.prototype._getPdfStatus=function(n){var i=this,t=new s;return this._checkPdfController(t)?(p(this._getPdfUrl(),{data:n,success:function(n){t.resolve(cf(n.responseText))}}),t.then(function(n){i._status=c.loaded;i._statusLocation=n.statusLocation;i._featuresLocation=n.featuresLocation})):t},t.prototype._checkPdfController=function(n){return this.serviceUrl!=null&&this.filePath?!0:(n&&n.reject(t._invalidPdfControllerError),!1)},t.prototype.dispose=function(){var n=new s;return n.resolve(),n},t.prototype.load=function(n){return this._getPdfStatus(n)},t.prototype.getStatus=function(n){var t=new s;return p(this._statusLocation,{data:n,success:function(n){t.resolve(JSON.parse(n.responseText))}}),t},t.prototype.renderToFilter=function(n,t){var i=new s;return this._checkPdfController(i)?(p(this.getRenderToFilterUrl(n),{data:t,cache:!0,success:function(n){i.resolve(n)}}),i):i},t.prototype.getRenderToFilterUrl=function(n){if(!this._checkPdfController())return null;var i=this._getPdfUrl(t._exportAction);return i=gi(i),iu(i,n)},t.prototype.getSupportedExportDescriptions=function(){var n=new s;return this._checkPdfController(n)?(p(this._getPdfUrl(t._supportedFormatsAction),{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t.prototype.getFeatures=function(){var n=new s;return this._checkPdfController(n)?(p(this._featuresLocation,{success:function(t){n.resolve(JSON.parse(t.responseText))}}),n):n},t}(rr);pt._pdfCommand='$pdf';pt._exportAction='export';pt._supportedFormatsAction='supportedformats';pt._invalidPdfControllerError='Cannot call the service when service url is not set or the pdf is not loaded.';n("_PdfDocumentService",pt);i.culture.Viewer=window.wijmo.culture.Viewer||{cancel:'Cancel',ok:'OK',bottom:'Bottom:',top:'Top:',right:'Right:',left:'Left:',margins:'Margins(inches)',orientation:'Orientation:',paperKind:'Paper Kind:',pageSetup:'Page Setup',landscape:'Landscape',portrait:'Portrait',pageNumber:'Page Number',zoomFactor:'Zoom Factor',paginated:'Print Layout',print:'Print',search:'Search',matchCase:'Match case',wholeWord:'Match whole word only',searchResults:'Search Results',previousPage:'Previous Page',nextPage:'Next Page',firstPage:'First Page',lastPage:'Last Page',backwardHistory:'Backward',forwardHistory:'Forward',pageCount:'Page Count',selectTool:'Select Tool',moveTool:'Move Tool',continuousMode:'Continuous Page View',singleMode:'Single Page View',wholePage:'Fit Whole Page',pageWidth:'Fit Page Width',zoomOut:'Zoom Out',zoomIn:'Zoom In',exports:'Export',fullScreen:'Full Screen',exitFullScreen:'Exit Full Screen',hamburgerMenu:'Tools',showSearchBar:'Show Search Bar',viewMenu:'Layout Options',searchOptions:'Search Options',matchCaseMenuItem:'Match Case',wholeWordMenuItem:'Match Whole Word',thumbnails:'Page Thumbnails',outlines:'Document Map',loading:'Loading...',pdfExportName:'Adobe PDF',docxExportName:'Open XML Word',xlsxExportName:'Open XML Excel',docExportName:'Microsoft Word',xlsExportName:'Microsoft Excel',mhtmlExportName:'Web archive (MHTML)',htmlExportName:'HTML document',rtfExportName:'RTF document',metafileExportName:'Compressed metafiles',csvExportName:'CSV',tiffExportName:'Tiff images',bmpExportName:'BMP images',emfExportName:'Enhanced metafile',gifExportName:'GIF images',jpgExportName:'JPEG images',jpegExportName:'JPEG images',pngExportName:'PNG images',abstractMethodException:'It is an abstract method, please implement it.',cannotRenderPageNoViewPage:'Cannot render page without document source and view page.',cannotRenderPageNoDoc:'Cannot render page without document source and view page.',exportFormat:'Export format:',exportOptionTitle:'Export options',documentRestrictionsGroup:'Document restrictions',passwordSecurityGroup:'Password security',outputRangeGroup:'Output range',documentInfoGroup:'Document info',generalGroup:'General',docInfoTitle:'Title',docInfoAuthor:'Author',docInfoManager:'Manager',docInfoOperator:'Operator',docInfoCompany:'Company',docInfoSubject:'Subject',docInfoComment:'Comment',docInfoCreator:'Creator',docInfoProducer:'Producer',docInfoCreationTime:'Creation time',docInfoRevisionTime:'Revision time',docInfoKeywords:'Keywords',embedFonts:'Embed TrueType fonts',pdfACompatible:'PDF/A compatible (level 2B)',useCompression:'Use compression',useOutlines:'Generate outlines',allowCopyContent:'Allow content copying or extraction',allowEditAnnotations:'Allow annotations editing',allowEditContent:'Allow content editing',allowPrint:'Allow printing',ownerPassword:'Permissions (owner) password:',userPassword:'Document open (user) password:',encryptionType:'Encryption level:',paged:'Paged',showNavigator:'Show Navigator',singleFile:'Single File',tolerance:'Tolerance when detecting text bounds (points):',pictureLayer:'Use separate picture layer',metafileType:'Metafile Type:',monochrome:'Monochrome',resolution:'Resolution:',outputRange:'Page range:',outputRangeInverted:'Inverted',showZoomBar:'Zoom Bar',searchPrev:'Search Previous',searchNext:'Search Next',checkMark:'\u2713',exportOk:'Export...',cannotSearch:'Cannot search without document source.',parameters:'Parameters',requiringParameters:'Please input parameters.',nullParameterError:'Value cannot be null.',invalidParameterError:'Invalid input.',parameterNoneItemsSelected:'(none)',parameterAllItemsSelected:'(all)',parameterSelectAllItemText:'(Select All)',selectParameterValue:'(select value)',apply:'Apply',errorOccured:'An error has occured.'};ou=function(){function n(){this._currentIndex=-1;this.currentChanged=new i.Event;this.searchCompleted=new i.Event}return n.prototype._onCurrentChanged=function(){this.currentChanged.raise(this,new i.EventArgs)},n.prototype._onSearchCompleted=function(){this.searchCompleted.raise(this,new i.EventArgs)},Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(n){this._text!==n&&(this._text=n,this._needUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"matchCase",{get:function(){return this._matchCase},set:function(n){this._matchCase!==n&&(this._matchCase=n,this._needUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"wholeWord",{get:function(){return this._wholeWord},set:function(n){this._wholeWord!==n&&(this._wholeWord=n,this._needUpdate=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"searchResults",{get:function(){return this._searchResults},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentIndex",{get:function(){return this._currentIndex},set:function(n){var t=this;n!==this._currentIndex&&this._getSearchResults().then(function(){t._currentIndex=n;t._onCurrentChanged()})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"current",{get:function(){return this._currentIndex<0?null:this._searchResults[this._currentIndex]},enumerable:!0,configurable:!0}),n.prototype._clearResults=function(){this._searchResults=null},n.prototype._getSearchResults=function(){var t=this,n=new s;return this._searchResults?(n.resolve(this._searchResults),n):this.documentSource?this._text==null||this._text.length===0?n:(this._needUpdate=!1,this.documentSource.search(this.text,this.matchCase,this.wholeWord).then(function(n){t._searchResults=n;t._onSearchCompleted()})):(n.reject(i.culture.Viewer.cannotSearch),n)},Object.defineProperty(n.prototype,"documentSource",{get:function(){return this._documentSource},set:function(n){this._documentSource=n;this._clearResults();this._text=null;this._matchCase=!1;this._wholeWord=!1;this._currentIndex=-1},enumerable:!0,configurable:!0}),n.prototype.search=function(n){var t=this;this._needUpdate&&this._clearResults();this._getSearchResults().then(function(){var i=t._searchResults.length;n?(t._currentIndex--,t._currentIndex<0&&(t._currentIndex=i-1)):(t._currentIndex++,t._currentIndex>=i&&(t._currentIndex=0));t._currentIndex=Math.max(Math.min(t._currentIndex,i-1),0);t._onCurrentChanged()})},n}();n("_SearchManager",ou);window.TouchEvent=window.TouchEvent||function(){};window.PointerEvent=window.PointerEvent||function(){};window.Touch=window.Touch||function(){};er=',';yf={startName:'touchstart',moveName:'touchmove',endName:['touchend','touchcancel','touchleave'].join(er)};pf={startName:['pointerdown','pointerenter'].join(er),moveName:'pointermove',endName:['pointerup','pointercancel','pointerleave'].join(er)},function(n){n[n.None=0]="None";n[n.Left=1]="Left";n[n.Up=2]="Up";n[n.Right=3]="Right";n[n.Down=4]="Down"}(ut||(ut={}));n("_TouchDirection",ut);ot=function(){function n(n){this._systemTouchInfo=n;this._id=n instanceof Touch?n.identifier:n.pointerId;this._target=n.target;this._screenX=n.screenX;this._screenY=n.screenY;this._clientX=n.clientX;this._clientY=n.clientY}return n.getCenter=function(n,t){return new i.Point(n.x+(t.x-n.x)/2,n.y+(t.y-n.y)/2)},n.getCenterClient=function(t,r){return n.getCenter(new i.Point(t.clientX,t.clientY),new i.Point(r.clientX,r.clientY))},n.getCenterScreen=function(t,r){return n.getCenter(new i.Point(t.screenX,t.screenY),new i.Point(r.screenX,r.screenY))},n.getDistance=function(n,t){var i=Math.abs(n.clientX-t.clientX),r=Math.abs(n.clientY-t.clientY);return Math.sqrt(i*i+r*r)},n._getDirection=function(n,t){var i=t.clientX-n.clientX,r=t.clientY-n.clientY,u=Math.abs(i)>=Math.abs(r);return u?i>0?ut.Right:i<0?ut.Left:ut.None:r>0?ut.Down:r<0?ut.Up:ut.None},Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"systemTouchInfo",{get:function(){return this._systemTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"screenX",{get:function(){return this._screenX},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"screenY",{get:function(){return this._screenY},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clientX",{get:function(){return this._clientX},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"clientY",{get:function(){return this._clientY},enumerable:!0,configurable:!0}),n}();n("_TouchInfo",ot);su=function(){function n(){this._timeInterval=50;this._speedInterval=5}return Object.defineProperty(n.prototype,"timeInterval",{get:function(){return this._timeInterval},set:function(n){this._timeInterval=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"speedInterval",{get:function(){return this._speedInterval},set:function(n){this._speedInterval=n},enumerable:!0,configurable:!0}),n.prototype.stop=function(){this._timer!=null&&(clearInterval(this._timer),this._timer=null)},n.prototype.start=function(n,t,i){var e=this;if(this.stop(),i){var o=n>=0?1:-1,s=t>=0?1:-1,r=Math.abs(n*this._timeInterval),u=Math.abs(t*this._timeInterval),h=Math.max(r,u),f=Math.floor(h/this.speedInterval),c=Math.floor(r/f),l=Math.floor(u/f);this._timer=setInterval(function(){if(r-=c,u-=l,r=Math.max(0,r),u=Math.max(0,u),!r||!u){e.stop();return}i(r*o,u*s)},this._timeInterval)}},n}();n("_SpeedReducer",su),function(n){n[n.Start=0]="Start";n[n.Move=1]="Move";n[n.End=2]="End"}(l||(l={}));n("_TouchEventType",l);vi=function(n){function t(i){var r=n.call(this)||this;return i instanceof t?(r._systemEvent=i.systemEvent,r._type=i.type,r._touchInfos=i.touchInfos,r):(r._systemEvent=i,tt._registerTouchInfo(i),r._type=tt._isTouchStart(i.type)?l.Start:tt._isTouchEnd(i.type)?l.End:l.Move,r._touchInfos=tt._allTouchInfos?tt._allTouchInfos.slice():[],r)}return e(t,n),Object.defineProperty(t.prototype,"timeStamp",{get:function(){return this.systemEvent.timeStamp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchInfos",{get:function(){return this._touchInfos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"systemEvent",{get:function(){return this._systemEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.systemEvent.target},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentTarget",{get:function(){return this.systemEvent.currentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointersCount",{get:function(){return this.touchInfos.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cancelBubble",{get:function(){return this._systemEvent.cancelBubble},set:function(n){this._systemEvent.cancelBubble=n},enumerable:!0,configurable:!0}),t.prototype.preventDefault=function(){this._systemEvent.preventDefault()},t}(i.EventArgs);n("_TouchEventArgs",vi);st=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.raise=function(t,i){n.prototype.raise.call(this,t,i)},t}(i.Event);n("_TouchEvent",st);yi=function(){function n(t){var h=this,r,u,e,o,s;if(this.touchMove=new st,this.touchStart=new st,this.touchEnd=new st,r=i.getElement(t),this._element=r,u=n.getTrigger(r),u){e=this._onTouchEvent.bind(this);u.touchMove.addHandler(e);u.touchStart.addHandler(e);u.touchEnd.addHandler(e);this._disposeAction=function(){u.touchMove.removeHandler(e);u.touchStart.removeHandler(e);u.touchEnd.removeHandler(e);h._disposeAction=null};return}o=hi();s=this._onSystemTouchEvent.bind(this);f(r,o.startName,s);f(r,o.moveName,s);f(r,o.endName,s);n.bindElement(r,this);this._disposeAction=function(){oi(r,o.startName,s);oi(r,o.moveName,s);oi(r,o.endName,s);n.unbindElement(r);h._disposeAction=null}}return n.bindElement=function(t,i){if(t[n._elementDataName])throw'Cannot bind multi _TouchTrigger on the same element.';t[n._elementDataName]=i},n.unbindElement=function(t){t[n._elementDataName]=null},n.getTrigger=function(t){return t[n._elementDataName]},n.prototype._onSystemTouchEvent=function(n){var t=this._createTouchEventArgs(n);t&&this._onTouchEvent(this,t)},n.prototype._createTouchEventArgs=function(n){return tt._isTouchEvent(n)?new vi(n):null},n.prototype.dispose=function(){this._disposeAction&&this._disposeAction()},Object.defineProperty(n.prototype,"hostElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),n.prototype._onTouchEvent=function(n,t){switch(t.type){case l.Start:this.onTouchStart(t);return;case l.Move:this.onTouchMove(t);return;case l.End:this.onTouchEnd(t)}},n.prototype.onTouchEnd=function(n){this.touchEnd.raise(this,n)},n.prototype.onTouchStart=function(n){this.touchStart.raise(this,n)},n.prototype.onTouchMove=function(n){this.touchMove.raise(this,n)},n}();yi._elementDataName='__wjTouchTrigger';n("_TouchTrigger",yi);fi=function(n){function t(t,r,u){var f=n.call(this,t)||this;return f._panType=u==null?t.type:u,f._client=new i.Point(f.touchInfo.clientX,f.touchInfo.clientY),f._screen=new i.Point(f.touchInfo.screenX,f.touchInfo.screenY),r&&(f._clientDelta=new i.Point(f.client.x-r.client.x,f.client.y-r.client.y),f._screenDelta=new i.Point(f.screen.x-r.screen.x,f.screen.y-r.screen.y)),f}return e(t,n),Object.defineProperty(t.prototype,"type",{get:function(){return this._panType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clientDelta",{get:function(){return this._clientDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screenDelta",{get:function(){return this._screenDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"client",{get:function(){return this._client},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this._screen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointersCount",{get:function(){return this.type==l.End?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchInfo",{get:function(){return this.touchInfos[0]||{}},enumerable:!0,configurable:!0}),t}(vi);n("_PanEventArgs",fi);lt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.raise=function(t,i){n.prototype.raise.call(this,t,i)},t}(st);n("_PanEvent",lt);or=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.panMove=new lt,t.panStart=new lt,t.panEnd=new lt,t}return e(t,n),t.prototype.onPanEnd=function(n){this.panEnd.raise(this,n)},t.prototype.onPanStart=function(n){this.panStart.raise(this,n)},t.prototype.onPanMove=function(n){this.panMove.raise(this,n)},t.prototype._prepareMove=function(n){var t=this;this._prePanEventArgs=n;this._panEvents.queue(function(){t.onPanMove(n)})},t.prototype._prepareStart=function(n){var i=this;this._prePanEventArgs=n;this._panEvents.queue(function(){i.onPanStart(n)});this._clearPanStartTimer();this._panStartTimer=setTimeout(function(){i._panEvents&&i._panEvents.start();i._clearPanStartTimer()},t._threhold)},t.prototype._prepareEnd=function(n){var t=this;this._prePanEventArgs=null;this._panEvents.queue(function(){var i=n instanceof fi?n:new fi(n,null,l.End);t.onPanEnd(i);t._stopPan()})},t.prototype._clearPanStartTimer=function(){this._panStartTimer!=null&&(clearTimeout(this._panStartTimer),this._panStartTimer=null)},t.prototype._tryStopPan=function(n){if(!this._panEvents||!this._panEvents.isStarted){this._stopPan();return}this._prepareEnd(n)},t.prototype._stopPan=function(){this._clearPanStartTimer();this._panEvents=null;this._prePanEventArgs=null},t.prototype._processPan=function(n){var t=this._createPanEventArgs(n);if(!t){this._tryStopPan(n);return}switch(t.type){case l.Start:this._prepareStart(t);return;case l.Move:this._prepareMove(t);return;case l.End:this._prepareEnd(t);return}},t.prototype.onTouchStart=function(t){n.prototype.onTouchStart.call(this,t);this._processPan(t)},t.prototype.onTouchMove=function(t){n.prototype.onTouchMove.call(this,t);this._processPan(t)},t.prototype.onTouchEnd=function(t){n.prototype.onTouchEnd.call(this,t);var i=this._createPanEventArgs(t);if(i){this._prepareEnd(i);return}this._tryStopPan(t)},t.prototype._createPanEventArgs=function(n){if(n.type==l.End&&n.pointersCount!=0||n.type!=l.End&&n.pointersCount!=1)return null;var t=new fi(n,this._prePanEventArgs);if(t.type!=l.Start){if(!this._panEvents)return null}else this._panEvents=new uu;return t},t}(yi);or._threhold=10;n("_PanTrigger",or);hu=function(n){function t(t,r,u,f){var e=n.call(this,u)||this,o;return e._duration=f,e._startTouchInfo=t,e._endTouchInfo=r,o=ni(!1,new i.Point(e.endTouchInfo.clientX,e.endTouchInfo.clientY),new i.Point(e.startTouchInfo.clientX,e.startTouchInfo.clientY)),e._speed=new i.Point(wt.getSpeed(o.x,e.duration),wt.getSpeed(o.y,e.duration)),e._direction=ot._getDirection(e.startTouchInfo,e.endTouchInfo),e}return e(t,n),Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startTouchInfo",{get:function(){return this._startTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTouchInfo",{get:function(){return this._endTouchInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointersCount",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},enumerable:!0,configurable:!0}),t}(fi);n("_SwipeEventArgs",hu);sr=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.raise=function(t,i){n.prototype.raise.call(this,t,i)},t}(lt);n("_SwipeEvent",sr);wt=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.swipe=new sr,t}return e(t,n),t.getSpeed=function(n,t){return n/t},t.prototype.onPanStart=function(t){n.prototype.onPanStart.call(this,t);this._panStartEventArgs=t},t.prototype.onPanMove=function(t){n.prototype.onPanMove.call(this,t);this._prePanMoveEventArgs=t},t.prototype.onPanEnd=function(t){n.prototype.onPanEnd.call(this,t);var i=this._createSwipeEventArgs(t);if(i)this.onSwipe(i);this._panStartEventArgs=null;this._prePanMoveEventArgs=null},t.prototype.onSwipe=function(n){this.swipe.raise(this,n)},t.prototype._createSwipeEventArgs=function(n){var i,r;return!this._panStartEventArgs||!this._prePanMoveEventArgs?null:(i=n.timeStamp-this._panStartEventArgs.timeStamp,i>t.maxDuration)?null:(r=ot.getDistance(this._panStartEventArgs.touchInfo,this._prePanMoveEventArgs.touchInfo),r<t.minDistance)?null:new hu(this._panStartEventArgs.touchInfo,this._prePanMoveEventArgs.touchInfo,n,i)},t}(or);wt.minDistance=50;wt.maxDuration=300;n("_SwipeTrigger",wt);hr=function(n){function t(t,r,u){var f=n.call(this,t)||this;return(f._zoom=1,f._pinchType=r,f._pre=u||{},f.type==l.End)?f:(f._pinchDistance=ot.getDistance(f.touchInfos[0],f.touchInfos[1]),f._centerClient=ot.getCenterClient(f.touchInfos[0],f.touchInfos[1]),f._centerScreen=ot.getCenterScreen(f.touchInfos[0],f.touchInfos[1]),f.type==l.Start)?f:(f._zoom=f.pinchDistance/f.prePinchDistance,f._centerClientDelta=new i.Point(f.centerClient.x-f.preCenterClient.x,f.centerClient.y-f.preCenterClient.y),f._centerScreenDelta=new i.Point(f.centerScreen.x-f.preCenterScreen.x,f.centerScreen.y-f.preCenterScreen.y),f)}return e(t,n),Object.defineProperty(t.prototype,"zoom",{get:function(){return this._zoom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointersCount",{get:function(){return this.type==l.End?0:2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prePinchDistance",{get:function(){return this._pre.pinchDistance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pinchDistance",{get:function(){return this._pinchDistance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerScreenDelta",{get:function(){return this._centerScreenDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerClientDelta",{get:function(){return this._centerClientDelta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerClient",{get:function(){return this._centerClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preCenterClient",{get:function(){return this._pre.centerClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerScreen",{get:function(){return this._centerScreen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preCenterScreen",{get:function(){return this._pre.centerScreen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._pinchType},enumerable:!0,configurable:!0}),t}(vi);n("_PinchEventArgs",hr);cr=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.prototype.raise=function(t,i){n.prototype.raise.call(this,t,i)},t}(st);n("_PinchEvent",cr);cu=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t.pinch=new cr,t}return e(t,n),t.prototype.onPinch=function(n){this.pinch.raise(this,n)},t.prototype.onTouchStart=function(n){this._process(n)},t.prototype.onTouchend=function(n){this._process(n)},t.prototype.onTouchMove=function(n){this._process(n)},t.prototype._onPinching=function(n){var t=new hr(n,this._preEventArgs?l.Move:l.Start,this._preEventArgs);this.onPinch(t);this._preEventArgs=t},t.prototype._onPinchEnd=function(n){if(this._preEventArgs){var t=new hr(n,l.End,this._preEventArgs);this.onPinch(t);this._preEventArgs=null}},t.prototype._process=function(n){if(n.pointersCount!=2){this._onPinchEnd(n);return}switch(n.type){case l.Start:case l.Move:this._onPinching(n);return;case l.End:this._onPinchEnd(n);return}},t}(yi);n("_PinchTrigger",cu);tt=function(){function n(n,t){t===void 0&&(t=!0);var i=this;this.touchMove=new st;this.touchStart=new st;this.touchEnd=new st;this.panMove=new lt;this.panStart=new lt;this.panEnd=new lt;this.swipe=new sr;this.pinch=new cr;this._trigger=new wt(n);this._trigger.touchStart.addHandler(function(n,t){return i.onTouchStart(t)});this._trigger.touchMove.addHandler(function(n,t){return i.onTouchMove(t)});this._trigger.touchEnd.addHandler(function(n,t){return i.onTouchEnd(t)});this._trigger.panStart.addHandler(function(n,t){return i.onPanStart(t)});this._trigger.panMove.addHandler(function(n,t){return i.onPanMove(t)});this._trigger.panEnd.addHandler(function(n,t){return i.onPanEnd(t)});this._trigger.swipe.addHandler(function(n,t){return i.onSwipe(t)});this._pinchTrigger=new cu(n);this._pinchTrigger.pinch.addHandler(function(n,t){return i.onPinch(t)});this.removeDefaultTouch=t}return n._isTouchEvent=function(t){return t instanceof TouchEvent||(t.pointerType||'').toLowerCase()===n._touchPointerName},n._isTouchStart=function(t){return n._eventTypeContains(t,hi().startName)},n._isTouchEnd=function(t){return n._eventTypeContains(t,hi().endName)},n._isTouchMove=function(t){return n._eventTypeContains(t,hi().moveName)},n._eventTypeContains=function(n,t){var r=t.split(','),i,u,f;for(n=n.toLowerCase(),i=0,u=r.length;i<u;i++)if(f=r[i].trim().toLowerCase(),n.indexOf(f)>-1)return!0;return!1},n._registerTouchInfo=function(t){var u,i,r;if(n._isTouchEvent(t)){if(t instanceof TouchEvent){for(n._allTouchInfos=[],u=0,r=t.touches.length;u<r;u++)n._allTouchInfos.push(new ot(t.touches.item(u)));return}if(t instanceof PointerEvent){if(n._allTouchInfos=n._allTouchInfos||[],n._isTouchEnd(t.type)){for(i=0,r=n._allTouchInfos.length;i<r;i++)if(n._allTouchInfos[i].id==t.pointerId){n._allTouchInfos.splice(i,1);return}return}for(i=0,r=n._allTouchInfos.length;i<r;i++)if(n._allTouchInfos[i].id==t.pointerId){n._allTouchInfos[i]=new ot(t);return}n._allTouchInfos.push(new ot(t))}}},n.prototype.onPinch=function(n){this.pinch.raise(this,n)},n.prototype.onSwipe=function(n){this.swipe.raise(this,n)},n.prototype.onTouchEnd=function(n){this.touchEnd.raise(this,n)},n.prototype.onTouchStart=function(n){this.touchStart.raise(this,n)},n.prototype.onTouchMove=function(n){this.touchMove.raise(this,n)},n.prototype.onPanEnd=function(n){this.panEnd.raise(this,n)},n.prototype.onPanStart=function(n){this.panStart.raise(this,n)},n.prototype.onPanMove=function(n){this.panMove.raise(this,n)},Object.defineProperty(n.prototype,"removeDefaultTouch",{get:function(){return this._removeDefaultTouch},set:function(n){this._removeDefaultTouch=n;var t=this.hostElement.style;n?(t.touchAction='none',t.msTouchAction='none'):(t.touchAction=this._defaultTouchAction,t.msTouchAction=this._defaultMsTouchAction)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hostElement",{get:function(){return this._pinchTrigger.hostElement},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"contentElement",{get:function(){return this.hostElement.children.length?this.hostElement.children[0]:null},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){this._pinchTrigger&&this._pinchTrigger.dispose();this._trigger&&this._trigger.dispose();this.removeDefaultTouch&&(this.removeDefaultTouch=!1)},n}();tt._touchPointerName='touch';tt._allTouchInfos=[];n("_TouchManager",tt);pi=function(n){function t(t){var r=n.call(this,t)||this,u,f;return r._uiUpdating=!1,u='Missing dependency: _PageSetupEditor requires ',i.assert(a.ComboBox!=null,u+'wijmo.input.'),f=r.getTemplate(),r.applyTemplate('wj-control wj-content',f,{_divPaperKind:'div-paper-kind',_divOrientation:'div-page-orientation',_divMarginsLeft:'div-margins-left',_divMarginsRight:'div-margins-right',_divMarginsTop:'div-margins-top',_divMarginsBottom:'div-margins-bottom',_gPaperKind:'g-paperkind',_gOrientation:'g-orientation',_gMargins:'g-margins',_gLeft:'g-left',_gRight:'g-right',_gTop:'g-top',_gBottom:'g-bottom'}),r._numMarginsLeft=new a.InputNumber(r._divMarginsLeft),r._numMarginsLeft.valueChanged.addHandler(r._updateValue,r),r._numMarginsRight=new a.InputNumber(r._divMarginsRight),r._numMarginsRight.valueChanged.addHandler(r._updateValue,r),r._numMarginsTop=new a.InputNumber(r._divMarginsTop),r._numMarginsTop.valueChanged.addHandler(r._updateValue,r),r._numMarginsBottom=new a.InputNumber(r._divMarginsBottom),r._numMarginsBottom.valueChanged.addHandler(r._updateValue,r),r._cmbPaperKind=new a.ComboBox(r._divPaperKind,{itemsSource:uf(ur),displayMemberPath:'text',selectedValuePath:'value',isEditable:!1}),r._cmbPaperKind.selectedIndexChanged.addHandler(r._updateValue,r),r._cmbOrientation=new a.ComboBox(r._divOrientation,{itemsSource:[i.culture.Viewer.portrait,i.culture.Viewer.landscape],isEditable:!1}),r._cmbOrientation.selectedIndexChanged.addHandler(r._updateValue,r),r._globalize(),r}return e(t,n),Object.defineProperty(t.prototype,"pageSettings",{get:function(){return this._pageSettings},set:function(n){var t=rf(n);this._pageSettings=t;this._updateUI();this._cmbPaperKind.focus()},enumerable:!0,configurable:!0}),t.prototype._globalize=function(){var n=i.culture.Viewer,t;this._gPaperKind.textContent=n.paperKind;this._gOrientation.textContent=n.orientation;this._gMargins.textContent=n.margins;this._gLeft.textContent=n.left;this._gRight.textContent=n.right;this._gTop.textContent=n.top;this._gBottom.textContent=n.bottom;t=this._cmbOrientation.selectedIndex;this._cmbOrientation.itemsSource=[i.culture.Viewer.portrait,i.culture.Viewer.landscape];this._cmbOrientation.selectedIndex=t},t.prototype._updateValue=function(){if(!this._uiUpdating){var n=this.pageSettings;n&&(n.bottomMargin=new h(this._numMarginsBottom.value,o.Inch),n.leftMargin=new h(this._numMarginsLeft.value,o.Inch),n.rightMargin=new h(this._numMarginsRight.value,o.Inch),n.topMargin=new h(this._numMarginsTop.value,o.Inch),n.paperSize=this._cmbPaperKind.selectedValue,dr(n,this._cmbOrientation.text===i.culture.Viewer.landscape),this._updateUI())}},t.prototype._updateUI=function(){this._uiUpdating=!0;var n=this.pageSettings,t=function(n,t){n.value=h.convertValue(t.value,t.units,o.Inch)};n&&(this._cmbPaperKind.selectedValue=n.paperSize,this._cmbOrientation.text=n.landscape?i.culture.Viewer.landscape:i.culture.Viewer.portrait,t(this._numMarginsLeft,n.leftMargin),t(this._numMarginsRight,n.rightMargin),t(this._numMarginsTop,n.topMargin),t(this._numMarginsBottom,n.bottomMargin));this._uiUpdating=!1},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._globalize()},t}(i.Control);pi.controlTemplate='<div><div style="padding:12px;"><table style="table-layout:fixed"><tr><td wj-part="g-paperkind"><\/td><td><div wj-part="div-paper-kind"><\/div><\/td><\/tr><tr><td wj-part="g-orientation"><\/td><td><div wj-part="div-page-orientation"><\/div><\/td><\/tr><\/table><fieldset style="margin-top: 12px"><legend wj-part="g-margins"><\/legend><table style="table-layout:fixed"><tr><td wj-part="g-left"><\/td><td><div wj-part="div-margins-left"><\/div><\/td><\/tr><tr><td wj-part="g-right"><\/td><td><div wj-part="div-margins-right"><\/div><\/td><\/tr><tr><td wj-part="g-top"><\/td><td><div wj-part="div-margins-top"><\/div><\/td><\/tr><tr><td wj-part="g-bottom"><\/td><td><div wj-part="div-margins-bottom"><\/div><\/td><\/tr><\/table><\/fieldset><\/div><\/div>';n("_PageSetupEditor",pi);bt=function(n){function t(t){var r=n.call(this,t)||this;return r._options={},r._optionLabels=null,r._groupTitleField=null,i.addClass(t,'wj-export-editor'),r}return e(t,n),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exportDescription",{get:function(){return this._exportDescription},set:function(n){(this._exportDescription=n,this._options={},n)&&(this._options.format=this.exportDescription.format,this._render())},enumerable:!0,configurable:!0}),t.prototype._skipOption=function(n){return t._skippedOptions.indexOf(n)>=0},t.prototype._render=function(){var r,n,f;if(ft(this.hostElement),this.exportDescription){var e=document.createElement('table'),u=this.exportDescription.optionDescriptions,i={};for(r=0;r<u.length;r++)if(n=u[r],!this._skipOption(n.name)){if(n.group){i[n.group]||(i[n.group]=[]);i[n.group].push(n);continue}i[t._generalGroupName]||(i[t._generalGroupName]=[]);n.group=t._generalGroupName;i[t._generalGroupName].push(n)}for(f in i)this.hostElement.appendChild(this._generateGroup(i[f]));this._updateEditors()}},t.prototype._generateEditor=function(n){var r;if(i.isArray(n.allowedValues))r=this._generateComboEditor(n);else switch(n.type){case'bool':r=this._generateBoolEditor(n);break;case'int':case'float':r=this._generateNumberEditor(n);break;case'unit':n.defaultValue=new h(n.defaultValue);case'string':default:r=this._generateStringEditor(n)}return r.setAttribute(t._optionIdAttr,n.name),r},t.prototype._generateComboEditor=function(n){for(var f=this,t,r=[],u=document.createElement('div'),i=0;i<n.allowedValues.length;i++)r.push(n.allowedValues[i]);return t=new a.ComboBox(u),t.isEditable=!1,t.itemsSource=r,t.selectedValue=n.defaultValue,t.selectedIndexChanged.addHandler(function(t){f._setOptionValue(n.name,t.selectedValue.toString())}),u},t.prototype._generateBoolEditor=function(n){var e=this,t,r,u,o;return n.nullable?(t=document.createElement('div'),r=new a.ComboBox(t),u=[],r.isEditable=!1,r.displayMemberPath='name',r.selectedValuePath='value',u.push({name:'None',value:null}),u.push({name:'True',value:!0}),u.push({name:'False',value:!1}),r.itemsSource=u,r.selectedValue=n.defaultValue,r.selectedIndexChanged.addHandler(function(t){e._setOptionValue(n.name,t.selectedValue);e._updateEditors(n.name)})):(t=document.createElement('input'),t.type='checkbox',o=i.changeType(n.defaultValue,i.DataType.Boolean,null),t.checked=o,f(t,'click',function(){e._setOptionValue(n.name,t.checked);e._updateEditors(n.name)})),t},t.prototype._generateNumberEditor=function(n){var r=this,i,t,u=n.type==='int';return i=document.createElement('div'),t=new a.InputNumber(i),t.format=u?'n0':'n2',t.isRequired=!n.nullable,t.value=n.defaultValue,t.valueChanged.addHandler(function(t){r._setOptionValue(n.name,t.value)}),i},t.prototype._generateStringEditor=function(n){var i=this,t;return t=document.createElement('input'),t.type=n.name.match(/password/i)?'password':'text',t.value=n.defaultValue,f(t,'change,keyup,paste,input',function(){i._setOptionValue(n.name,t.value)}),t},t.prototype._generateGroup=function(n){var r=document.createElement('fieldset'),f=document.createElement('legend'),c=n[0].group,e,u;for(i.addClass(r,'wj-exportformats-group'),f.innerHTML=this._groupTitle[c],f.setAttribute(t._optionNameAttr,c),r.appendChild(f),e=document.createElement('table'),u=0;u<n.length;u++){var o=n[u],s=document.createElement('tr'),h=document.createElement('td'),l=document.createElement('td');h.innerHTML=this._getOptionLabel(o.name);h.setAttribute(t._optionNameAttr,o.name);l.appendChild(this._generateEditor(o));s.appendChild(h);s.appendChild(l);e.appendChild(s)}return r.appendChild(e),r},t.prototype._updateEditors=function(n){var r,f,u,e;if(n==='pdfACompatible'||!n){r=this.hostElement.querySelector('['+t._optionIdAttr+'="embedFonts"]');r&&(f=i.changeType(this._getOptionValue('pdfACompatible'),i.DataType.Boolean,null),f?(this._previousEmbedFonts=r.checked,r.checked=!0,this._setOptionValue('embedFonts',!0)):(r.checked=this._previousEmbedFonts,this._setOptionValue('embedFonts',this._previousEmbedFonts)),r.disabled=f);return}n!=='paged'&&n||(u=this.hostElement.querySelector('['+t._optionIdAttr+'="showNavigator"]'),u&&(e=i.changeType(this._getOptionValue('paged'),i.DataType.Boolean,null),e?(u.checked=this._previousShowNavigator,this._setOptionValue('showNavigator',this._previousShowNavigator)):(this._previousShowNavigator=u.checked,u.checked=!1,this._setOptionValue('showNavigator',!1)),u.disabled=!e))},t.prototype._getOptionLabel=function(n){var t=this._optionLabelsText[n];return t?t:n[0].toUpperCase()+n.substring(1)},t.prototype._getOptionDescByName=function(n){var t=null;return this._exportDescription.optionDescriptions.some(function(i){return i.name===n?(t=i,!0):!1}),t},t.prototype._getOptionValue=function(n){return this._options[n]!==undefined?this._options[n]:this._getOptionDescByName(n).defaultValue},t.prototype._setOptionValue=function(n,t){var i=this._getOptionDescByName(n),r=i.defaultValue;if(i.type==='unit'&&(r=i.defaultValue.toString()),t===r){this._options[n]!==undefined&&delete this._options[n];return}this._options[n]=t},Object.defineProperty(t.prototype,"_optionLabelsText",{get:function(){return this._optionLabels||(this._optionLabels={title:i.culture.Viewer.docInfoTitle,author:i.culture.Viewer.docInfoAuthor,manager:i.culture.Viewer.docInfoManager,operator:i.culture.Viewer.docInfoOperator,company:i.culture.Viewer.docInfoCompany,subject:i.culture.Viewer.docInfoSubject,comment:i.culture.Viewer.docInfoComment,creator:i.culture.Viewer.docInfoCreator,producer:i.culture.Viewer.docInfoProducer,creationTime:i.culture.Viewer.docInfoCreationTime,revisionTime:i.culture.Viewer.docInfoRevisionTime,keywords:i.culture.Viewer.docInfoKeywords,embedFonts:i.culture.Viewer.embedFonts,pdfACompatible:i.culture.Viewer.pdfACompatible,useCompression:i.culture.Viewer.useCompression,useOutlines:i.culture.Viewer.useOutlines,allowCopyContent:i.culture.Viewer.allowCopyContent,allowEditAnnotations:i.culture.Viewer.allowEditAnnotations,allowEditContent:i.culture.Viewer.allowEditContent,allowPrint:i.culture.Viewer.allowPrint,ownerPassword:i.culture.Viewer.ownerPassword,userPassword:i.culture.Viewer.userPassword,encryptionType:i.culture.Viewer.encryptionType,paged:i.culture.Viewer.paged,showNavigator:i.culture.Viewer.showNavigator,singleFile:i.culture.Viewer.singleFile,tolerance:i.culture.Viewer.tolerance,pictureLayer:i.culture.Viewer.pictureLayer,metafileType:i.culture.Viewer.metafileType,monochrome:i.culture.Viewer.monochrome,resolution:i.culture.Viewer.resolution,outputRange:i.culture.Viewer.outputRange,outputRangeInverted:i.culture.Viewer.outputRangeInverted}),this._optionLabels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_groupTitle",{get:function(){return this._groupTitleField||(this._groupTitleField={documentRestrictions:i.culture.Viewer.documentRestrictionsGroup,passwordSecurity:i.culture.Viewer.passwordSecurityGroup,outputRange:i.culture.Viewer.outputRangeGroup,documentInfo:i.culture.Viewer.documentInfoGroup,general:i.culture.Viewer.generalGroup}),this._groupTitleField},enumerable:!0,configurable:!0}),t.prototype._globalize=function(){for(var n,r=this.hostElement.querySelectorAll('['+t._optionNameAttr+']'),i=0;i<r.length;i++){if(n=r[i],n instanceof HTMLLegendElement){n.innerHTML=this._groupTitle[n.getAttribute(t._optionNameAttr)];continue}n.innerHTML=this._getOptionLabel(n.getAttribute(t._optionNameAttr))}},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&(this._optionLabels=null,this._groupTitleField=null,this._globalize())},t}(i.Control);bt._optionIdAttr='option-id';bt._optionNameAttr='option-name';bt._skippedOptions=['shapesWord2007Compatible','sheetName','navigatorPositions'];bt._generalGroupName='general';n("_ExportOptionEditor",bt);kt=function(n){function t(t){var r=n.call(this,t)||this,u;return r.svgButtonClicked=new i.Event,u=r.getTemplate(),r.applyTemplate('wj-toolbar',u,{_toolbarWrapper:'toolbar-wrapper',_toolbarContainer:'toolbar-container',_toolbarLeft:'toolbar-left',_toolbarRight:'toolbar-right'}),f(r._toolbarLeft,'mouseover',function(){r._scrollLeft()}),f(r._toolbarLeft,'mouseout',function(){r._clearToolbarMoveTimer()}),f(r._toolbarRight,'mouseover',function(){r._scrollRight()}),f(r._toolbarRight,'mouseout',function(){r._clearToolbarMoveTimer()}),r}return e(t,n),t.prototype.applyTemplate=function(n,t,r){var f=this.hostElement,u,e;if(i.addClass(f,n),f.appendChild(et(t)),r)for(u in r)if(e=r[u],this[u]=f.querySelector('[wj-part="'+e+'"]'),this[u]==null&&f.getAttribute('wj-part')==e&&(this[u]=t),this[u]==null)throw'Missing template part: "'+e+'"';return f},t.prototype._clearToolbarMoveTimer=function(){this._toolbarMoveTimer!=null&&(clearTimeout(this._toolbarMoveTimer),this._toolbarMoveTimer=null)},t.prototype._scrollRight=function(){var i=this,r=this._toolbarRight.getBoundingClientRect().width,u=this._toolbarContainer.getBoundingClientRect().width-this._toolbarWrapper.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-r-t._moveStep;(this._checkMoveButtonEnabled(),n<u)||(this._toolbarWrapper.style.left=n+'px',this._toolbarMoveTimer=setTimeout(function(){return i._scrollRight()},t._moveInterval))},t.prototype._scrollLeft=function(){var i=this,r=this._toolbarLeft.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-r+t._moveStep;(this._checkMoveButtonEnabled(),n>0)||(this._toolbarWrapper.style.left=n+'px',this._toolbarMoveTimer=setTimeout(function(){return i._scrollLeft()},t._moveInterval))},t.prototype._checkMoveButtonEnabled=function(){var f=this._toolbarLeft.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-f+t._moveStep,e=n<=0,r=i.hasClass(this._toolbarLeft,t._enabledCss);e?r||i.addClass(this._toolbarLeft,t._enabledCss):r&&i.removeClass(this._toolbarLeft,t._enabledCss);var o=this._toolbarRight.getBoundingClientRect().width,s=this._toolbarContainer.getBoundingClientRect().width-this._toolbarWrapper.getBoundingClientRect().width,n=this._toolbarWrapper.offsetLeft-o-t._moveStep,h=n>=s,u=i.hasClass(this._toolbarRight,t._enabledCss);h?u||i.addClass(this._toolbarRight,t._enabledCss):u&&i.removeClass(this._toolbarRight,t._enabledCss)},t.prototype._showToolbarMoveButton=function(n){var t=n?'visible':'hidden';this._toolbarLeft.style.visibility=t;this._toolbarRight.style.visibility=t;this._checkMoveButtonEnabled()},t.prototype._globalize=function(){},t.prototype.resetWidth=function(){var i=this._toolbarLeft.getBoundingClientRect().width,r=this._toolbarRight.getBoundingClientRect().width,u=this.hostElement.getBoundingClientRect().width,n,t;this._toolbarContainer.style.width='1500px';this._toolbarWrapper.style.width='auto';n=this._toolbarWrapper.getBoundingClientRect().width+2;this._toolbarWrapper.style.width=n+'px';this._toolbarContainer.style.width=u-i-r+'px';t=i+r+n>u;this._showToolbarMoveButton(t);t||(this._toolbarWrapper.style.left='0px')},t.prototype.addSeparator=function(){var n=document.createElement('span');return n.className='wj-separator',this._toolbarWrapper.appendChild(n),n},t.prototype.onSvgButtonClicked=function(n){this.svgButtonClicked.raise(this,n)},t.prototype.addCustomItem=function(n,t){i.isString(n)&&(n=ti(n));t!=null&&n.setAttribute(yt,t.toString());this._toolbarWrapper.appendChild(n)},t.prototype.addSvgButton=function(n,t,r,u){var o=this,e=at(t);return e.title=n,e.setAttribute(yt,r.toString()),this._toolbarWrapper.appendChild(e),f(e,'click,keydown',function(n){var t=n||window.event,f=t.type==='keydown'&&t.keyCode===i.Key.Enter||t.type==='click';if(f&&!ff(e)&&(u||!ef(e)))o.onSvgButtonClicked({commandTag:r})}),e},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._globalize()},t}(i.Control);kt._moveStep=2;kt._moveInterval=5;kt._enabledCss='enabled';kt.controlTemplate='<div class="wj-toolbar-move left" wj-part="toolbar-left"><span class="wj-glyph-left"><\/span><\/div><div class="wj-toolbarcontainer" wj-part="toolbar-container"><div class="wj-toolbarwrapper wj-btn-group" wj-part="toolbar-wrapper"><\/div><\/div><div class="wj-toolbar-move right" wj-part="toolbar-right"><span class="wj-glyph-right"><\/span><\/div>';n("_Toolbar",kt);ht=function(n){function t(t,i){var r=n.call(this,t)||this,u;return r._viewer=i,r._initToolbarItems(),u=function(){return r.isDisabled=!r._viewer._getDocumentSource()},r._viewer._documentSourceChanged.addHandler(u),u(),r._viewer._viewerActionStatusChanged.addHandler(function(n,t){var i=t.action,u=r.hostElement.querySelector('[command-tag="'+i.actionType.toString()+'"]');ii(u,i.checked);gr(u,i.disabled);nu(u,i.shown);tu(r._toolbarWrapper)}),r}return e(t,n),t.prototype._initToolbarItems=function(){throw i.culture.Viewer.abstractMethodException;},t.prototype.onSvgButtonClicked=function(t){n.prototype.onSvgButtonClicked.call(this,t);this._viewer._executeAction(parseInt(t.commandTag))},Object.defineProperty(t.prototype,"viewer",{get:function(){return this._viewer},enumerable:!0,configurable:!0}),t._initToolbarZoomValue=function(n,t){var l=i.Control.getControl(n),h=document.createElement('div'),u,c,o,s,e=k._defaultZoomValues;h.className='wj-input-zoom';l.addCustomItem(h,r.ZoomValue);u=new a.ComboBox(h);u.deferUpdate(function(){for(o=0;o<e.length;o++)for(s=o+1;s<e.length;s++)e[o].value>e[s].value&&(c=e[o],e[o]=e[s],e[s]=c);u.itemsSource=e;u.isEditable=!0;u.displayMemberPath='name';u.selectedValuePath='value';u.selectedValue=1});u.selectedIndexChanged.addHandler(function(){var n,i;u.isDroppedDown&&(n=u.selectedValue,n==null&&(i=u.text.replace(",",""),n=parseFloat(i),isNaN(n)&&(n=100),n=n*.01),t.zoomFactor=n)});f(h,'keypress',function(n){var e=n||window.event,r=u.text,f;e.keyCode===i.Key.Enter&&(r.lastIndexOf('%')===r.length-1&&(r=r.substring(0,u.text.length-1)),r=r.replace(",",""),f=parseFloat(r),isNaN(f)?u.text=i.Globalize.format(t.zoomFactor,'p0'):t.zoomFactor=f*.01)});f(h.querySelector('.wj-form-control'),'blur',function(){u.text=i.Globalize.format(t.zoomFactor,'p0')});t.zoomFactorChanged.addHandler(function(){u.isDroppedDown=!1;u.text=i.Globalize.format(t.zoomFactor,'p0')})},t._initToolbarPageNumberInput=function(n,t){var o=i.Control.getControl(n),e=document.createElement('div'),s=document.createElement('span'),u,c=function(){var n=t._getDocumentSource();n&&n.pageCount!=null&&(u.value=t.pageIndex+1)},h=function(){var n=t._getDocumentSource();n&&n.pageCount!=null&&(s.innerHTML=n.pageCount.toString(),u.max=n.pageCount,u.min=Math.min(n.pageCount,1),c())},l=function(){var n=t._getDocumentSource();n&&(h(),d(t._documentEventKey,n.pageCountChanged,h),d(t._documentEventKey,n.loadCompleted,h))};e.className='wj-pagenumber';o.addCustomItem(e,r.PageNumber);u=new a.InputNumber(e);u.format='n0';f(e,'keyup',function(n){var r=n||window.event;r.keyCode===i.Key.Enter&&t.moveToPage(u.value-1)});f(u.inputElement,'blur',function(){t.moveToPage(u.value-1)});o.addCustomItem('<span class="slash">/</span>');s.className='wj-pagecount';o.addCustomItem(s,r.PageCountLabel);t.pageIndexChanged.addHandler(c);t._getDocumentSource()&&l();t._documentSourceChanged.addHandler(l)},t}(kt);n("_ViewerToolbarBase",ht);lu=function(n){function t(t,i){return n.call(this,t,i)||this}return e(t,n),t.prototype._globalize=function(){var n=i.culture.Viewer;this._gPaginated.title=n.paginated;this._gPrint.title=n.print;this._gExports.title=n.exports;this._gPortrait.title=n.portrait;this._gLandscape.title=n.landscape;this._gPageSetup.title=n.pageSetup;this._gFirstPage.title=n.firstPage;this._gPreviousPage.title=n.previousPage;this._gNextPage.title=n.nextPage;this._gLastPage.title=n.lastPage;this._gBackwardHistory.title=n.backwardHistory;this._gForwardHistory.title=n.forwardHistory;this._gSelectTool.title=n.selectTool;this._gMoveTool.title=n.moveTool;this._gContinuousMode.title=n.continuousMode;this._gSingleMode.title=n.singleMode;this._gWholePage.title=n.wholePage;this._gPageWidth.title=n.pageWidth;this._gZoomOut.title=n.zoomOut;this._gZoomIn.title=n.zoomIn;this._gFullScreen.title=n.fullScreen},t.prototype._initToolbarItems=function(){this._gPaginated=this.addSvgButton(i.culture.Viewer.paginated,u.paginated,r.TogglePaginated,!0);this._gPrint=this.addSvgButton(i.culture.Viewer.print,u.print,r.Print);this._gExports=this.addSvgButton(i.culture.Viewer.exports,u.exports,r.ShowExportsPanel);this.addSeparator();this._gPortrait=this.addSvgButton(i.culture.Viewer.portrait,u.portrait,r.Portrait);this._gLandscape=this.addSvgButton(i.culture.Viewer.landscape,u.landscape,r.Landscape);this._gPageSetup=this.addSvgButton(i.culture.Viewer.pageSetup,u.pageSetup,r.ShowPageSetupDialog);this.addSeparator();this._gFirstPage=this.addSvgButton(i.culture.Viewer.firstPage,u.firstPage,r.FirstPage);this._gPreviousPage=this.addSvgButton(i.culture.Viewer.previousPage,u.previousPage,r.PrePage);this._gNextPage=this.addSvgButton(i.culture.Viewer.nextPage,u.nextPage,r.NextPage);this._gLastPage=this.addSvgButton(i.culture.Viewer.lastPage,u.lastPage,r.LastPage);ht._initToolbarPageNumberInput(this.hostElement,this.viewer);this.addSeparator();this._gBackwardHistory=this.addSvgButton(i.culture.Viewer.backwardHistory,u.backwardHistory,r.Backward);this._gForwardHistory=this.addSvgButton(i.culture.Viewer.forwardHistory,u.forwardHistory,r.Forward);this.addSeparator();this._gSelectTool=this.addSvgButton(i.culture.Viewer.selectTool,u.selectTool,r.SelectTool);this._gMoveTool=this.addSvgButton(i.culture.Viewer.moveTool,u.moveTool,r.MoveTool);this._gContinuousMode=this.addSvgButton(i.culture.Viewer.continuousMode,u.continuousView,r.Continuous);this._gSingleMode=this.addSvgButton(i.culture.Viewer.singleMode,u.singleView,r.Single);this.addSeparator();this._gWholePage=this.addSvgButton(i.culture.Viewer.wholePage,u.fitWholePage,r.FitWholePage);this._gPageWidth=this.addSvgButton(i.culture.Viewer.pageWidth,u.fitPageWidth,r.FitPageWidth);this._gZoomOut=this.addSvgButton(i.culture.Viewer.zoomOut,u.zoomOut,r.ZoomOut);this._gZoomIn=this.addSvgButton(i.culture.Viewer.zoomIn,u.zoomIn,r.ZoomIn);ht._initToolbarZoomValue(this.hostElement,this.viewer);this._gFullScreen=this.addSvgButton(i.culture.Viewer.fullScreen,u.fullScreen,r.ToggleFullScreen,!0)},t}(ht);n("_ViewerToolbar",lu);au=function(n){function t(t,i){return n.call(this,t,i)||this}return e(t,n),t.prototype._initToolbarItems=function(){this._gPrint=this.addSvgButton(i.culture.Viewer.print,u.print,r.Print);this.addSeparator();this._gPreviousPage=this.addSvgButton(i.culture.Viewer.previousPage,u.previousPage,r.PrePage);this._gNextPage=this.addSvgButton(i.culture.Viewer.nextPage,u.nextPage,r.NextPage);ht._initToolbarPageNumberInput(this.hostElement,this.viewer);this.addSeparator();this._gZoomOut=this.addSvgButton(i.culture.Viewer.zoomOut,u.zoomOut,r.ZoomOut);this._gZoomIn=this.addSvgButton(i.culture.Viewer.zoomIn,u.zoomIn,r.ZoomIn);this._gExitFullScreen=this.addSvgButton(i.culture.Viewer.exitFullScreen,u.exitFullScreen,r.ToggleFullScreen,!0)},t.prototype._globalize=function(){var n=i.culture.Viewer;this._gPrint.title=n.print;this._gPreviousPage.title=n.previousPage;this._gNextPage.title=n.nextPage;this._gZoomOut.title=n.zoomOut;this._gZoomIn.title=n.zoomIn;this._gExitFullScreen.title=n.exitFullScreen},t}(ht);n("_ViewerMiniToolbar",au);wi=function(n){function t(t,r){var u=n.call(this,t,r)||this;return i.addClass(u.hostElement,'mobile'),u}return e(t,n),t}(ht);n("_ViewerMobileToolbarBase",wi);vu=function(n){function t(t,i){return n.call(this,t,i)||this}return e(t,n),t.prototype._initToolbarItems=function(){this._gShowHamburgerMenu=this.addSvgButton(i.culture.Viewer.hamburgerMenu,u.hamburgerMenu,r.ShowHamburgerMenu);this.viewer._initHamburgerMenu(this._gShowHamburgerMenu);this._gPrevPage=this.addSvgButton(i.culture.Viewer.previousPage,u.previousPage,r.PrePage);this._gNextPage=this.addSvgButton(i.culture.Viewer.nextPage,u.nextPage,r.NextPage);ht._initToolbarPageNumberInput(this.hostElement,this.viewer);this._gShowViewMenu=this.addSvgButton(i.culture.Viewer.viewMenu,u.viewMenu,r.ShowViewMenu);this.viewer._initViewMenu(this._gShowViewMenu);this._gShowSearchBar=this.addSvgButton(i.culture.Viewer.showSearchBar,u.search,r.ShowSearchBar,!0);this._gFullScreen=this.addSvgButton(i.culture.Viewer.fullScreen,u.fullScreen,r.ToggleFullScreen,!0)},t.prototype._globalize=function(){var n=i.culture.Viewer;this._gShowHamburgerMenu.title=n.hamburgerMenu;this._gPrevPage.title=n.previousPage;this._gNextPage.title=n.nextPage;this._gShowViewMenu.title=n.viewMenu;this._gShowSearchBar.title=n.showSearchBar;this._gFullScreen.title=n.fullScreen},t}(wi);n("_ViewerMobileToolbar",vu);yu=function(n){function t(t,r){var u=n.call(this,t,r)||this;return i.addClass(u.hostElement,'wj-zoombar'),u}return e(t,n),t.prototype._initToolbarItems=function(){this._gZoomOut=this.addSvgButton(i.culture.Viewer.zoomOut,u.zoomOut,r.ZoomOut);ht._initToolbarZoomValue(this.hostElement,this.viewer);this._gZoomIn=this.addSvgButton(i.culture.Viewer.zoomIn,u.zoomIn,r.ZoomIn)},t.prototype._globalize=function(){var n=i.culture.Viewer;this._gZoomOut.title=n.zoomOut;this._gZoomIn.title=n.zoomIn},t}(wi);n("_ViewerZoomBar",yu);pu=function(n){function t(t,i){return n.call(this,t,i)||this}return e(t,n),t.prototype._initToolbarItems=function(){this._gSearchOptions=this.addSvgButton(i.culture.Viewer.searchOptions,u.searchOptions,r.ShowSearchOptions);this.viewer._initSearchOptionsMenu(this._gSearchOptions);this._initSearchInput();this._initSearchBtnGroups()},t.prototype._initSearchInput=function(){var t=this,r='<div class="wj-searchcontainer"><input class="wj-searchbox" wj-part="search-box" type="text"/><div class="wj-btn-group"><button class="wj-btn wj-btn-search">'+at(u.search).innerHTML+"<\/button><\/div><\/div>",n=ti(r),i=n.querySelector('input[type="text"]'),e=n.querySelector('.wj-btn-search');f(i,'input',function(){t.viewer._searchManager.text=i.value});f(e,'click',function(){t.viewer._searchManager.search()});this.addCustomItem(n)},t.prototype._initSearchBtnGroups=function(){var n=ti('<div class="wj-searchbtn-groups wj-btn-group wj-toolbarwrapper"><\/div>');this._gSearchPrev=this.addSvgButton(i.culture.Viewer.searchPrev,u.searchLeft,r.SearchPrev);this._gSearchNext=this.addSvgButton(i.culture.Viewer.searchNext,u.searchRight,r.SearchNext);n.appendChild(this._gSearchPrev);n.appendChild(this._gSearchNext);this.addCustomItem(n)},t.prototype._globalize=function(){var n=i.culture.Viewer;this._gSearchOptions.title=n.searchOptions;this._gSearchPrev.title=n.searchPrev;this._gSearchNext.title=n.searchNext},t}(wi);n("_SearchBar",pu);it=function(){function n(n,t,r){this._content=null;this.linkClicked=new i.Event;this._documentSource=n;this._index=t;this._size=r}return Object.defineProperty(n.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),n.prototype.getContent=function(){var n=this,t=new s,r=this._documentSource;return r?this._content?(t.resolve(this._content),t):(r.renderToFilter({format:'html',paged:r.paginated,outputRange:(this.index+1).toString()}).then(function(i){var e,u,o,f,s;if(n._documentSource===r){for(e=document.createElement('div'),e.innerHTML=n._addGlobalUniqueId(i.responseText),f=e.querySelector('section'),f&&f.style&&(s={width:new h(f.style.width),height:new h(f.style.height)}),u=e.querySelector('svg'),o=document.createElementNS('http://www.w3.org/2000/svg','g');u.hasChildNodes();)o.appendChild(u.firstChild);u.appendChild(o);n._size=s;n._content=u;n._replaceActionLinks(u);t.resolve(n._content)}}),t):(t.reject(i.culture.Viewer.cannotRenderPageNoDoc),t)},n.prototype._onLinkClicked=function(n){this.linkClicked.raise(this,n)},n.prototype._replaceActionLinks=function(t){for(var i,r,u,o=this,s=t.querySelectorAll('a'),e=0;e<s.length;e++)i=s.item(e),r=i.href?i.href.baseVal:'',r.indexOf('navigate')>0?(u=n._bookmarkReg.exec(r),u&&(u[1]&&u[1].length>0?(i.href.baseVal=n._invalidHref,i.setAttribute(n._bookmarkAttr,u[1]),f(i,'click',function(){o._onLinkClicked(new wr(this))})):i.removeAttribute("xlink:href"))):n._customActionReg.test(r)&&(i.href.baseVal=n._invalidHref,i.setAttribute(n._customActionAttr,r.substr(3)),f(i,'click',function(){o._onLinkClicked(new wr(this))}))},n.prototype._addGlobalUniqueId=function(t){var i=(new Date).getTime().toString();return t=t.replace(n._idReg,'$1$2'+i+'$3$4'),t.replace(n._idReferReg,'$1$2'+i+'$3$4')},n}();it._bookmarkReg=/javascript\:navigate\(['|"](.*)['|"]\)/;it._bookmarkAttr='bookmark';it._customActionReg=/^CA\:/;it._customActionAttr='customAction';it._idReg=/(\<[^\>]+)(id=['|"])(\w+)(['|"])/g;it._idReferReg=/(\<[^\>]+)(url\(#)(\w+)(\))/g;it._invalidHref='javascript:void(0)';n("_Page",it);lr=function(n){function t(t){var r=n.call(this,t)||this,u;return r._viewMode=rt.Single,r.pageIndexChanged=new i.Event,r.zoomFactorChanged=new i.Event,u=r.getTemplate(),r.applyTemplate('wj-viewpanel-container',u,{_singlePageView:'single-pageview',_continuousPageView:'continuous-pageview'}),r._initPageView(),r}return e(t,n),t.prototype.applyTemplate=function(n,t,r){var f=this.hostElement,u,e;if(i.addClass(f,n),f.appendChild(et(t)),r)for(u in r)if(e=r[u],this[u]=f.querySelector('[wj-part="'+e+'"]'),this[u]==null&&f.getAttribute('wj-part')==e&&(this[u]=t),this[u]==null)throw'Missing template part: "'+e+'"';return f},Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._activePageView.pageIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pages",{get:function(){return this._activePageView.pages},set:function(n){this._activePageView.pages=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomMode",{get:function(){return this._activePageView.zoomMode},set:function(n){this._activePageView.zoomMode=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this._activePageView.zoomFactor},set:function(n){this.zoomMode=g.Custom;this._activePageView.zoomFactor=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panMode",{get:function(){return this._activePageView.panMode},set:function(n){this._activePageView.panMode=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewMode",{get:function(){return this._viewMode},set:function(n){this._viewMode!==n&&(this._viewMode=n,this._updateActivePageView())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this._activePageView.scrollTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this._activePageView.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_activePageViewElement",{get:function(){return this.viewMode===rt.Single?this._singlePageView:this._continuousPageView},enumerable:!0,configurable:!0}),t.prototype.onPageIndexChanged=function(){this.pageIndexChanged.raise(this)},t.prototype.onZoomFactorChanged=function(){this.zoomFactorChanged.raise(this)},t.prototype._updateActivePageView=function(){var n=this._activePageView.pageIndex,t=this._activePageView.pages,r=this._activePageView.zoomFactor,u=this._activePageView.zoomMode,f=this._activePageView.panMode;this._activePageView.pageIndexChanged.removeHandler(this.onPageIndexChanged,this);this._activePageView.zoomFactorChanged.removeHandler(this.onZoomFactorChanged,this);this._activePageView=i.Control.getControl(this._activePageViewElement);this._activePageView.pageIndexChanged.addHandler(this.onPageIndexChanged,this);this._activePageView.zoomFactorChanged.addHandler(this.onZoomFactorChanged,this);this._activePageView.pages||(this._activePageView.pages=t);this._activePageView.invalidate();this._activePageView.moveToPage(n);this._activePageView.zoomFactor=r;this._activePageView.zoomMode=u;this._activePageView.panMode=f;this._updatePageViewsVisible()},t.prototype._initPageView=function(){this._activePageView=new vr(this._singlePageView);this._activePageView.pageIndexChanged.addHandler(this.onPageIndexChanged,this);this._activePageView.zoomFactorChanged.addHandler(this.onZoomFactorChanged,this);new yr(this._continuousPageView);this._updatePageViewsVisible()},t.prototype._updatePageViewsVisible=function(){var n=this.viewMode===rt.Single;n?(i.removeClass(this._singlePageView,y),i.hasClass(this._continuousPageView,y)||i.addClass(this._continuousPageView,y)):(i.removeClass(this._continuousPageView,y),i.hasClass(this._singlePageView,y)||i.addClass(this._singlePageView,y))},t.prototype.moveToPage=function(n){return this._activePageView.moveToPage(n)},t.prototype.moveToPosition=function(n){return this._activePageView.moveToPosition(n)},t.prototype.resetPages=function(){i.Control.getControl(this._singlePageView).resetPages();i.Control.getControl(this._continuousPageView).resetPages()},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);i.Control.getControl(this._activePageViewElement).invalidate();this._activePageView.refresh()},t}(i.Control);lr.controlTemplate='<div class="wj-pageview" wj-part="single-pageview"><\/div><div class="wj-pageview" wj-part="continuous-pageview"><\/div>';n("_CompositePageView",lr);nt=function(n){function t(t){var r=n.call(this,t)||this,u;return r._autoHeightCalculated=!1,r._startX=null,r._startY=null,r._panMode=!1,r._pageIndex=-1,r._zoomFactor=1,r._zoomMode=g.Custom,r.pageIndexChanged=new i.Event,r.zoomFactorChanged=new i.Event,u=r.getTemplate(),r.applyTemplate('wj-pageview',u,r._getTemplateParts()),r._init(),r}return e(t,n),t.prototype._getTemplateParts=function(){return{_pagesWrapper:'pages-wrapper'}},t.prototype._getPagesContainer=function(){return this.hostElement},t.prototype._init=function(){this._bindEvents()},t.prototype.dispose=function(){this._touchManager&&this._touchManager.dispose();n.prototype.dispose.call(this)},t.prototype._bindTouchEvents=function(n){var t=this;n.touchStart.addHandler(function(){t.hostElement.focus()});n.panMove.addHandler(function(t,i){n.hostElement.scrollTop-=i.clientDelta.y;n.hostElement.scrollLeft-=i.clientDelta.x});n.pinch.addHandler(this._zoomByPinch,this)},t.prototype._initTouchEvents=function(){var t=this._pagesWrapper.parentElement,n=new tt(t);this._touchManager=n;this._bindTouchEvents(n)},t.prototype._zoomByPinch=function(n,t){if(t.preventDefault(),t.type==l.Move){var r=i.getElementRect(n.contentElement),u=getComputedStyle(n.contentElement),f=parseInt(u.marginTop),e=parseInt(u.marginLeft),o=ni(!1,t.preCenterClient,r.left-e,r.top-f);this._zoom(n.hostElement,t.zoom,o,t.centerClientDelta)}},t.prototype._getFixedPosition=function(n){return new i.Point(t._pageMargin,t._pageMargin+this._getAbovePageCount(n.y)*t._pageMargin)},t.prototype._getAbovePageCount=function(){return 0},t.prototype._zoom=function(n,t,r,u){var s=ni(!1,r,n.scrollLeft,n.scrollTop),f=this._getFixedPosition(r),h=this.zoomFactor;this.zoomFactor=this.zoomFactor*t;var e=this.zoomFactor/h,c=new i.Point((r.x-f.x)*e+f.x,(r.y-f.y)*e+f.y),l=ni(!0,s,u),o=ni(!1,c,l);n.scrollTop=Math.round(o.y);n.scrollLeft=Math.round(o.x)},Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pages",{get:function(){return this._pages},set:function(n){this._pages=n;this._reserveViewPage()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.hostElement.scrollTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.hostElement.scrollLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this._zoomFactor},set:function(n){(n=Math.max(.05,Math.min(10,n)),this._zoomFactor!=n)&&(this._zoomFactor=n,this._updatePageViewZoom(),this._onZoomFactorChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomMode",{get:function(){return this._zoomMode},set:function(n){this._zoomMode!=n&&(this._zoomMode=n,this._calcZoomModeZoom())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panMode",{get:function(){return this._panMode},set:function(n){this._panMode!=n&&(this._panMode=n)},enumerable:!0,configurable:!0}),t.prototype._bindEvents=function(){var n=this;f(document,'mousemove',function(t){var i=n._startX!==null&&n._startY!==null;i&&n._panning(t)});f(document,'mouseup',function(){n._stopPanning()});this._initTouchEvents()},t.prototype._startPanning=function(n){this._startX=n.screenX;this._startY=n.screenY},t.prototype._panning=function(n){var t=this._getPagesContainer();t.scrollLeft+=this._startX-n.screenX;t.scrollTop+=this._startY-n.screenY;this._startX=n.screenX;this._startY=n.screenY},t.prototype._stopPanning=function(){this._startX=null;this._startY=null},t.prototype._onPageIndexChanged=function(){this.pageIndexChanged.raise(this)},t.prototype._onZoomFactorChanged=function(){this.zoomFactorChanged.raise(this)},t.prototype._onPageLoaded=function(){},t.prototype._renderViewPage=function(n,t){var f=this,r,u=new s,o,e;return(t=t<0?0:t,!n)?(u.reject(i.culture.Viewer.cannotRenderPageNoViewPage),u):(ft(n),this._pages[t].content)?(o=this._pages[t].content,e=this._pages[t].size,n.style.height=e.height.valueInPixel*this._zoomFactor+'px',n.style.width=e.width.valueInPixel*this._zoomFactor+'px',n.appendChild(o),this._setPageZoomFactor(n,t),u.resolve(t),u):(r=document.createElement('div'),r.className='wj-loading',r.style.height=n.style.height,r.style.lineHeight=n.style.height,r.innerHTML=i.culture.Viewer.loading,n.appendChild(r),this._pages[t].getContent().then(function(i){var e=i,r=f._pages[t].size;ft(n);n.style.height=r.height.valueInPixel*f._zoomFactor+'px';n.style.width=r.width.valueInPixel*f._zoomFactor+'px';n.appendChild(e);f._setPageZoomFactor(n,t);f._onPageLoaded(t);u.resolve(t)}).catch(function(n){r.innerHTML=ri(n)}),u)},t.prototype._reserveViewPage=function(){throw i.culture.Viewer.abstractMethodException;},t.prototype._getViewPortHeight=function(){var n=this._pagesWrapper.currentStyle||window.getComputedStyle(this._pagesWrapper);return this.hostElement.offsetHeight-parseFloat(n.marginBottom)-parseFloat(n.marginTop)},t.prototype._getViewPortWidth=function(){var n=this._pagesWrapper.currentStyle||window.getComputedStyle(this._pagesWrapper);return this.hostElement.offsetWidth-parseFloat(n.marginLeft)-parseFloat(n.marginRight)},t.prototype._setPageZoomFactor=function(n,i){var r,f,u;n&&(u=this._getPageSize(i),n.style.height=u.height.valueInPixel*this._zoomFactor+'px',n.style.width=u.width.valueInPixel*this._zoomFactor+'px',r=n.querySelector('g'),r&&(r.parentNode.setAttribute('height',u.height.valueInPixel*this._zoomFactor+'px'),r.parentNode.setAttribute('width',u.width.valueInPixel*this._zoomFactor+'px'),r.setAttribute('transform','scale('+this._zoomFactor+')'),t._isIE&&(f=r.parentNode,f.removeChild(r),f.appendChild(r))))},t.prototype._addViewPage=function(){var t=this,n=document.createElement('div');return n.className='wj-view-page',f(n,'mousedown',function(n){t._panMode&&t._startPanning(n)}),f(n,'dragstart',function(n){t._panMode&&n.preventDefault()}),this._pagesWrapper.appendChild(n),n},t.prototype._getPageSize=function(n){return n<0||n>=this._pages.length?null:this._pages[n].size},t.prototype._render=function(){throw i.culture.Viewer.abstractMethodException;},t.prototype._moveToPagePosition=function(){throw i.culture.Viewer.abstractMethodException;},t.prototype._updatePageViewZoom=function(){throw i.culture.Viewer.abstractMethodException;},t.prototype._updatePageIndex=function(n){this.pages&&(n=this.resolvePageIndex(n),this._pageIndex!==n)&&(this._pageIndex=n,this._onPageIndexChanged())},t.prototype.moveToPage=function(n){return this.moveToPosition({pageIndex:n,pageBounds:{x:0,y:0,width:0,height:0}})},t.prototype.resolvePageIndex=function(n){return Math.min(this.pages.length-1,Math.max(n,0))},t.prototype.moveToPosition=function(n){var r=this,t=n.pageIndex||0,i;return i=new s,t=this.resolvePageIndex(t),n.pageIndex=t,t!==this._pageIndex?(this._updatePageIndex(t),i=this._render(t)):i.resolve(t),i.then(function(){r._moveToPagePosition(n)}),i.then(function(){return t}).then(function(){r._calcZoomModeZoom()})},t.prototype._calcZoomModeZoom=function(){switch(this.zoomMode){case g.PageWidth:this._zoomToViewWidth();break;case g.WholePage:this._zoomToView()}},t.prototype._zoomToView=function(){var t=this._getViewPortHeight(),i=this._getViewPortWidth(),n=this._getPageSize(this.pageIndex);n&&(this.zoomFactor=Math.min(t/n.height.valueInPixel,i/n.width.valueInPixel))},t.prototype._zoomToViewWidth=function(){throw i.culture.Viewer.abstractMethodException;},t.prototype.resetPages=function(){this._pageIndex=-1;this._pages=null;ft(this._pagesWrapper);this._addViewPage();this.invalidate()},t.prototype.refresh=function(t){(t===void 0&&(t=!0),n.prototype.refresh.call(this,t),this._autoHeightCalculated=!1,!this.pages||this.pages.length==0||this.pageIndex<0||this.pageIndex>=this.pages.length)||(this._render(this.pageIndex),this._calcZoomModeZoom())},t}(i.Control);nt._isIE=!!navigator.userAgent.match(/MSIE |Trident\/|Edge\//);nt._pageMargin=30;nt.controlTemplate='<div class="wj-pages-wrapper" wj-part="pages-wrapper"><\/div>';n("_PageViewBase",nt);dt=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return e(t,n),t.getScrollbarWidth=function(n){var i,r;return(!t._scrollbarWidth||n)&&(i=document.createElement('div'),i.style.width='50px',i.style.height='50px',i.style.overflow='auto',document.body.appendChild(i),r=document.createElement('div'),r.style.height='60px',i.appendChild(r),t._scrollbarWidth=i.offsetWidth-i.clientWidth,document.body.removeChild(i)),t._scrollbarWidth},t}(i.Control);dt._scrollbarWidth=null;n("_Scroller",dt);ar=function(n){function t(t){var r=n.call(this,t)||this,u;return r._height=100,r._max=100,r._desiredValue=0,r.valueChanged=new i.Event,u=r.getTemplate(),r.applyTemplate(null,u,{_wrapper:'wrapper'}),r.hostElement.style.width=dt.getScrollbarWidth()+1+'px',f(r.hostElement,"scroll",function(){r.onValueChanged()}),r}return e(t,n),t.prototype.onValueChanged=function(){this._desiredValue!=this.value&&this.valueChanged.raise(this)},t.prototype.preventScrollEvent=function(){this._desiredValue=this.hostElement.scrollTop},Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(n){n!==this._height&&(this._height=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.hostElement.scrollTop},set:function(n){this.hostElement.scrollTop=n;this.preventScrollEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},set:function(n){this._max!==n&&(this._max=n,this.invalidate())},enumerable:!0,configurable:!0}),t.prototype.refresh=function(t){var i,r;t===void 0&&(t=!0);n.prototype.refresh.call(this,t);i=this._height+'px';this.hostElement.style.height!==i&&(this.hostElement.style.height=i);r=this._max+this.hostElement.clientHeight+'px';this._wrapper.style.height!==r&&(this._wrapper.style.height=r);this.preventScrollEvent()},t}(dt);ar.controlTemplate='<div class="wj-vscroller-wrapper" wj-part="wrapper"></div>';n("_VScroller",ar);vr=function(n){function t(t){var r=n.call(this,t)||this;return r._innerNavigating=!1,r._virtualScrollMode=!0,i.addClass(t,"wj-pageview-single"),r}return e(t,n),t.prototype._init=function(){n.prototype._init.call(this);this._initScroller();this._initEvents()},t.prototype._initScroller=function(){var n=this,t=new ar(this._vscroller);t.valueChanged.addHandler(function(){setTimeout(function(){return n._doScrollerValueChanged()})})},t.prototype._initEvents=function(){var n=this;f(this._pagesContainer,"wheel",function(t){n._doContainerWheel(t)});f(this._pagesContainer,"scroll",function(){n._doContainerScroll()});f(this._pagesContainer,'keydown',function(){n._doContainerKeyDown()});f(this._pagesContainer,'click',function(){n._pagesContainer.focus()})},t.prototype._bindTouchEvents=function(t){var i=this;n.prototype._bindTouchEvents.call(this,t);t.swipe.addHandler(function(n,t){var r,u;switch(t.direction){case ut.Down:r=i.resolvePageIndex(i.pageIndex-1);r!=i.pageIndex&&i.moveToPage(r);break;case ut.Up:u=i.resolvePageIndex(i.pageIndex+1);u!=i.pageIndex&&i.moveToPage(u)}})},t.prototype._getTemplateParts=function(){return{_pagesWrapper:'pages-wrapper',_pagesContainer:'pages-container',_vscroller:'vscroller'}},t.prototype.applyTemplate=function(n,t,r){var f=this.hostElement,u,e;if(i.addClass(f,n),f.appendChild(et(t)),r)for(u in r)if(e=r[u],this[u]=f.querySelector('[wj-part="'+e+'"]'),this[u]==null&&f.getAttribute('wj-part')==e&&(this[u]=t),this[u]==null)throw'Missing template part: "'+e+'"';return f},Object.defineProperty(t.prototype,"virtualScrollMode",{get:function(){return this._virtualScrollMode},set:function(n){this._virtualScrollMode!==n&&(this._virtualScrollMode=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_isScrollerVisible",{get:function(){return this._virtualScrollMode&&this.pages&&this.pages.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_scroller",{get:function(){return i.Control.getControl(this._vscroller)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_hasPageVScrollBar",{get:function(){return this._pagesContainer.scrollHeight>this._pagesContainer.clientHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_hasPageHScrollBar",{get:function(){return this._pagesContainer.scrollWidth>this._pagesContainer.clientWidth},enumerable:!0,configurable:!0}),t.prototype._getPagesContainer=function(){return this._pagesContainer},t.prototype._getPageHeightWithoutZoom=function(n){var t=this._pagesContainer.clientHeight,i=this._getPageSize(n).height.valueInPixel+nt._pageMargin*2;return Math.max(i,t)},t.prototype._updateScroller=function(){var t,i,n;if(this._isScrollerVisible){for(t=this._scroller,t.height=this._pagesContainer.clientHeight,i=0,n=0;n<this.pages.length;n++)i+=this._getPageHeightWithoutZoom(n);t.max=i;this._updateScrollerValue()}},t.prototype._updateScrollerValue=function(){var n,r,i,f;if(this._isScrollerVisible&&(n=this.pageIndex,!(n<0))){r=0;this._pagesContainer.scrollTop>0&&(r=this._pagesContainer.scrollTop/(this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight));var u=this._scroller,e=this.pages.length,t=0;for(i=0;i<n;i++)t+=this._getPageHeightWithoutZoom(i);f=this._getPageHeightWithoutZoom(n);t+=f*r;n>=e-1&&!this._hasPageVScrollBar&&(t=u.max);u.value=t}},t.prototype._doScrollerValueChanged=function(){var t;if(this._isScrollerVisible){for(var f=this._scroller,i=this.pages.length,r=f.value,n=0,u=1;n<i;n++)if(t=this._getPageHeightWithoutZoom(n),r>t){r-=t;continue}else{u=r/t;break}n>=i&&(n=i-1);this._innerMoveToPage(n,u)}},t.prototype._doContainerWheel=function(n){if(this._isScrollerVisible&&n.deltaY!=0){var t=n.deltaY<0;if(this._hasPageVScrollBar)if(t){if(this._pagesContainer.scrollTop>0)return}else if(this._pagesContainer.scrollTop<this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight)return;t?this._innerMoveToPreviousPageAtBottom(n):this._innerMoveToNextPageAtTop(n)}},t.prototype._doContainerScroll=function(){this._isScrollerVisible&&this._pagesContainer.scrollTop!=this._desiredPageScrollTop&&this._updateScrollerValue()},t.prototype._doContainerKeyDown=function(){if(this._isScrollerVisible){var n=event;if(this._hasPageVScrollBar)switch(n.keyCode){case i.Key.PageDown:this._pagesContainer.scrollTop>=this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight&&this._innerMoveToNextPageAtTop(n);break;case i.Key.PageUp:this._pagesContainer.scrollTop==0&&this._innerMoveToPreviousPageAtBottom(n)}else switch(n.keyCode){case i.Key.Down:case i.Key.PageDown:this._innerMoveToNextPageAtTop(n);break;case i.Key.Up:case i.Key.PageUp:this._innerMoveToPreviousPageAtBottom(n)}}},t.prototype._preventContainerScroll=function(){this._desiredPageScrollTop=this._pagesContainer.scrollTop},t.prototype._innerMoveToPreviousPageAtBottom=function(n){this.pageIndex>0&&(n&&n.preventDefault(),this._innerMoveToPage(this.pageIndex-1,1),this._updateScrollerValue())},t.prototype._innerMoveToNextPageAtTop=function(n){this.pageIndex<this.pages.length-1&&(n&&n.preventDefault(),this._innerMoveToPage(this.pageIndex+1,0),this._updateScrollerValue())},t.prototype._innerMoveToPage=function(n,t){this._innerNavigating=!0;var i={pageIndex:n,pageBounds:null};this.moveToPosition(i);this._innerMoveToPagePosition(t);this._innerNavigating=!1},t.prototype._innerMoveToPagePosition=function(n){if(this._hasPageVScrollBar){var t=(this._pagesContainer.scrollHeight-this._pagesContainer.clientHeight)*n;this._pagesContainer.scrollTop=t;this._preventContainerScroll()}},t.prototype.moveToPosition=function(t){var i=n.prototype.moveToPosition.call(this,t);return this._innerNavigating||this._updateScrollerValue(),i},t.prototype._moveToPagePosition=function(n){if(n.pageBounds!=null){var t=n.pageBounds||{x:0,y:0,width:0,height:0},i,r;i=ct(t.y)*this.zoomFactor+nt._pageMargin;r=ct(t.x)*this.zoomFactor+nt._pageMargin;this._pagesContainer.scrollTop=i;this._pagesContainer.scrollLeft=r}},t.prototype._render=function(n){return this._renderViewPage(this._pagesWrapper.querySelector('.wj-view-page'),n)},t.prototype._guessPageIndex=function(){return this.pageIndex},t.prototype._reserveViewPage=function(){ft(this._pagesWrapper);this._addViewPage();this.invalidate()},t.prototype._updatePageViewZoom=function(){var n;n=this._pagesWrapper.querySelector('.wj-view-page');this._setPageZoomFactor(n,this.pageIndex)},t.prototype._onPageLoaded=function(t){n.prototype._onPageLoaded.call(this,t);this._updateScroller()},t.prototype._onZoomFactorChanged=function(){n.prototype._onZoomFactorChanged.call(this);this._updateScroller()},t.prototype._zoomToViewWidth=function(){var r,n,t,u,i;(r=this._getViewPortHeight(),n=this._getViewPortWidth(),t=this._getPageSize(this.pageIndex),t)&&(u=t.height.valueInPixel,i=t.width.valueInPixel,n/i>r/u&&(n-=dt.getScrollbarWidth()),this.zoomFactor=n/i)},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);this._isScrollerVisible?i.addClass(this.hostElement,"virtual"):i.removeClass(this.hostElement,"virtual");this._updateScroller()},t}(nt);vr.controlTemplate='<div class="wj-pageview-pagescontainer" wj-part="pages-container" tabindex="0">   <div class="wj-pages-wrapper" wj-part="pages-wrapper"><\/div><\/div><div class="wj-pageview-vscroller" wj-part="vscroller" tabindex="-1"><\/div> ';n("_SinglePageView",vr);yr=function(n){function t(t){var r=n.call(this,t)||this;return i.addClass(t,"wj-pageview-continuous"),r}return e(t,n),t.prototype._init=function(){var t=this,i;n.prototype._init.call(this);f(this.hostElement,'click',function(){t.hostElement.focus()});f(this.hostElement,'scroll',function(){i!=null&&clearTimeout(i);i=setTimeout(function(){var n=t._guessPageIndex();t.pageIndex!==n&&(t._render(n),t._updatePageIndex(n));i=null},200)})},t.prototype.dispose=function(){this._disposeBodyStopSwipe&&this._disposeBodyStopSwipe();n.prototype.dispose.call(this)},t.prototype._stopSwip=function(){this._swipeSpeedReducer&&this._swipeSpeedReducer.stop()},t.prototype._bindTouchEvents=function(t){var i=this,u,r;n.prototype._bindTouchEvents.call(this,t);t.touchStart.addHandler(this._stopSwip,this);t.swipe.addHandler(function(n,r){i._swipeSpeedReducer||(i._swipeSpeedReducer=new su);i._swipeSpeedReducer.start(r.speed.x,r.speed.y,function(n,r){var u=t.hostElement.scrollLeft,f=t.hostElement.scrollTop;t.hostElement.scrollLeft-=n;t.hostElement.scrollTop-=r;u==t.hostElement.scrollLeft&&f==t.hostElement.scrollTop&&i._stopSwip()})});u=new tt(document.body,!1);r=this._stopSwip.bind(this);f(document.body,'mousedown',r,!0);u.touchStart.addHandler(r);this._disposeBodyStopSwipe=function(){i._stopSwip();oi(document.body,'mousedown',r);u.touchStart.removeHandler(r);u.dispose();i._disposeBodyStopSwipe=null}},t.prototype._getAbovePageCount=function(n){return this._hitTest(n)},t.prototype.refresh=function(t){this._stopSwip();n.prototype.refresh.call(this,t)},t.prototype._hitTest=function(n){var t,i;if(!this.pages)return this.pageIndex;for(t=0,i=0;t<this.pages.length;t++)if(i+=this._getPageSize(t).height.valueInPixel*this.zoomFactor+nt._pageMargin,n<i)break;return t},t.prototype._guessPageIndex=function(){return this._hitTest(this.hostElement.scrollTop)},t.prototype._render=function(n){var f=this.pages.length,r=n-t._preFetchPageCount,u=n+t._preFetchPageCount,e=[],i;for(r=r<0?0:r,u=u>f-1?f-1:u,i=r;i<=u;i++)e.push(this._renderViewPage(this._pagesWrapper.getElementsByClassName('wj-view-page').item(i),i));return new fu(e)},t.prototype._moveToPagePosition=function(n){var t;this._stopSwip();var r,i=0,u=0,f=n.pageBounds||{x:0,y:0,width:0,height:0};for(t=0;t<n.pageIndex;t++)r=this._getPageSize(t).height.valueInPixel*this.zoomFactor,i+=r+nt._pageMargin;i+=ct(f.y)*this.zoomFactor+nt._pageMargin;u+=ct(f.x)*this.zoomFactor+nt._pageMargin;this.hostElement.scrollTop=i;this.hostElement.scrollLeft=u},t.prototype._reserveViewPage=function(){var n,t;for(ft(this._pagesWrapper),n=0;n<this.pages.length;n++)t=this._addViewPage(),t.style.height=this.pages[n].size.height.valueInPixel*this.zoomFactor+'px',t.style.width=this.pages[n].size.width.valueInPixel*this.zoomFactor+'px'},t.prototype._updatePageViewZoom=function(){for(var t=this._pagesWrapper.querySelectorAll('.wj-view-page'),n=0;n<t.length;n++)this._setPageZoomFactor(t.item(n),n)},t.prototype._zoomToViewWidth=function(){var f,t,n,u,i,r;if(this.pages.length!=0){for(f=this._getViewPortHeight(),t=this._getViewPortWidth(),n=0,u=0,i=0;i<this.pages.length;i++)r=this.pages[i].size,r.width.valueInPixel>n&&(n=r.width.valueInPixel),u+=r.height.valueInPixel;t/n>f/u&&(t-=dt.getScrollbarWidth());this.zoomFactor=t/n}},t}(nt);yr._preFetchPageCount=3;n("_ContinuousPageView",yr);gt=function(n){function t(t){var r=n.call(this,t)||this,u;return r._idCounter=0,r._tabPages=[],r._tabPageDic={},r.tabPageActived=new i.Event,r.tabPageVisibilityChanged=new i.Event,r.expanded=new i.Event,r.collapsed=new i.Event,u=r.getTemplate(),r.applyTemplate('wj-control',u,{_headersContainer:'wj-headers',_contentsContainer:'wj-contents'}),r}return e(t,n),t.prototype.applyTemplate=function(n,t,r){var f=this.hostElement,u,e;if(i.addClass(f,n),f.appendChild(et(t)),r)for(u in r)if(e=r[u],this[u]=f.querySelector('[wj-part="'+e+'"]'),this[u]==null&&f.getAttribute('wj-part')==e&&(this[u]=t),this[u]==null)throw'Missing template part: "'+e+'"';return f},Object.defineProperty(t.prototype,"tabPages",{get:function(){return this._tabPages},enumerable:!0,configurable:!0}),t.prototype.getTabPage=function(n){return this._tabPageDic[n]},t.prototype.getFirstShownTabPage=function(n){var t;return this._tabPages.some(function(i){return!i.isHidden&&i!==n?(t=i,!0):!1}),t},Object.defineProperty(t.prototype,"visibleTabPagesCount",{get:function(){var n=0;return this._tabPages.forEach(function(t){t.isHidden||n++}),n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activedTabPage",{get:function(){var n;return this._tabPages.some(function(t){return t.isActived?(n=t,!0):!1}),n},enumerable:!0,configurable:!0}),t.prototype.removePage=function(n){var t,u,i,r;(t=typeof n=='string'?this.getTabPage(n):n,t)&&((u=t.id,i=this._tabPages.indexOf(t),i<0)||(this._tabPages.splice(i,1),this._tabPageDic[u]=void 0,!this.isCollapsed&&t.isActived&&(r=this.getFirstShownTabPage(),r?this.active(r):this.collapse()),this._headersContainer.removeChild(t.header),this._contentsContainer.removeChild(t.outContent)))},t.prototype.addPage=function(n,t,r){var s=this,h=this._getNewTabPageId(),e=document.createElement('li'),l='<div class="wj-tabpane"><div class="wj-tabtitle-wrapper"><h3 class="wj-tabtitle">'+n+'<\/h3><span class="wj-close">×<\/span><\/div><div class="wj-tabcontent-wrapper"><div class="wj-tabcontent-inner"><\/div><\/div><\/div>',o=ti(l),a=at(t),u,c;return e.appendChild(a),r=r==null?this._tabPages.length:r,r=Math.min(Math.max(r,0),this._tabPages.length),r>=this._tabPages.length?(this._headersContainer.appendChild(e),this._contentsContainer.appendChild(o)):(this._headersContainer.insertBefore(e,this._tabPages[r].header),this._contentsContainer.insertBefore(o,this._tabPages[r].outContent)),f(o.querySelector('.wj-close'),'click',function(){s.collapse()}),f(e.querySelector('a'),'click,keydown',function(n){var t=s.getTabPage(h),r;t&&(r=n.type==='keydown'&&n.keyCode===i.Key.Enter||n.type==='click',r)&&s.active(t)}),u=new wu(o,e,h),r>=this._tabPages.length?this._tabPages.push(u):this._tabPages.splice(r,0,u),this._tabPageDic[h]=u,this.isCollapsed||(c=this.activedTabPage,c||this.active(u)),u},Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return i.hasClass(this.hostElement,t._collapsedCss)},enumerable:!0,configurable:!0}),t.prototype.hide=function(n){var t=typeof n=='string'?this.getTabPage(n):n;if(t&&!i.hasClass(t.header,y)){i.addClass(t.header,y);this.onTabPageVisibilityChanged(t);this.deactive(t)}},t.prototype.show=function(n){var t=typeof n=='string'?this.getTabPage(n):n,r;if(t&&i.hasClass(t.header,y)){i.removeClass(t.header,y);this.onTabPageVisibilityChanged(t);this.isCollapsed||(r=this.activedTabPage,r||this.active(t))}},t.prototype.deactive=function(n){var r=typeof n=='string'?this.getTabPage(n):n,u;r&&r.isActived&&(i.removeClass(r.outContent,t._activedCss),ii(r.header.querySelector('a'),!1),u=this.getFirstShownTabPage(r),u?this.active(u):this.collapse())},t.prototype.active=function(n){var r=typeof n=='string'?this.getTabPage(n):n;r&&((this.expand(),r.isActived)||(this._tabPages.forEach(function(n){i.removeClass(n.outContent,t._activedCss);ii(n.header.querySelector('a'),!1)}),this.show(r),i.addClass(r.outContent,t._activedCss),ii(r.header.querySelector('a'),!0),this.onTabPageActived()))},t.prototype.onTabPageActived=function(){this.tabPageActived.raise(this,new i.EventArgs)},t.prototype.onTabPageVisibilityChanged=function(n){this.tabPageVisibilityChanged.raise(this,{tabPage:n})},t.prototype.onExpanded=function(){this.expanded.raise(this,new i.EventArgs)},t.prototype.onCollapsed=function(){this.collapsed.raise(this,new i.EventArgs)},t.prototype.collapse=function(){this.isCollapsed||(i.addClass(this.hostElement,t._collapsedCss),this.onCollapsed())},t.prototype.expand=function(){if(this.isCollapsed){if(i.removeClass(this.hostElement,t._collapsedCss),!this.activedTabPage){var n=this.getFirstShownTabPage();n&&this.active(n)}this.onExpanded()}},t.prototype.toggle=function(){this.isCollapsed?this.expand():this.collapse()},t.prototype._getNewTabPageId=function(){while(this._tabPageDic[(this._idCounter++).toString()]);return this._idCounter.toString()},t}(i.Control);gt._activedCss='active';gt._collapsedCss='collapsed';gt.controlTemplate='<ul class="wj-nav wj-btn-group" wj-part="wj-headers"><\/ul><div class="wj-tabcontent" wj-part="wj-contents"><\/div>';n("_SideTabs",gt);wu=function(){function n(n,t,i){this._header=t;this._outContent=n;this._content=n.querySelector('.wj-tabcontent-inner');this._id=i}return Object.defineProperty(n.prototype,"isActived",{get:function(){return i.hasClass(this.outContent,gt._activedCss)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isHidden",{get:function(){return i.hasClass(this.header,y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){return this._content},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"outContent",{get:function(){return this._outContent},enumerable:!0,configurable:!0}),n.prototype.format=function(n){n(this)},n}();n("_TabPage",wu);bi=function(n){function t(t,i,r){var u=n.call(this,document.createElement('div'),r)||this;return u.owner=i,u.hostElement.style.display='none',u.owner.appendChild(u.hostElement),u.showDropDownButton=!1,u.itemClicked.addHandler(u._onItemClicked,u),u.formatItem.addHandler(u._formatItem,u),u._viewer=t,u.displayMemberPath='title',u.selectedValuePath='commandTag',u._bindMenuItems(),u._viewer._viewerActionStatusChanged.addHandler(function(n,t){var i=u.dropDown.querySelector('['+yt+'="'+t.action.actionType.toString()+'"]');u._updateActionStatusCore(i,t.action)}),u}return e(t,n),Object.defineProperty(t.prototype,"viewer",{get:function(){return this._viewer},enumerable:!0,configurable:!0}),t.prototype._bindMenuItems=function(){this.itemsSource=this._initItems()},t.prototype._initItems=function(){throw i.culture.Viewer.abstractMethodException;},t.prototype._internalFormatItem=function(n,t){if(n&&n.commandTag!==undefined){if(ft(t),n.icon){var i=document.createElement('span');i.appendChild(at(n.icon));t.insertBefore(i,t.firstChild)}t.setAttribute(yt,n.commandTag.toString());this._updateActionStatus(t,n.commandTag)}},t.prototype._formatItem=function(n,t){this._internalFormatItem(this.itemsSource[t.index],t.item)},t.prototype._onItemClicked=function(n){this._viewer._executeAction(parseInt(n.selectedItem.commandTag))},t.prototype._updateActionStatus=function(n,t){this._updateActionStatusCore(n,{actionType:t,checked:this._viewer._actionIsChecked(t),disabled:this._viewer._actionIsDisabled(t),shown:this._viewer._actionIsShown(t)})},t.prototype._updateActionStatusCore=function(n,t){ii(n,t.checked);gr(n,t.disabled);nu(n,t.shown)},t.prototype._updateItemsStatus=function(){for(var t,i,r=this.dropDown.querySelectorAll('['+yt+']'),n=0;n<r.length;n++)(t=r[n],i=t.getAttribute(yt),i!=null)&&this._updateActionStatus(t,parseInt(i));tu(this.dropDown)},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._bindMenuItems();this.isDroppedDown&&this.showMenu()},t.prototype.showMenu=function(n){this.selectedIndex=-1;i.showPopup(this.dropDown,this.owner,n,!1,!1);this.dropDown.style.color=this._viewer.hostElement.style.color;i.addClass(this.dropDown,'wj-btn-group-vertical');i.addClass(this.dropDown,'wj-viewer-menu');this._updateItemsStatus();this.dropDown.focus()},t}(a.Menu);n("_ViewerMenuBase",bi);pr=function(n){function t(t,i,r){return n.call(this,t,i,r)||this}return e(t,n),t.prototype._initItems=function(){var n=[];return n.push({title:i.culture.Viewer.thumbnails,icon:u.thumbnails,commandTag:r.ShowThumbnails}),n.push({title:i.culture.Viewer.outlines,icon:u.outlines,commandTag:r.ShowOutlines}),n.push({title:i.culture.Viewer.exports,icon:u.exports,commandTag:r.ShowExportsPanel}),n.push({title:k._seperatorHtml}),n.push({title:i.culture.Viewer.portrait,icon:u.portrait,commandTag:r.Portrait}),n.push({title:i.culture.Viewer.landscape,icon:u.landscape,commandTag:r.Landscape}),n.push({title:i.culture.Viewer.pageSetup,icon:u.pageSetup,commandTag:r.ShowPageSetupPanel}),n.push({title:k._seperatorHtml}),n.push({title:i.culture.Viewer.showZoomBar,icon:u.showZoomBar,commandTag:r.ShowZoomBar}),n.push({title:k._seperatorHtml}),n.push({title:i.culture.Viewer.paginated,icon:u.paginated,commandTag:r.TogglePaginated}),n.push({title:i.culture.Viewer.print,icon:u.print,commandTag:r.Print}),n.push({title:k._seperatorHtml}),n.push({title:i.culture.Viewer.backwardHistory,icon:u.backwardHistory,commandTag:r.Backward}),n.push({title:i.culture.Viewer.forwardHistory,icon:u.forwardHistory,commandTag:r.Forward}),n},t}(bi);n("_HamburgerMenu",pr);bu=function(n){function t(t,i,r){return n.call(this,t,i,r)||this}return e(t,n),t.prototype._initItems=function(){var n=[];return n.push({title:i.culture.Viewer.singleMode,icon:u.singleView,commandTag:r.Single}),n.push({title:i.culture.Viewer.continuousMode,icon:u.continuousView,commandTag:r.Continuous}),n.push({title:k._seperatorHtml}),n.push({title:i.culture.Viewer.wholePage,icon:u.fitWholePage,commandTag:r.FitWholePage}),n.push({title:i.culture.Viewer.pageWidth,icon:u.fitPageWidth,commandTag:r.FitPageWidth}),n},t}(bi);n("_ViewMenu",bu);ku=function(n){function t(t,i,r){return n.call(this,t,i,r)||this}return e(t,n),t.prototype._initItems=function(){var n=[];return n.push({title:i.culture.Viewer.wholeWordMenuItem,commandTag:r.SearchMatchWholeWord}),n.push({title:i.culture.Viewer.matchCaseMenuItem,commandTag:r.SearchMatchCase}),n},t.prototype._internalFormatItem=function(t,r){if(n.prototype._internalFormatItem.call(this,t,r),t&&t.commandTag!==undefined){var u=document.createElement('span');u.innerHTML=i.culture.Viewer.checkMark;i.addClass(u,'checkIcon');r.insertBefore(u,r.firstChild)}},t.prototype._updateActionStatus=function(t,r){n.prototype._updateActionStatus.call(this,t,r);this.viewer._actionIsChecked(r)&&i.addClass(t,'checked')},t}(bi);n("_SearchOptionsMenu",ku),function(n){n[n.Single=0]="Single";n[n.Continuous=1]="Continuous"}(rt||(rt={}));n("ViewMode",rt),function(n){n[n.Custom=0]="Custom";n[n.PageWidth=1]="PageWidth";n[n.WholePage=2]="WholePage"}(g||(g={}));n("ZoomMode",g);wr=function(n){function t(t){var i=n.call(this)||this;return i._a=t,i}return e(t,n),Object.defineProperty(t.prototype,"element",{get:function(){return this._a},enumerable:!0,configurable:!0}),t}(i.EventArgs);n("_LinkClickedEventArgs",wr);du=function(){function n(){this._items=[];this._position=-1;this.statusChanged=new i.Event}return n.prototype._onStatusChanged=function(){this.statusChanged.raise(this,new i.EventArgs)},n.prototype.clear=function(){this._items.length!=0&&(this._items.length=0,this._position=-1,this._onStatusChanged())},n.prototype.add=function(n){n&&(this._items.splice(this._position+1),this._items.push(n),this._position=this._items.length-1,this._onStatusChanged())},n.prototype.forward=function(){return this.canForward()?(this._position++,this._onStatusChanged(),this._items[this._position]):null},n.prototype.backward=function(){return this.canBackward()?(this._position--,this._onStatusChanged(),this._items[this._position]):null},n.prototype.canForward=function(){return this._items.length>0&&this._position<this._items.length-1},n.prototype.canBackward=function(){return this._items.length>0&&this._position>0},n}();n("_HistoryManager",du);k=function(n){function t(t,r){var u=n.call(this,t,r,!0)||this;return u._pages=[],u._pageIndex=0,u._selectMouseMode=!0,u._viewMode=rt.Single,u._needBind=!1,u._historyManager=new du,u._fullScreen=!1,u._miniToolbarPinnedTimer=null,u._autoHeightCalculated=!1,u._searchManager=new ou,u._thresholdWidth=767,u._documentSourceChanged=new i.Event,u.pageIndexChanged=new i.Event,u.viewModeChanged=new i.Event,u.selectMouseModeChanged=new i.Event,u.fullScreenChanged=new i.Event,u.zoomFactorChanged=new i.Event,u.queryLoadingData=new i.Event,u._viewerActionStatusChanged=new i.Event,u._documentEventKey=(new Date).getTime().toString(),u._init(r),u}return e(t,n),Object.defineProperty(t.prototype,"serviceUrl",{get:function(){return this._serviceUrl},set:function(n){n!=this._serviceUrl&&(this._serviceUrl=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filePath",{get:function(){return this._filePath},set:function(n){n!=this._filePath&&(this._filePath=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thresholdWidth",{get:function(){return this._thresholdWidth},set:function(n){n!=this._thresholdWidth&&(this._thresholdWidth=n,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_innerPaginated",{get:function(){return this._documentSource&&!this._needBind?this._documentSource.paginated:this._paginated},set:function(n){this._documentSource&&!this._needBind?this._setPaginated(n):this._paginated=n==null?null:i.asBoolean(n);this._setViewerAction(r.TogglePaginated,!0)},enumerable:!0,configurable:!0}),t.prototype.reload=function(){this._needBindDocumentSource();this.invalidate()},t.prototype.refresh=function(r){var u,f,e,o,s;r===void 0&&(r=!0);n.prototype.refresh.call(this,r);this._needBind&&(this._setDocumentSource(this._getSource()),this._needBind=!1);r&&(u=i.Control.getControl(this._toolbar),u&&u.refresh(),f=i.Control.getControl(this._miniToolbar),f&&f.refresh(),e=i.Control.getControl(this._mobileToolbar),e&&e.refresh(),o=i.Control.getControl(this._zoomBar),o&&o.refresh(),s=i.Control.getControl(this._searchBar),s&&s.refresh(),this._hamburgerMenu&&this._hamburgerMenu.refresh(),this._viewMenu&&this._viewMenu.refresh(),this._searchOptionsMenu&&this._searchOptionsMenu.refresh(),t._exportItems=null,this._updateExportFormats(!0),this._globalize(),this._updateLayout());this._resetMiniToolbarPosition();this._resetToolbarWidth();this._resetViewPanelContainerWidth();this._autoHeightCalculated=!1},t.prototype._updateLayout=function(){this._switchTemplate(this._isMobileTemplate())},t.prototype._switchTemplate=function(n){var r=this.hostElement.querySelector('.wj-viewer-outer'),u='mobile',t=i.Control.getControl(this._sidePanel),f=t.getTabPage(this._pageSetupPageId);n?(i.addClass(r,u),t.show(f)):(i.removeClass(r,u),t.hide(f))},t.prototype._getSource=function(){return this.filePath?new v({serviceUrl:this._serviceUrl,filePath:this._filePath}):null},t.prototype._needBindDocumentSource=function(){this._needBind=!0},t.prototype._supportsPageSettingActions=function(){return!1},t.prototype._isMobileTemplate=function(){return this.thresholdWidth>this.hostElement.getBoundingClientRect().width},t.prototype._init=function(n){var t=this;this._createChildren();this._autoCalculateHeight();this._resetToolbarWidth();this._resetViewPanelContainerWidth();this._bindEvents();this.deferUpdate(function(){t.initialize(n)})},t.prototype._globalize=function(){var n=i.culture.Viewer;this._gSearchTitle.textContent=n.search;this._gMatchCase.innerHTML='&nbsp;&nbsp;&nbsp;'+n.matchCase;this._gWholeWord.innerHTML='&nbsp;&nbsp;&nbsp;'+n.wholeWord;this._gSearchResults.textContent=n.searchResults;this._gThumbnailsTitle.textContent=n.thumbnails;this._gOutlinesTitle.textContent=n.outlines;this._gPageSetupTitle.textContent=n.pageSetup;this._gPageSetupApplyBtn=n.ok;this._gExportsPageTitle=n.exports;this._gExportsPageApplyBtn=n.exportFormat;this._gExportFormat=n.exportOk},t.prototype._autoCalculateHeight=function(){if(this._shouldAutoHeight()){var n=this._viewpanelContainer.style.height;this._viewpanelContainer.style.height='auto';this._viewerContainer.style.height=Math.max(this._viewpanelContainer.getBoundingClientRect().height,t._viewpanelContainerMinHeight)+'px';this._viewpanelContainer.style.height=n}},t.prototype._bindEvents=function(){var n=this,t;f(window,'unload',function(){n._documentSource&&n._documentSource.dispose()});f(document,'mousemove',function(t){if(n.fullScreen&&n._miniToolbar){var i=n._checkMiniToolbarVisible(t);n._miniToolbarPinnedTimer!=null&&i?(clearTimeout(n._miniToolbarPinnedTimer),n._miniToolbarPinnedTimer=null,n._showMiniToolbar(i)):n._miniToolbarPinnedTimer==null&&n._showMiniToolbar(i)}});f(document,'keydown',function(t){t.keyCode===i.Key.Escape&&(n.fullScreen=!1)});this._historyManager.statusChanged.addHandler(this._onHistoryManagerStatusUpdated,this);this._onHistoryManagerStatusUpdated();this._pageView.pageIndexChanged.addHandler(function(){n._updatePageIndex(n._pageView.pageIndex)});this._pageView.zoomFactorChanged.addHandler(function(){n.onZoomFactorChanged()});t=!1;this._searchManager.currentChanged.addHandler(function(){if(!t){var i=n._searchManager.current;i&&(t=!0,n._highlightPosition(i.pageIndex,i.boundsList),t=!1)}})},t.prototype._checkMiniToolbarVisible=function(n){var r=n.clientX,u=n.clientY,t=this._miniToolbar.getBoundingClientRect(),i=60,f=t.left-i,e=t.right+i,o=t.top-i,s=t.bottom+i;return r>=f&&r<=e&&u>=o&&u<=s},t.prototype._showMiniToolbar=function(n){var t=parseFloat(getComputedStyle(this._miniToolbar,'').opacity),r=.01,i,u=this._miniToolbar;i=n?setInterval(function(){if(t>=.8){window.clearInterval(i);return}t+=r;u.style.opacity=t.toString()},1):setInterval(function(){if(t<0){window.clearInterval(i);return}t-=r;u.style.opacity=t.toString()},1)},t.prototype._goToBookmark=function(n){var t=this;this._documentSource&&n!==""&&this._documentSource.getBookmark(n).then(function(n){n&&t._scrollToPosition(n,!0)})},t.prototype._executeCustomAction=function(n){var t=this,i;this._documentSource&&n!==""&&(this._initialPosition={pageIndex:this._pageIndex,pageBounds:{x:0,y:0,width:0,height:0}},this._resetDocument(),this._showViewPanelMessage(),this._setDocumentRendering(),i=this._documentSource,this._documentSource.executeCustomAction(n).then(function(n){t._initialPosition=n||t._initialPosition;t._getStatusUtilCompleted(i)}).catch(function(n){t._showViewPanelErrorMessage(ri(n))}))},t.prototype._getStatusUtilCompleted=function(n){var t=this;!n||n.isLoadCompleted||n.isDisposed||n.getStatus().then(function(){t._documentSource===n&&setTimeout(function(){return t._getStatusUtilCompleted(n)},100)})},t.prototype._initChildren=function(){this._initPageView();this._initToolbar();this._initSidePanel();this._initSplitter();this._initFooter();this._initSearchBar()},t.prototype._initSearchBar=function(){new pu(this._searchBar,this);this._showSearchBar(!1)},t.prototype._showSearchBar=function(n){var t=this.hostElement.querySelector('.wj-viewer-outer'),r='with-searchbar';n?(i.removeClass(this._searchBar,y),i.addClass(t,r)):(i.addClass(this._searchBar,y),i.removeClass(t,r))},t.prototype._initFooter=function(){var n=this;new yu(this._zoomBar,this);f(this._footer.querySelector('.wj-close'),'click',function(){n._showFooter(!1)})},t.prototype._showFooter=function(n){var t=this.hostElement.querySelector('.wj-viewer-outer'),r='with-footer';n?(i.removeClass(this._footer,y),i.addClass(t,r)):(i.addClass(this._footer,y),i.removeClass(t,r))},t.prototype._createChildren=function(){var n=this.getTemplate();this.applyTemplate('wj-viewer wj-control',n,{_viewpanelContainer:'viewpanel-container',_toolbar:'toolbar',_mobileToolbar:'mobile-toolbar',_miniToolbar:'mini-toolbar',_leftPanel:'viewer-left-panel',_sidePanel:'side-panel',_viewerContainer:'viewer-container',_splitter:'splitter',_footer:'viewer-footer',_zoomBar:'zoom-bar',_searchBar:'search-bar'});this._initChildren()},t.prototype._initPageView=function(){var n=new lr(this._viewpanelContainer);n.viewMode=this.viewMode},Object.defineProperty(t.prototype,"_pageView",{get:function(){return i.Control.getControl(this._viewpanelContainer)},enumerable:!0,configurable:!0}),t.prototype._initSplitter=function(){var n=this;f(this._splitter,'click',function(){return n._toggleSplitter()})},t.prototype._toggleSplitter=function(n){var r='wj-glyph-left',f='wj-glyph-right',t=this._splitter.querySelector('span'),u=i.Control.getControl(this._sidePanel);if(n===!0){if(i.hasClass(t,f))return}else if(n===!1){if(i.hasClass(t,r))return}else n=i.hasClass(t,r);if(n)u.collapse(),t.className=f;else{if(u.visibleTabPagesCount===0)return;t.className=r;u.expand()}this._resetViewPanelContainerWidth()},t.prototype._resetMiniToolbarPosition=function(){if(this._miniToolbar){var n=this.hostElement.getBoundingClientRect().width,t=this._miniToolbar.getBoundingClientRect().width;this._miniToolbar.style.left=(n-t)/2+'px'}},t.prototype._resetToolbarWidth=function(){var n=i.Control.getControl(this._toolbar);n.resetWidth()},t.prototype._resetViewPanelContainerWidth=function(){!this._isMobileTemplate()&&this.hostElement.getBoundingClientRect().width<=t._narrowWidthThreshold?i.addClass(this.hostElement,t._narrowCss):i.removeClass(this.hostElement,t._narrowCss);var n=this._splitter?this._splitter.getBoundingClientRect().width:0,r=this._leftPanel?this._leftPanel.getBoundingClientRect().width:0;this._viewpanelContainer.style.width=this._viewerContainer.getBoundingClientRect().width-n-r+'px';this._pageView.invalidate()},t.prototype._shouldAutoHeight=function(){return(this.hostElement.style.height==='100%'||this.hostElement.style.height==='auto')&&!this.fullScreen},t.prototype._initSidePanel=function(){var n=this,t=new gt(this._sidePanel);t.collapse();t.collapsed.addHandler(function(){n._toggleSplitter(!0)});t.expanded.addHandler(function(){n._toggleSplitter(!1);var t=n._splitter?n._splitter.getBoundingClientRect().width:0,r=n._sidePanel.getBoundingClientRect().width+t;r>n._viewerContainer.getBoundingClientRect().width&&i.addClass(n._sidePanel,"collapsed")});t.tabPageVisibilityChanged.addHandler(function(i,r){(!r.tabPage.isHidden&&t.visibleTabPagesCount==1||r.tabPage.isHidden&&t.visibleTabPagesCount==0)&&n._resetViewPanelContainerWidth()});this._initSidePanelThumbnails();this._initSidePanelOutlines();this._initSidePanelSearch();this._initSidePanelExports();this._initSidePanelPageSetup()},t.prototype._clearPreHightLights=function(){this._pages.forEach(function(n){var i,t;if(n.content)for(i=n.content.querySelectorAll('.highlight'),t=0;t<i.length;t++)i.item(t).parentNode.removeChild(i.item(t))})},t.prototype._highlightPosition=function(n,t){var i=this;this._innerMoveToPage(n).then(function(){var u,f=i._pageIndex,e=i._pageView.scrollTop,o=i._pageView.scrollLeft,r={pageIndex:n,pageBounds:null};i._clearPreHightLights();i._pages[i.pageIndex].getContent().then(function(s){var h,c;for(u=s.querySelector('g'),h=0;h<t.length;h++)c=document.createElementNS('http://www.w3.org/2000/svg','rect'),c.setAttributeNS(null,'x',ct(t[h].x).toString()),c.setAttributeNS(null,'y',ct(t[h].y).toString()),c.setAttributeNS(null,'height',ct(t[h].height).toString()),c.setAttributeNS(null,'width',ct(t[h].width).toString()),c.setAttributeNS(null,'class','highlight'),u.appendChild(c);t.length>0&&(r.pageBounds=t[0],i._scrollToPosition(r));(f!=n||e!=i._pageView.scrollTop||o!=i._pageView.scrollLeft)&&i._addHistory(r)})})},t.prototype._scrollToPosition=function(n,t){n.pageIndex=n.pageIndex||0;this._pageView.moveToPosition(n);t===!0&&this._addHistory(n)},t.prototype._initSidePanelSearch=function(){var n=this,t=i.Control.getControl(this._sidePanel),r=t.addPage(i.culture.Viewer.search,u.search);this._gSearchTitle=r.outContent.querySelector('.wj-tabtitle');r.format(function(r){var p='<div class="wj-searchcontainer"><input class="wj-searchbox" wj-part="search-box" type="text"/><div class="wj-btn-group"><button class="wj-btn wj-btn-searchpre">'+at(u.searchPrevious).innerHTML+'<\/button><button class="wj-btn wj-btn-searchnext">'+at(u.searchNext).innerHTML+'<\/button><\/div><\/div><div class="wj-searchoption"><label><span wj-part="g-matchCase">&nbsp;&nbsp;&nbsp;'+i.culture.Viewer.matchCase+'<\/span><input type="checkbox" wj-part="match-case" /><\/label><\/div><div class="wj-searchoption"><label><span wj-part="g-wholeWord">&nbsp;&nbsp;&nbsp;'+i.culture.Viewer.wholeWord+'<\/span><input type="checkbox" wj-part="whole-word" /><\/label><\/div><h3 wj-part="g-searchResults" class="wj-searchresult">'+i.culture.Viewer.searchResults+'</h3>',o=et(p),y;n._gMatchCase=o.querySelector('[wj-part="g-matchCase"]');n._gWholeWord=o.querySelector('[wj-part="g-wholeWord"]');n._gSearchResults=o.querySelector('[wj-part="g-searchResults"]');r.outContent.querySelector('.wj-tabtitle-wrapper').appendChild(o);var h=r.outContent.querySelectorAll('input[type="checkbox"]')[0],c=r.outContent.querySelectorAll('input[type="checkbox"]')[1],s=r.outContent.querySelector('input[type="text"]'),w=r.outContent.querySelector('.wj-btn-searchpre'),b=r.outContent.querySelector('.wj-btn-searchnext');i.addClass(r.content.parentElement,'search-wrapper');i.addClass(r.content,'wj-searchresultlist');var e=new a.ListBox(r.content),l=!1,v=!1;e.formatItem.addHandler(function(n,t){var r=t.item,e=t.data,u=document.createElement('div'),f=document.createElement('div');r.innerHTML='';f.innerHTML=e.nearText;f.className='wj-search-text';u.innerHTML='Page '+(e.pageIndex+1);u.className='wj-search-page';i.addClass(r,'wj-search-item');r.setAttribute('tabIndex','-1');r.appendChild(f);r.appendChild(u)});e.selectedIndexChanged.addHandler(function(){return n._searchManager.currentIndex=e.selectedIndex});n._searchManager.searchCompleted.addHandler(function(){l=!0;e.itemsSource=n._searchManager.searchResults;l=!1});n._searchManager.currentChanged.addHandler(function(){if(!l&&!v){var t=n._searchManager.current;t&&(v=!0,e.selectedIndex=n._searchManager.currentIndex,v=!1)}});y=function(){if(e.itemsSource=null,h.checked=!1,c.checked=!1,s.value='',!n._documentSource||!n._documentSource.features||n._documentSource.paginated&&!n._documentSource.features.textSearchInPaginatedMode){t.hide(r);return}t.show(r)};n._documentSourceChanged.addHandler(function(){n._documentSource&&d(n._documentEventKey,n._documentSource.loadCompleted,y);y()});f(h,'click',function(){n._searchManager.matchCase=h.checked});f(c,'click',function(){n._searchManager.wholeWord=c.checked});f(s,'input',function(){n._searchManager.text=s.value});f(s,'keyup',function(t){var r=t||window.event;r.keyCode===i.Key.Enter&&n._searchManager.search(r.shiftKey)});f(b,'click',function(){return n._searchManager.search()});f(w,'click',function(){return n._searchManager.search(!0)});f(r.header,'keydown',function(t){var r,u=n._toolbar;t.keyCode===i.Key.Tab&&(r=u.querySelector('[tabIndex=0]')||u.querySelector('input:not([type="hidden"])')||u,r&&r.focus&&(r.focus(),t.preventDefault()))})})},t.prototype._initSidePanelOutlines=function(){var n=this,t=i.Control.getControl(this._sidePanel),r=t.addPage(i.culture.Viewer.outlines,u.outlines);this._gOutlinesTitle=r.outContent.querySelector('.wj-tabtitle');this._outlinesPageId=r.id;r.format(function(r){var u,o;i.addClass(r.content,'wj-outlines-tree');u=new ci.FlexGrid(r.content);u.initialize({autoGenerateColumns:!1,columns:[{binding:'caption',width:'*'}],isReadOnly:!0,childItemsPath:'children',allowResizing:ci.AllowResizing.None,headersVisibility:ci.HeadersVisibility.None});u.itemFormatter=function(n,t,i,r){var u,f;u=r.firstElementChild?r.firstElementChild.outerHTML:'&nbsp;&nbsp;&nbsp;&nbsp;';f=n.rows[t].dataItem;r.innerHTML=u+'<a>'+f.caption+'</a>'};o=!1;u.selectionChanged.addHandler(function(i,r){var f,u;if(!o&&(f=r.panel.rows[r.row],f)){if(u=f.dataItem,u.position)n._scrollToPosition(u.position,!0);else if(u.target){if(!n._documentSource)return;n._documentSource.getBookmark(u.target).then(function(t){u.position=t;i.getSelectedState(r.row,r.col)!=ci.SelectedState.None&&n._scrollToPosition(t,!0)},function(){})}n._isMobileTemplate()&&t.collapse()}});var f=!1,e=function(){f||t.isCollapsed||!r.isActived||r.isHidden||(u.refresh(),f=!0)},s=function(){if(!n._documentSource){u.itemsSource=null;t.hide(r);return}var i=function(){if(!n._documentSource.hasOutlines){u.itemsSource=null;t.hide(r);return}n._documentSource.getOutlines().then(function(n){f=!1;u.itemsSource=n;t.show(r);e()})};d(n._documentEventKey,n._documentSource.loadCompleted,i);i()};n._documentSourceChanged.addHandler(s);t.expanded.addHandler(e);t.tabPageActived.addHandler(e);s()})},t.prototype._initSidePanelThumbnails=function(){var n=this,t=i.Control.getControl(this._sidePanel),r=t.addPage(i.culture.Viewer.thumbnails,u.thumbnails);this._gThumbnailsTitle=r.outContent.querySelector('.wj-tabtitle');this._thumbnailsPageId=r.id;r.format(function(r){i.addClass(r.content,'wj-thumbnaillist');var u=new a.ListBox(r.content),f=null,s=!1;u.formatItem.addHandler(function(n,t){var r=t.item,e=t.data,u=document.createElement('img'),f=document.createElement('div');r.innerHTML='';i.addClass(r,'wj-thumbnail-item');u.setAttribute('tabIndex','-1');u.className='wj-pagethumbnail';u.src=e;r.appendChild(u);f.className='page-index';f.innerHTML=(t.index+1).toString();r.appendChild(f)});u.selectedIndexChanged.addHandler(function(){s||u.selectedIndex<0||u.selectedIndex==n._pageIndex||(n.moveToPage(u.selectedIndex),n._isMobileTemplate()&&t.collapse())});n.pageIndexChanged.addHandler(function(){return u.selectedIndex=n._pageIndex});var c=function(){var i,t;if(!n._documentSource||!n._documentSource.isLoadCompleted)return null;for(i=[],t=0;t<n._documentSource.pageCount;t++)i.push(n._documentSource.getRenderToFilterUrl({format:'png',resolution:50,outputRange:t+1}));return i},e=function(){!t.isCollapsed&&r.isActived&&(f||(f=c()),r.isActived&&u.itemsSource!==f&&u.deferUpdate(function(){s=!0;u.itemsSource=f;u.selectedIndex=n._pageIndex;s=!1}))},o=function(){if(!n._documentSource||!n._documentSource.paginated){t.hide(r);u.itemsSource=null;return}t.show(r);f=null;e()},h=function(){if(!n._documentSource){t.hide(r);u.itemsSource=null;return}d(n._documentEventKey,n._documentSource.loadCompleted,o);d(n._documentEventKey,n._documentSource.pageCountChanged,o);d(n._documentEventKey,n._documentSource.pageSettingsChanged,o);o()};n._documentSourceChanged.addHandler(h);h();t.expanded.addHandler(e);t.tabPageActived.addHandler(e);e()})},t.prototype._initSidePanelExports=function(){var n=this,t=i.Control.getControl(this._sidePanel),r=t.addPage(i.culture.Viewer.exports,u.exports);this._gExportsPageTitle=r.outContent.querySelector('.wj-tabtitle');this._exportsPageId=r.id;r.format(function(r){var l='<div class="wj-exportcontainer"><label wj-part="g-wj-exportformat">'+i.culture.Viewer.exportFormat+'<\/label><div class="wj-exportformats"><\/div><\/div>',v=et(l),o,u,s,h,c,e;r.outContent.querySelector('.wj-tabtitle-wrapper').appendChild(v);n._gExportFormat=r.outContent.querySelector('.g-wj-exportformat');o=r.outContent.querySelector('.wj-exportformats');new a.ComboBox(o);i.addClass(r.content.parentElement,'wj-exportformats-wrapper');u=document.createElement('div');s=new bt(u);r.content.appendChild(u);h='<div class="wj-exportformats-footer"><a wj-part="btn-apply" href="javascript:void(0)" tabindex="-1" draggable="false">'+i.culture.Viewer.exportOk+"<\/a><\/div>";c=et(h);r.content.appendChild(c);e=r.content.querySelector('[wj-part="btn-apply"]');n._gExportsPageApplyBtn=e;f(e,'click',function(){n._export(s.options);t.collapse()})});t.tabPageActived.addHandler(function(){t.activedTabPage.id==n._exportsPageId&&(n._supportedFormats?n._updateExportFormats():n._updateSupportedFormats().then(function(){n._updateExportFormats()}))})},t.prototype._initSidePanelPageSetup=function(){var n=this,r=i.Control.getControl(this._sidePanel),t=r.addPage(i.culture.Viewer.pageSetup,u.pageSetup);this._gPageSetupTitle=t.outContent.querySelector('.wj-tabtitle');this._pageSetupPageId=t.id;t.format(function(t){var u=document.createElement('div'),h=new pi(u),c,l,e,o,s;t.content.appendChild(u);i.addClass(u,'wj-pagesetupcontainer');c='<div class="wj-pagesetup-footer"><a wj-part="btn-apply" href="javascript:void(0)" tabindex="-1" draggable="false">'+i.culture.Viewer.ok+"<\/a><\/div>";l=et(c);t.content.appendChild(l);e=t.content.querySelector('[wj-part="btn-apply"]');n._gPageSetupApplyBtn=e;f(e,'click',function(){n._setPageSettings(h.pageSettings);r.collapse()});o=function(){h.pageSettings=n._documentSource.pageSettings};s=function(){n._documentSource&&(d(n._documentEventKey,n._documentSource.pageSettingsChanged,o),o())};n._documentSourceChanged.addHandler(s);s()})},t.prototype._updateExportFormats=function(n){var u=this,o=i.Control.getControl(this._sidePanel),f=o.getTabPage(this._exportsPageId),t=i.Control.getControl(f.outContent.querySelector('.wj-exportformats')),e=i.Control.getControl(f.content.firstElementChild),r;if(this._supportedFormats&&(n||!t.itemsSource)){if(n){e.refresh();t.itemsSource&&(t.itemsSource.forEach(function(n){n.name=u._exportItemDescriptions[n.format].name}),t.refresh());return}r=[];this._supportedFormats.forEach(function(n){var t=u._exportItemDescriptions[n.format];(!v._isIOS()||t.supportIOS)&&(n.name=t.name,r.push(n))});t.selectedIndexChanged.addHandler(function(){e.exportDescription=t.selectedItem});t.itemsSource=r;t.displayMemberPath='name';t.selectedValuePath='format';t.selectedIndex=-1}},t.prototype._executeAction=function(n){if(!this._actionIsDisabled(n))switch(n){case r.TogglePaginated:this._innerPaginated=!this._innerPaginated;break;case r.Print:this._documentSource&&this._documentSource.print();break;case r.ShowExportsPanel:i.Control.getControl(this._sidePanel).active(this._exportsPageId);break;case r.Portrait:this._setPageLandscape(!1);break;case r.Landscape:this._setPageLandscape(!0);break;case r.ShowPageSetupDialog:this.showPageSetupDialog();break;case r.FirstPage:this.moveToPage(0);break;case r.LastPage:this._moveToLastPage();break;case r.PrePage:this.moveToPage(this._pageIndex-1);break;case r.NextPage:this.moveToPage(this._pageIndex+1);break;case r.Backward:this._moveBackwardHistory();break;case r.Forward:this._moveForwardHistory();break;case r.SelectTool:this.selectMouseMode=!0;break;case r.MoveTool:this.selectMouseMode=!1;break;case r.Continuous:this.viewMode=rt.Continuous;break;case r.Single:this.viewMode=rt.Single;break;case r.FitPageWidth:this.zoomMode=g.PageWidth;break;case r.FitWholePage:this.zoomMode=g.WholePage;break;case r.ZoomOut:this._zoomBtnClicked(!1,t._defaultZoomValues);this.zoomMode=g.Custom;break;case r.ZoomIn:this._zoomBtnClicked(!0,t._defaultZoomValues);this.zoomMode=g.Custom;break;case r.ToggleFullScreen:this.fullScreen=!this.fullScreen;break;case r.ShowHamburgerMenu:this._hamburgerMenu.showMenu();break;case r.ShowViewMenu:this._viewMenu.showMenu();break;case r.ShowSearchBar:this._showSearchBar(i.hasClass(this._searchBar,y));this._setViewerAction(r.ShowSearchBar);break;case r.ShowThumbnails:i.Control.getControl(this._sidePanel).active(this._thumbnailsPageId);break;case r.ShowOutlines:i.Control.getControl(this._sidePanel).active(this._outlinesPageId);break;case r.ShowPageSetupPanel:i.Control.getControl(this._sidePanel).active(this._pageSetupPageId);break;case r.ShowZoomBar:this._showFooter(!0);break;case r.SearchPrev:this._searchManager.search(!0);break;case r.SearchNext:this._searchManager.search();break;case r.ShowSearchOptions:this._searchOptionsMenu.showMenu(!0);break;case r.SearchMatchCase:this._searchManager.matchCase=!this._searchManager.matchCase;break;case r.SearchMatchWholeWord:this._searchManager.wholeWord=!this._searchManager.wholeWord}},t.prototype._initSearchOptionsMenu=function(n){this._searchOptionsMenu=new ku(this,n)},t.prototype._initHamburgerMenu=function(n){this._hamburgerMenu=new pr(this,n)},t.prototype._initViewMenu=function(n){this._viewMenu=new bu(this,n)},t.prototype._initToolbar=function(){new lu(this._toolbar,this);new vu(this._mobileToolbar,this)},t.prototype._clearSupportedFormats=function(){this._supportedFormats&&(this._supportedFormats=null)},Object.defineProperty(t.prototype,"_exportItemDescriptions",{get:function(){return t._exportItems||(t._exportItems={pdf:{name:i.culture.Viewer.pdfExportName,supportIOS:!0},doc:{name:i.culture.Viewer.docExportName,supportIOS:!1},docx:{name:i.culture.Viewer.docxExportName,supportIOS:!1},rtf:{name:i.culture.Viewer.rtfExportName,supportIOS:!1},xlsx:{name:i.culture.Viewer.xlsxExportName,supportIOS:!0},xls:{name:i.culture.Viewer.xlsExportName,supportIOS:!0},mhtml:{name:i.culture.Viewer.mhtmlExportname,supportIOS:!0},html:{name:i.culture.Viewer.htmlExportName,supportIOS:!0},zip:{name:i.culture.Viewer.metafileExportName,supportIOS:!1},csv:{name:i.culture.Viewer.csvExportName,supportIOS:!0},tiff:{name:i.culture.Viewer.tiffExportName,supportIOS:!0},bmp:{name:i.culture.Viewer.bmpExportName,supportIOS:!1},emf:{name:i.culture.Viewer.emfExportName,supportIOS:!1},gif:{name:i.culture.Viewer.gifExportName,supportIOS:!1},jpeg:{name:i.culture.Viewer.jpegExportName,suportIOS:!1},jpg:{name:i.culture.Viewer.jpegExportName,supportIOS:!1},png:{name:i.culture.Viewer.pngExportName,supportIOS:!1}}),t._exportItems},enumerable:!0,configurable:!0}),t.prototype._updateSupportedFormats=function(){var n=this;if(!this._documentSource||this._documentSource.isDisposed){this._clearSupportedFormats();return}return this._documentSource.getSupportedExportDescriptions().then(function(t){n._supportedFormats=t;n._setViewerAction(r.ShowExportsPanel)})},t.prototype._actionIsChecked=function(n){switch(n){case r.TogglePaginated:return this._innerPaginated===!0;case r.Landscape:return this._documentSource&&this._documentSource.pageSettings?this._documentSource.pageSettings.landscape:!1;case r.Portrait:return this._documentSource&&this._documentSource.pageSettings?!this._documentSource.pageSettings.landscape:!1;case r.SelectTool:return this.selectMouseMode;case r.MoveTool:return!this.selectMouseMode;case r.Continuous:return this.viewMode==rt.Continuous;case r.Single:return this.viewMode==rt.Single;case r.ToggleFullScreen:return this.fullScreen;case r.FitPageWidth:return this.zoomMode==g.PageWidth;case r.FitWholePage:return this.zoomMode==g.WholePage;case r.SearchMatchCase:return this._searchManager.matchCase;case r.SearchMatchWholeWord:return this._searchManager.wholeWord;case r.ShowSearchBar:return!i.hasClass(this._searchBar,y)}return!1},t.prototype._actionIsDisabled=function(n){var i,u;switch(n){case r.TogglePaginated:return this._innerPaginated==null;case r.ShowExportsPanel:return!this._supportedFormats||this._supportedFormats.length===0;case r.Landscape:case r.Portrait:case r.ShowPageSetupDialog:case r.ShowPageSetupPanel:return this._documentSource&&this._documentSource.pageSettings?!this._documentSource.paginated:!0;case r.FirstPage:case r.PrePage:return i=!this._documentSource||this._documentSource.pageCount==null,i||this._pageIndex<=0;case r.LastPage:case r.NextPage:return i=!this._documentSource||this._documentSource.pageCount==null,i||this._pageIndex>=this._documentSource.pageCount-1;case r.Backward:return!this._historyManager.canBackward();case r.Forward:return!this._historyManager.canForward();case r.Continuous:case r.Single:return!this._documentSource||!this._documentSource.paginated;case r.ZoomOut:return this.zoomFactor<=t._defaultZoomValues[0].value;case r.ZoomIn:return u=t._defaultZoomValues,this.zoomFactor>=u[u.length-1].value}return!1},t.prototype._actionIsShown=function(n){var t=this._documentSource?this._documentSource.features:null;switch(n){case r.TogglePaginated:return t&&t.paginated&&t.nonPaginated;case r.Landscape:case r.Portrait:case r.ShowPageSetupDialog:case r.ShowPageSetupPanel:return t?t.pageSettings:this._supportsPageSettingActions();case r.SelectTool:case r.MoveTool:return!v._isMobile();case r.ShowSearchBar:return t&&(!this._documentSource.paginated||t.textSearchInPaginatedMode);case r.ShowOutlines:return this._documentSource&&this._documentSource.hasOutlines}return!0},t.prototype._onViewerActionStatusChanged=function(n){this._viewerActionStatusChanged.raise(this,n)},t.prototype._setViewerAction=function(n,t,i,r){var u={actionType:n,disabled:t?t:this._actionIsDisabled(n),checked:i?i:this._actionIsChecked(n),shown:r?r:this._actionIsShown(n)};this._onViewerActionStatusChanged({action:u})},t.prototype._updateViewerActions=function(){this._updatePageSettingsActions();this._updateViewModeActions();this._updateSelectMouseModeActions();this._setViewerAction(r.ShowExportsPanel)},t.prototype._updateViewModeActions=function(){this._setViewerAction(r.Continuous);this._setViewerAction(r.Single)},t.prototype._updatePageSettingsActions=function(){this._setViewerAction(r.TogglePaginated);this._setViewerAction(r.Landscape);this._setViewerAction(r.Portrait);this._setViewerAction(r.ShowPageSetupDialog)},t.prototype._updateSelectMouseModeActions=function(){this._setViewerAction(r.SelectTool);this._setViewerAction(r.MoveTool)},t.prototype._updateZoomModeActions=function(){this._setViewerAction(r.FitPageWidth);this._setViewerAction(r.FitWholePage)},t.prototype._updateZoomFactorActions=function(){this._setViewerAction(r.ZoomOut);this._setViewerAction(r.ZoomIn)},t.prototype._onPageSettingsUpdated=function(){this._updatePageSettingsActions();this._updateViewModeActions();this._resetToolbarWidth()},t.prototype._onPageCountUpdated=function(){this._updatePageNavActions();this._resetToolbarWidth()},t.prototype._updatePageNavActions=function(){this._setViewerAction(r.FirstPage);this._setViewerAction(r.LastPage);this._setViewerAction(r.PrePage);this._setViewerAction(r.NextPage)},t.prototype._onHistoryManagerStatusUpdated=function(){this._setViewerAction(r.Backward);this._setViewerAction(r.Forward)},t.prototype._updateViewContainerCursor=function(){var n=!this.selectMouseMode;n?i.hasClass(this._viewpanelContainer,'move')||i.addClass(this._viewpanelContainer,'move'):i.hasClass(this._viewpanelContainer,'move')&&i.removeClass(this._viewpanelContainer,'move')},t.prototype._updateFullScreenStyle=function(){var t='full-screen',n=document.body;this.fullScreen?(this._bodyOriginScrollLeft=document.documentElement&&document.documentElement.scrollLeft||n.scrollLeft,this._bodyOriginScrollTop=document.documentElement&&document.documentElement.scrollTop||n.scrollTop,i.addClass(this.hostElement,t),i.addClass(n,t),this._hostOriginWidth=this.hostElement.style.width,this._hostOriginHeight=this.hostElement.style.height,this.hostElement.style.width='100%',this.hostElement.style.height='100%',window.scrollTo(0,0)):(i.removeClass(this.hostElement,t),i.removeClass(n,t),this.hostElement.style.width=this._hostOriginWidth,this.hostElement.style.height=this._hostOriginHeight,i.isNumber(this._bodyOriginScrollLeft)&&(document.documentElement&&(document.documentElement.scrollLeft=this._bodyOriginScrollLeft),n.scrollLeft=this._bodyOriginScrollLeft),i.isNumber(this._bodyOriginScrollTop)&&(document.documentElement&&(document.documentElement.scrollTop=this._bodyOriginScrollTop),n.scrollTop=this._bodyOriginScrollTop));this.refresh()},t.prototype._export=function(n){var i=this._documentSource.getRenderToFilterUrl(n),t;if(v._isIOS()){window.open(i);return}t=document.querySelector('#viewDownloader');t||(t=document.createElement('iframe'),t.id='viewDownloader',t.style.display='none',document.body.appendChild(t));t.src=i},t.prototype.showPageSetupDialog=function(){this._pageSetupDialog||this._createPageSetupDialog();this._pageSetupDialog.showWithValue(this._documentSource.pageSettings)},t.prototype._createPageSetupDialog=function(){var n=this,t=document.createElement("div");t.style.display='none';n.hostElement.appendChild(t);n._pageSetupDialog=new br(t);n._pageSetupDialog.applied.addHandler(function(){return n._setPageSettings(n._pageSetupDialog.pageSettings)})},t.prototype.zoomToView=function(){i._deprecated('zoomToView','zoomMode');var n=this._documentSource;n&&(this.zoomMode=g.WholePage)},t.prototype.zoomToViewWidth=function(){i._deprecated('zoomToViewWidth','zoomMode');var n=this._documentSource;n&&(this.zoomMode=g.PageWidth)},t.prototype._setPageLandscape=function(n){var i=this,t=this._documentSource.pageSettings;dr(t,n);i._setPageSettings(t)},t.prototype._setPaginated=function(n){var i=this._documentSource.features,t=this._documentSource.pageSettings;i&&t&&n!=t.paginated&&(n&&i.paginated?(t.paginated=!0,this._setPageSettings(t)):!n&&i.nonPaginated&&(t.paginated=!1,this._setPageSettings(t)))},t.prototype._setPageSettings=function(n){var t=this;return this._showViewPanelMessage(),this._documentSource.setPageSettings(n).then(function(){t._resetDocument();t._reRenderDocument()}).catch(function(n){t._showViewPanelErrorMessage(ri(n))})},t.prototype._showViewPanelErrorMessage=function(n){this._showViewPanelMessage(n,'errormessage')},t.prototype._showViewPanelMessage=function(n,t){var r=this._viewpanelContainer.querySelector('.wj-viewer-loading'),u;r||(r=document.createElement('div'),r.innerHTML='<span class="verticalalign"></span><span class="textspan"></span>',this._viewpanelContainer.appendChild(r));r.className='wj-viewer-loading';t&&i.addClass(r,t);u=r.querySelector('.textspan');u&&(u.innerHTML=n||i.culture.Viewer.loading)},t.prototype._removeViewPanelMessage=function(){var n=this._viewpanelContainer.querySelector('.wj-viewer-loading');n&&this._viewpanelContainer.removeChild(n)},t.prototype._reRenderDocument=function(){this._documentSource&&(this._showViewPanelMessage(),this._documentSource.load())},t.prototype._zoomBtnClicked=function(n,t){for(var i,r=0;r<t.length;r++)if(t[r].value>this.zoomFactor){i=r-.5;break}else if(t[r].value===this.zoomFactor){i=r;break}(i==null&&(i=t.length-.5),i<=0&&!n)||i>=t.length-1&&n||(i=n?Math.floor(i)+1:Math.ceil(i)-1,this.zoomFactor=t[i].value)},t.prototype._getDocumentSource=function(){return this._documentSource},t.prototype._setDocumentSource=function(n){var t=this;this._loadDocument(n).then(function(){t._documentSource==n&&t._updateSupportedFormats()})},t.prototype._loadDocument=function(n){var i=this,t=new s;return this._documentSource===n?t:(this._disposeDocument(),this._documentSource=n,n&&(d(this._documentEventKey,n.loadCompleted,this._onDocumentSourceLoadCompleted,this),d(this._documentEventKey,n.queryLoadingData,function(n,t){i.onQueryLoadingData(t)},this),n.isLoadCompleted?(this._onDocumentSourceLoadCompleted(),this._keepServiceConnection(),t.resolve()):(this._showViewPanelMessage(),n.load().then(function(n){i._keepServiceConnection();t.resolve(n)}).catch(function(n){i._showViewPanelErrorMessage(ri(n))}))),this._onDocumentSourceChanged(),t)},t.prototype._hyperlinkClicked=function(n){var i=n.getAttribute(it._bookmarkAttr),t;if(i){this._goToBookmark(i);return}t=n.getAttribute(it._customActionAttr);t&&this._executeCustomAction(t)},t.prototype._onDocumentSourceLoadCompleted=function(){var o=this,i=this._documentSource.errors,f,u,t,e,n;if(this._documentSource.isLoadCompleted){if(this._removeViewPanelMessage(),this._pages.length=0,this._documentSource.pageCount<=0)return;for(f={width:this._documentSource.pageSettings.width,height:this._documentSource.pageSettings.height},n=0;n<this._documentSource.pageCount;n++)u=new it(this._documentSource,n,f),u.linkClicked.addHandler(function(n,t){o._hyperlinkClicked(t.element)}),this._pages.push(u);if(this._pageView.pages=this._pages,this._documentSource.paginated||(this.viewMode=rt.Single),this._autoHeightCalculated||(this._autoCalculateHeight(),this._autoHeightCalculated=!0),t=this._documentSource.initialPosition||this._initialPosition,this._documentSource.initialPosition=null,this._initialPosition=null,t&&t.pageIndex!=0||(this._pageIndex=0,t={pageIndex:0,pageBounds:null}),this._pageView.moveToPosition(t),this._addHistory(t),i&&i.length>0)for(e="",n=0;n<i.length;n++)e+=i[n]+"\r\n";this._updatePageSettingsActions();this._setViewerAction(r.ShowSearchBar)}},t.prototype._clearKeepSerConnTimer=function(){this._keepSerConnTimer!=null&&clearTimeout(this._keepSerConnTimer)},t.prototype._keepServiceConnection=function(){var n=this,t;(this._clearKeepSerConnTimer(),t=this._documentSource,t)&&(this._keepSerConnTimer=setTimeout(function(){n._documentSource===t&&n._documentSource.getStatus().then(function(){return n._keepServiceConnection()})},this._getExpiredTime()))},t.prototype._getExpiredTime=function(){if(this._expiredTime)return this._expiredTime;var n=this._documentSource;return!n||!n.expiredDateTime||!n.executionDateTime?6e3:(this._expiredTime=n.expiredDateTime.getTime()-n.executionDateTime.getTime(),this._expiredTime=Math.max(this._expiredTime-12e4,0),this._expiredTime)},t.prototype._disposeDocument=function(){this._documentSource&&(vt(this._documentEventKey,this._documentSource.disposed),vt(this._documentEventKey,this._documentSource.pageCountChanged),vt(this._documentEventKey,this._documentSource.pageSettingsChanged),vt(this._documentEventKey,this._documentSource.loadCompleted),vt(this._documentEventKey,this._documentSource.queryLoadingData),this._documentSource.dispose());this._resetDocument()},t.prototype._resetDocument=function(){this._pages.length=0;this._pageView.resetPages();this._pageIndex=0;this._historyManager.clear()},t.prototype._setDocumentRendering=function(){this._documentSource._updateIsLoadCompleted(!1)},t.prototype.moveToPage=function(n){return this._innerMoveToPage(n,!0)},t.prototype._innerMoveToPage=function(n,t){var i=this,r=this._pageIndex;return this._updatePageIndex(n),this._pageView.moveToPage(n).then(function(n){t===!0&&n!=r&&i._addHistory({pageIndex:n,pageBounds:null})})},t.prototype._moveToLastPage=function(){var n=new s;return this._ensureDocumentLoadCompleted(n)?this._innerMoveToPage(this._documentSource.pageCount-1,!0):n},t.prototype._moveBackwardHistory=function(){if(this._ensureDocumentLoadCompleted()&&this._historyManager.canBackward()){var n=this._historyManager.backward();this._moveToHistory(n)}},t.prototype._moveForwardHistory=function(){if(this._ensureDocumentLoadCompleted()&&this._historyManager.canForward()){var n=this._historyManager.forward();this._moveToHistory(n)}},t.prototype._moveToHistory=function(n){n&&(this.zoomFactor=n.zoomFactor,this._scrollToPosition(n.position))},t.prototype._addHistory=function(n){n&&this._historyManager.add({zoomFactor:this.zoomFactor,position:n})},t.prototype._ensureDocumentLoadCompleted=function(n){return this._documentSource?this._documentSource.isLoadCompleted?!0:(n&&n.reject('Cannot set page index when document source is not loaded completely.'),!1):(n&&n.reject('Cannot set page index without document source.'),!1)},t.prototype._updatePageIndex=function(n){this._documentSource&&(n=Math.min(this._documentSource.pageCount-1,Math.max(n,0)),this._pageIndex!==n)&&(this._pageIndex=n,this.onPageIndexChanged())},Object.defineProperty(t.prototype,"zoomMode",{get:function(){return this._pageView.zoomMode},set:function(n){this._pageView.zoomMode=n;this._updateZoomModeActions()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this._pageView.zoomFactor},set:function(n){this._pageView.zoomFactor=n},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewMode",{get:function(){return this._viewMode},set:function(n){this._viewMode!==n&&(this._viewMode=n,this.onViewModeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectMouseMode",{get:function(){return this._selectMouseMode},set:function(n){this._selectMouseMode!==n&&(this._selectMouseMode=n,this.onSelectMouseModeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullScreen",{get:function(){return this._fullScreen},set:function(n){this._fullScreen!==n&&(this._fullScreen=n,n&&this._initMiniToolbar(),this.onFullScreenChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},enumerable:!0,configurable:!0}),t.prototype._initMiniToolbar=function(){var n=i.Control.getControl(this._miniToolbar);n||(new au(this._miniToolbar,this),i.addClass(this._miniToolbar,"wj-mini-toolbar"))},t.prototype._pinMiniToolbar=function(){var n=this;this._showMiniToolbar(!0);this._miniToolbarPinnedTimer=setTimeout(function(){n._showMiniToolbar(!1);n._miniToolbarPinnedTimer=null},t._miniToolbarPinnedTime)},t.prototype._onDocumentSourceChanged=function(n){this._documentSourceChanged.raise(this,n||new i.EventArgs);this._clearSupportedFormats();this._updateViewerActions();this._onPageSettingsUpdated();this._onPageCountUpdated();this._updateViewModeActions();this._searchManager.documentSource=this._documentSource;this._documentSource&&(d(this._documentEventKey,this._documentSource.pageSettingsChanged,this._onPageSettingsUpdated,this),d(this._documentEventKey,this._documentSource.pageCountChanged,this._onPageCountUpdated,this),d(this._documentEventKey,this._documentSource.loadCompleted,this._onPageCountUpdated,this))},t.prototype.onPageIndexChanged=function(n){this.pageIndexChanged.raise(this,n||new i.EventArgs);this._updatePageNavActions()},t.prototype.onViewModeChanged=function(n){this.viewModeChanged.raise(this,n||new i.EventArgs);this._updateViewModeActions();this._pageView.viewMode=this.viewMode},t.prototype.onSelectMouseModeChanged=function(n){(this.selectMouseModeChanged.raise(this,n||new i.EventArgs),v._isMobile())||(this._updateSelectMouseModeActions(),this._updateViewContainerCursor(),this._pageView.panMode=!this.selectMouseMode)},t.prototype.onFullScreenChanged=function(n){this.fullScreenChanged.raise(this,n||new i.EventArgs);this._setViewerAction(r.ToggleFullScreen);this._updateFullScreenStyle();this.fullScreen&&this._pinMiniToolbar()},t.prototype.onZoomFactorChanged=function(n){this.zoomFactorChanged.raise(this,n||new i.EventArgs);this._updateZoomFactorActions();this._updateZoomModeActions()},t.prototype.onQueryLoadingData=function(n){this.queryLoadingData.raise(this,n)},t}(i.Control);k._seperatorHtml="<div class='wj-separator' style='width:100%;height: 1px;margin: 3px 0;background-color:rgba(0,0,0,.2)'/>";k._viewpanelContainerMinHeight=300;k._miniToolbarPinnedTime=3e3;k._narrowCss='narrow';k._narrowWidthThreshold=400;k._defaultZoomValues=[{name:i.Globalize.format(.05,'p0'),value:.05},{name:i.Globalize.format(.25,'p0'),value:.25},{name:i.Globalize.format(.5,'p0'),value:.5},{name:i.Globalize.format(.75,'p0'),value:.75},{name:i.Globalize.format(1,'p0'),value:1},{name:i.Globalize.format(2,'p0'),value:2},{name:i.Globalize.format(3,'p0'),value:3},{name:i.Globalize.format(4,'p0'),value:4},{name:i.Globalize.format(8,'p0'),value:8},{name:i.Globalize.format(10,'p0'),value:10}];k.controlTemplate='<div class="wj-viewer-outer wj-content with-footer"><div wj-part="toolbar"><\/div><div wj-part="mobile-toolbar"><\/div><div class="wj-viewer-container" wj-part="viewer-container"><div class="wj-viewer-leftpanel" wj-part="viewer-left-panel"><div class="wj-viewer-tabsleft" wj-part="side-panel"><\/div><\/div><div class="wj-viewer-splitter" wj-part="splitter"><button class="wj-btn wj-btn-default" type="button"><span class="wj-glyph-right"><\/span><\/button><\/div><div class="wj-viewpanel-container" wj-part="viewpanel-container"><\/div><\/div><div wj-part="mini-toolbar"><\/div><div class="wj-searchbar mobile" wj-part="search-bar"><\/div><div class="wj-viewer-footer mobile" class="wj-viewer-footer" wj-part="viewer-footer"><div wj-part="zoom-bar"><\/div><span class="wj-close">×<\/span><\/div><\/div>';n("ViewerBase",k);br=function(n){function t(t){var r=n.call(this,t)||this,u;return r.applied=new i.Event,r.modal=!0,r.hideTrigger=a.PopupTrigger.None,u=r.getTemplate(),r.applyTemplate('wj-control wj-content',u,{_gHeader:'g-header',_pageSetupEditorElement:'pagesetup-editor',_btnApply:'btn-apply',_btnCancel:'btn-cancel',_btnClose:'a-close'}),r._pageSetupEditor=new pi(r._pageSetupEditorElement),r._globalize(),r._addEvents(),r}return e(t,n),Object.defineProperty(t.prototype,"pageSettings",{get:function(){return this._pageSetupEditor.pageSettings},enumerable:!0,configurable:!0}),t.prototype._globalize=function(){var n=i.culture.Viewer;this._gHeader.textContent=n.pageSetup;this._btnApply.textContent=n.ok;this._btnCancel.textContent=n.cancel},t.prototype._addEvents=function(){var n=this;f(n._btnClose,'click',function(){n.hide()});f(n._btnCancel,'click',function(){n.hide()});f(n._btnApply,'click',function(){n._apply();n.hide()})},t.prototype._apply=function(){this.onApplied()},t.prototype.onApplied=function(){this.applied.raise(this,new i.EventArgs)},t.prototype.showWithValue=function(t){this._pageSetupEditor.pageSettings=t;n.prototype.show.call(this)},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&(this._globalize(),this._pageSetupEditor.refresh())},t}(a.Popup);br.controlTemplate='<div><div wj-part="g-header" class="wj-dialog-header"><a class="wj-hide" wj-part="a-close" style="float:right;outline:none;text-decoration:none;padding:0px 6px" href="" tabindex="-1" draggable="false">&times;<\/a><\/div><div style="padding:12px;"><div wj-part="pagesetup-editor"><\/div><div class="wj-dialog-footer"><a class="wj-hide" wj-part="btn-apply" href="" tabindex="-1" draggable="false"><\/a>&nbsp;&nbsp;<a class="wj-hide" wj-part="btn-cancel" href="" tabindex="-1" draggable="false"><\/a><\/div><\/div><\/div>';n("_PageSetupDialog",br),function(n){n[n.TogglePaginated=0]="TogglePaginated";n[n.Print=1]="Print";n[n.Portrait=2]="Portrait";n[n.Landscape=3]="Landscape";n[n.ShowPageSetupDialog=4]="ShowPageSetupDialog";n[n.FirstPage=5]="FirstPage";n[n.PrePage=6]="PrePage";n[n.NextPage=7]="NextPage";n[n.LastPage=8]="LastPage";n[n.PageNumber=9]="PageNumber";n[n.PageCountLabel=10]="PageCountLabel";n[n.Backward=11]="Backward";n[n.Forward=12]="Forward";n[n.SelectTool=13]="SelectTool";n[n.MoveTool=14]="MoveTool";n[n.Continuous=15]="Continuous";n[n.Single=16]="Single";n[n.ZoomOut=17]="ZoomOut";n[n.ZoomIn=18]="ZoomIn";n[n.ZoomValue=19]="ZoomValue";n[n.FitWholePage=20]="FitWholePage";n[n.FitPageWidth=21]="FitPageWidth";n[n.ToggleFullScreen=22]="ToggleFullScreen";n[n.ShowHamburgerMenu=23]="ShowHamburgerMenu";n[n.ShowViewMenu=24]="ShowViewMenu";n[n.ShowSearchBar=25]="ShowSearchBar";n[n.ShowThumbnails=26]="ShowThumbnails";n[n.ShowOutlines=27]="ShowOutlines";n[n.ShowExportsPanel=28]="ShowExportsPanel";n[n.ShowPageSetupPanel=29]="ShowPageSetupPanel";n[n.ShowZoomBar=30]="ShowZoomBar";n[n.ShowSearchOptions=31]="ShowSearchOptions";n[n.SearchPrev=32]="SearchPrev";n[n.SearchNext=33]="SearchNext";n[n.SearchMatchCase=34]="SearchMatchCase";n[n.SearchMatchWholeWord=35]="SearchMatchWholeWord"}(r||(r={}));n("_ViewerActionType",r);gu='<path d="M24,11.9v-2h-4V7h0V5h0h-1h-5V2h0V0h0h-1H1H0h0v2h0v11h0v1h0h1h5v4h0v1h0h1h3v4h0v1h0h1h2.1v-1H11V12h2.1v-2H11h-1h0v2h0v6H7V7h12v2.9h-1v2h5V23h-4.9v1H23h1h0v-1h0L24,11.9L24,11.9z M6,5L6,5l0,2h0v6H1V2h12v3H7H6z"/><path d="M20,20v-3v-1h-1h-1v-1v-1h-1h-3h-1v1v3v1h1h1v2h0h1h3h1h0L20,20L20,20z M14,18v-3h3v1h-1h-1v1v1H14z M17,17v1h-1v-1H17z M16,20v-1h1h1v-1v-1h1v3H16z"/>';kr=function(n){function t(t,i){var r=n.call(this,t,i)||this;return r._initSidePanelParameters(),r}return e(t,n),Object.defineProperty(t.prototype,"reportName",{get:function(){return this._reportName},set:function(n){n!=this._reportName&&(this._reportName=n,this._needBindDocumentSource(),this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paginated",{get:function(){return this._innerPaginated},set:function(n){this._innerPaginated=n},enumerable:!0,configurable:!0}),t.getReportNames=function(n,t){return ai.getReportNames(n,t)},t.getReports=function(n,t,i){return ai.getReports(n,t,i)},t._isRequiringParameters=function(n){for(var t=0;t<n.length;t++)if((n[t].value===null||n[t].value===undefined)&&!n[t].nullable)return!0;return!1},t.prototype._globalize=function(){n.prototype._globalize.call(this);var t=i.culture.Viewer;this._gParameterTitle.textContent=t.parameters},t.prototype._executeAction=function(r){if(n.prototype._executeAction.call(this,r),!this._actionIsDisabled(r))switch(r){case t._parameterCommandTag:i.Control.getControl(this._sidePanel).active(this._parametersPageId)}},t.prototype._actionIsDisabled=function(i){switch(i){case t._parameterCommandTag:return!this._innerDocumentSource||!this._innerDocumentSource.hasParameters}return n.prototype._actionIsDisabled.call(this,i)},t.prototype._initHamburgerMenu=function(n){this._hamburgerMenu=new tf(this,n)},t.prototype._initSidePanelParameters=function(){var n=this,r=i.Control.getControl(this._sidePanel),u=r.addPage(i.culture.Viewer.parameters,gu,2);this._parametersPageId=u.id;this._gParameterTitle=u.outContent.querySelector('.wj-tabtitle');u.format(function(u){n._paramsEditor=new ei(u.content);n._paramsEditor.commit.addHandler(function(){n._innerDocumentSource&&n._innerDocumentSource.hasParameters&&(n._showViewPanelMessage(),n._innerDocumentSource.setParameters(n._paramsEditor.parameters).then(function(t){var i=t||[],r=i.some(function(n){return!!n.error});r?n._paramsEditor.itemsSource=i:(n._resetDocument(),n._paramsEditor.isDisabled=!0,n._renderDocumentSource())}).catch(function(t){n._showViewPanelErrorMessage(ri(t))}),n._isMobileTemplate()&&r.collapse())});n._paramsEditor.validate.addHandler(function(){n._innerDocumentSource&&n._innerDocumentSource.hasParameters&&n._innerDocumentSource.setParameters(n._paramsEditor.parameters).then(function(t){n._paramsEditor.itemsSource=t})});var f=function(){var f=n._innerDocumentSource;if(f.status===c.cleared||f.status===c.notFound?ft(u.content):f.status===c.rendering?n._paramsEditor.isDisabled=!0:f.status===c.completed&&(n._paramsEditor.isDisabled=!1),f.status===c.loaded){if(!f.hasParameters){r.hide(u);return}r.show(u);r.active(u);f.getParameters().then(function(r){n._innerDocumentSource!=f||f.isDisposed||(n._paramsEditor.itemsSource=r,t._isRequiringParameters(r)?n._showViewPanelMessage(i.culture.Viewer.requiringParameters):(n._paramsEditor.isDisabled=!0,n._renderDocumentSource()))})}},e=function(){n._innerDocumentSource&&(d(n._documentEventKey,n._innerDocumentSource.statusChanged,f),f())};n._documentSourceChanged.addHandler(e);e()})},t.prototype._updateLoadingDivContent=function(n){var f=this,u=this._viewpanelContainer.querySelector('.wj-view-page'),t,i=this._viewpanelContainer.querySelectorAll('.wj-loading'),r;if(i&&i.length>0)for(r=0;r<i.length;r++)i.item(r).innerHTML=n;else t=document.createElement('div'),t.className='wj-loading',t.style.height=u.offsetHeight+'px',t.style.lineHeight=u.offsetHeight+'px',t.innerHTML=n,u.appendChild(t)},Object.defineProperty(t.prototype,"_innerDocumentSource",{get:function(){return this._getDocumentSource()},enumerable:!0,configurable:!0}),t.prototype._loadDocument=function(t){var i=this._innerDocumentSource!==t,r=n.prototype._loadDocument.call(this,t);return t&&i&&d(this._documentEventKey,t.statusChanged,this._onDocumentStatusChanged,this),r},t.prototype._reRenderDocument=function(){this._renderDocumentSource()},t.prototype._onDocumentStatusChanged=function(){this._innerDocumentSource&&this._innerDocumentSource.status===c.loaded&&!this._innerDocumentSource.hasParameters&&this._renderDocumentSource()},t.prototype._renderDocumentSource=function(){var t=this,n;this._innerDocumentSource&&(this._setDocumentRendering(),n=this._innerDocumentSource,n.render().then(function(){return t._getStatusUtilCompleted(n)}))},t.prototype._disposeDocument=function(){this._innerDocumentSource&&vt(this._documentEventKey,this._innerDocumentSource.statusChanged);n.prototype._disposeDocument.call(this)},t.prototype._setDocumentRendering=function(){this._innerDocumentSource._updateStatus(c.rendering);n.prototype._setDocumentRendering.call(this)},t.prototype._getSource=function(){return this.filePath?new ai({serviceUrl:this.serviceUrl,filePath:this.filePath,reportName:this.reportName,paginated:this.paginated}):null},t.prototype._supportsPageSettingActions=function(){return!0},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._paramsEditor.refresh()},t}(k);kr._parameterCommandTag=99;n("ReportViewer",kr);ei=function(n){function t(t){var r=n.call(this,t)||this;return r._parameters={},r._errors=[],r._errorsVisible=!1,r.commit=new i.Event,r.validate=new i.Event,i.addClass(r.hostElement,'wj-parameterscontainer'),r._updateErrorsVisible(),r}return e(t,n),t.prototype._setErrors=function(n){this._errors=n;this._updateErrorDiv()},Object.defineProperty(t.prototype,"parameters",{get:function(){return this._parameters},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemsSource",{get:function(){return this._itemSources},set:function(n){this._itemSources=n;this._parameters={};this._render();var t=[];(n||[]).forEach(function(n){n.error&&t.push({key:n.name,value:n.error})});this._setErrors(t)},enumerable:!0,configurable:!0}),t.prototype._setErrorsVisible=function(n){this._errorsVisible=n;this._updateErrorsVisible()},t.prototype._updateErrorsVisible=function(){this._errorsVisible?i.removeClass(this.hostElement,t._errorsHiddenCss):i.addClass(this.hostElement,t._errorsHiddenCss)},t.prototype.onCommit=function(){this.commit.raise(this,new i.EventArgs)},t.prototype.onValidate=function(){this.validate.raise(this,new i.EventArgs);this._setErrorsVisible(!1)},t.prototype._deferValidate=function(n,t,i){var r=this;this._validateTimer!=null&&(clearTimeout(this._validateTimer),this._validateTimer=null);this._validateTimer=setTimeout(function(){t!=null&&t();r.onValidate();i!=null&&i();r._lastEditedParam=n;r._validateTimer=null},500)},t.prototype._updateErrorDiv=function(){for(var i,f,e,r=this._errors||[],u=this.hostElement.querySelectorAll('.error'),n=0;n<u.length;n++)u[n].parentNode.removeChild(u[n]);for(n=0;n<r.length;n++)f=this.hostElement.querySelector('*['+t._paramIdAttr+'="'+r[n].key+'"]'),e=r[n].value,f&&(i=document.createElement('div'),i.innerHTML=e,i.className='error',f.appendChild(i))},t.prototype._render=function(){var o=this,s=this._itemSources,h,a=null,c,n,e;if(s&&this._lastEditedParam&&(a=function(n){var i=n.getAttribute(t._paramIdAttr);return i!==o._lastEditedParam?!0:(h=n,!1)}),ft(this.hostElement,a),s){for(c=0;c<s.length;c++){if(n=s[c],this._lastEditedParam===n.name){this._lastEditedParam=null;h=null;continue}if(!n.hidden){var u=document.createElement('div'),l=document.createElement('span'),r=null;if(u.className='wj-parametercontainer',l.className='wj-parameterhead',l.innerHTML=n.prompt||n.name,i.isArray(n.allowedValues))r=this._generateComboEditor(n);else switch(n.dataType){case w.Boolean:r=this._generateBoolEditor(n);break;case w.DateTime:case w.Time:case w.Date:r=this._generateDateTimeEditor(n);break;case w.Integer:case w.Float:r=this._generateNumberEditor(n);break;case w.String:r=this._generateStringEditor(n)}r&&(r.className+=' wj-parametercontrol',u.setAttribute(t._paramIdAttr,n.name),u.appendChild(l),u.appendChild(r),h?this.hostElement.insertBefore(u,h):this.hostElement.appendChild(u))}}e=document.createElement('input');e.type='button';e.value=i.culture.Viewer.apply;e.className='wj-applybutton';f(e,'click',function(){o._validateParameters()&&(o._errors=[],o.onCommit());o._setErrorsVisible(!0)});this.hostElement.appendChild(e)}},t.prototype.refresh=function(t){t===void 0&&(t=!0);n.prototype.refresh.call(this,t);t&&this._render()},t.prototype._validateParameters=function(){for(var n,o=this.hostElement.querySelectorAll('textarea'),s,f=[],h=this.itemsSource,r=0;r<h.length;r++)n=h[r],s=this.hostElement.querySelector('['+t._paramIdAttr+'="'+n.name+'"]'),n.nullable||this.parameters.hasOwnProperty(n.name)||this.parameters[n.name]||n.value!==null&&n.value!==undefined&&n.value!==""||s&&f.push({key:n.name,value:i.culture.Viewer.nullParameterError});for(r=0;r<o.length;r++){var u=o.item(r),c,e=!0;c=parseInt(u.getAttribute('data-type'));switch(c){case w.Date:case w.DateTime:case w.Time:e=t._checkValueType(u.value,i.isDate);break;case w.Float:e=t._checkValueType(u.value,t._isFloat);break;case w.Integer:e=t._checkValueType(u.value,i.isInt)}e||f.push({key:u.parentElement.id,value:i.culture.Viewer.invalidParameterError})}return this._setErrors(f),f.length<=0},t._isFloat=function(n){return!isNaN(parseFloat(n))},t._checkValueType=function(n,t){for(var r=n.split('\n'),i=0;i<r.length;i++)if(r[i].trim().length<=0||t(r[i].trim()))continue;else return!1;return!0},t.prototype._generateComboEditor=function(n){var f=this,t,s=[],e=document.createElement('div'),r,h,v=[],c=n.allowedValues&&n.allowedValues.length>0,u,o,l;for(n.multiValue?t=new nf(e):(t=new a.ComboBox(e),n.nullable?s.push({name:i.culture.Viewer.parameterNoneItemsSelected,value:null}):n.value==null&&c&&s.push({name:i.culture.Viewer.selectParameterValue,value:null})),t.isEditable=!1,t.displayMemberPath='name',t.selectedValuePath='value',t.isDisabled=!c,u=0;u<n.allowedValues.length;u++)s.push({name:n.allowedValues[u].key,value:n.allowedValues[u].value});if(t.itemsSource=s,n.multiValue){if(r=t,c){if(n.value){for(u=0;u<n.value.length;u++)for(o=0;o<r.itemsSource.length;o++)if(r.itemsSource[o].value===n.value[u]){v.push(r.itemsSource[o]);break}r.checkedItems=v}}else r.checkedItems=[];r.checkedItemsChanged.addHandler(function(){f._deferValidate(n.name,function(){h=[];for(var t=0;t<r.checkedItems.length;t++)h.push(r.checkedItems[t].value);f._updateParameters(n,h)},function(){h.length>0&&!n.nullable&&f._validateNullValueOfParameter(e)})})}else t.selectedValue=c?n.value:null,l=!1,t.selectedIndexChanged.addHandler(function(t){f._deferValidate(n.name,function(){l||(f._updateParameters(n,t.selectedValue),t.selectedValue&&t.itemsSource[0].name===i.culture.Viewer.selectParameterValue&&setTimeout(function(){l=!0;var n=t.selectedValue,i=t.selectedIndex;t.itemsSource.shift();t.collectionView.refresh();t.selectedValue=n;t.selectedIndex=i-1;l=!1}))},function(){return f._validateNullValueOfParameter(e)})});return e},t.prototype._updateParameters=function(n,t){var u=function(n,t){return t&&!i.isArray(n)?n.split(/[\r\n]+/):n},r;this.itemsSource.some(function(t){return t.name===n.name?(r=t,!0):!1});this._parameters[n.name]=r.value=n.value=u(t,n.multiValue)},t.prototype._generateBoolEditor=function(n){var r=this,i,u=[],t;return n.nullable?(t=document.createElement('div'),i=new a.ComboBox(t),i.isEditable=!1,i.displayMemberPath='name',i.selectedValuePath='value',u.push({name:'None',value:null}),u.push({name:'True',value:!0}),u.push({name:'False',value:!1}),i.itemsSource=u,i.selectedValue=n.value,i.selectedIndexChanged.addHandler(function(t){r._deferValidate(n.name,function(){return r._updateParameters(n,t.selectedValue)})})):(t=document.createElement('input'),t.type='checkbox',t.checked=n.value,f(t,'click',function(){r._deferValidate(n.name,function(){return r._updateParameters(n,t.checked)})})),t},t.prototype._generateStringEditor=function(n){var i=this,t;return n.multiValue?t=i._createTextarea(n.value,n.dataType):(t=document.createElement('input'),t.type='text',n.value&&(t.value=n.value)),i._bindTextChangedEvent(t,n),t},t.prototype._createTextarea=function(n,r){var u=document.createElement('textarea'),e,o=[],f;if((r===w.DateTime||r===w.Time||r===w.Date)&&(e=t._dateTimeFormat),n&&n.length>0)if(e){for(f=0;f<n.length;f++)o.push(i.Globalize.formatDate(new Date(n[f]),e));u.value=o.join('\n')}else u.value=n.join('\n');return u.wrap='off',u.setAttribute('data-type',r.toString()),u},t.prototype._bindTextChangedEvent=function(n,t){var i=this;f(n,'change,keyup,paste,input',function(){i._deferValidate(t.name,function(){return i._updateParameters(t,n.value)},function(){n.value&&!t.nullable&&i._validateNullValueOfParameter(n)})})},t.prototype._generateNumberEditor=function(n){var r=this,t,i;return n.multiValue?(t=this._createTextarea(n.value,n.dataType),this._bindTextChangedEvent(t,n)):(t=document.createElement('div'),i=new a.InputNumber(t),i.format=n.dataType===w.Integer?'n0':'n2',i.isRequired=!n.nullable,n.value&&(i.value=n.dataType===w.Integer?parseInt(n.value):parseFloat(n.value)),i.valueChanged.addHandler(function(t){r._deferValidate(n.name,function(){return r._updateParameters(n,t.value)})})),t},t.prototype._generateDateTimeEditor=function(n){var u=this,i,r;return n.multiValue?(i=this._createTextarea(n.value,n.dataType),i.title=t._dateTimeFormat,this._bindTextChangedEvent(i,n)):(i=document.createElement('div'),n.dataType==w.Date||n.dataType===w.DateTime?r=new a.InputDate(i):(r=new a.InputTime(i),r.step=60),r.isRequired=!n.nullable,n.value&&(r.value=new Date(n.value)),r.valueChanged.addHandler(function(){u._deferValidate(n.name,function(){return u._updateParameters(n,r.value.toJSON())})})),i},t.prototype._validateNullValueOfParameter=function(n){var i=this._errors,r,u;if(i&&i.length)for(r=0;r<i.length;r++)if(i[r].key===n.parentElement.getAttribute(t._paramIdAttr)&&(u=n.parentElement.querySelector('.error'),u)){n.parentElement.removeChild(u);i.splice(r,1);break}},t}(i.Control);ei._paramIdAttr='param-id';ei._errorsHiddenCss='wj-parametererrors-hidden';ei._dateTimeFormat='MM/dd/yyyy HH:mm';n("_ParametersEditor",ei);nf=function(){function n(n){this._selectedAll=!1;this._innerCheckedItemsChanged=!1;this.checkedItemsChanged=new i.Event;var t=this,r=new a.MultiSelect(n);t._multiSelect=r;r.checkedItemsChanged.addHandler(t.onCheckedItemsChanged,t);r.isDroppedDownChanged.addHandler(t.onIsDroppedDownChanged,t);r.headerFormatter=function(){return t._updateHeader()}}return n.prototype._updateHeader=function(){var r=this,t=r.checkedItems||[],u=[],f=r.displayMemberPath,n;if(!t.length)return i.culture.Viewer.parameterNoneItemsSelected;if(r._selectedAll)return i.culture.Viewer.parameterAllItemsSelected;if(f){for(n=0;n<t.length;n++)u[n]=t[n][f];return u.join(', ')}return t.join(', ')},n.prototype.onIsDroppedDownChanged=function(){this._multiSelect.isDroppedDown&&this._updateSelectedAll()},n.prototype.onCheckedItemsChanged=function(n,t){var i=this;if(!i._innerCheckedItemsChanged){if(!i._selectAllItem){i.checkedItemsChanged.raise(i,t);return}i._updateSelectedAll();i.checkedItemsChanged.raise(i,t)}},Object.defineProperty(n.prototype,"isEditable",{get:function(){return this._multiSelect.isEditable},set:function(n){this._multiSelect.isEditable=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isDisabled",{get:function(){return this._multiSelect.isDisabled},set:function(n){this._multiSelect.isDisabled=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayMemberPath",{get:function(){return this._multiSelect.displayMemberPath},set:function(n){this._multiSelect.displayMemberPath=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"selectedValuePath",{get:function(){return this._multiSelect.selectedValuePath},set:function(n){this._multiSelect.selectedValuePath=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"itemsSource",{get:function(){return this._itemsSource},set:function(n){var t=this,u=t.displayMemberPath||'name',r;t._itemsSource=n;r=[];n&&(n.length>1?(t._selectAllItem={},t._selectAllItem[u]=i.culture.Viewer.parameterSelectAllItemText,r.push(t._selectAllItem)):t._selectAllItem=null,r=r.concat(n));t._multiSelect.itemsSource=r},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"checkedItems",{get:function(){var t=this,n=[],i;return t._multiSelect.checkedItems&&(n=t._multiSelect.checkedItems.slice()),i=n.indexOf(t._selectAllItem),i>-1&&n.splice(i,1),n},set:function(n){var t=this;t._multiSelect.checkedItems=n;t._selectedAll=!1;t._updateSelectedAll()},enumerable:!0,configurable:!0}),n.prototype._updateSelectedAll=function(){var n=this;if(n._selectAllItem){var t=n._multiSelect.checkedItems||[],r=t.indexOf(n._selectAllItem),i=r>-1,u=n._selectedAll!==i;if(u){n._selectedAll=i;n._innerCheckedItemsChanged=!0;n._multiSelect.checkedItems=n._selectedAll?n._multiSelect.itemsSource.slice():[];n._innerCheckedItemsChanged=!1;return}(n._selectedAll=t&&n._itemsSource&&t.length-(i?1:0)===n._itemsSource.length,n._selectedAll!==i)&&(n._innerCheckedItemsChanged=!0,n._selectedAll?n._multiSelect.checkedItems=t.concat(n._selectAllItem):(t=t.slice(),t.splice(r,1),n._multiSelect.checkedItems=t),n._innerCheckedItemsChanged=!1)}},n}();n("_MultiSelectEx",nf);tf=function(n){function t(t,i,r){return n.call(this,t,i,r)||this}return e(t,n),t.prototype._initItems=function(){var t=n.prototype._initItems.call(this);return t.splice(2,0,{title:i.culture.Viewer.parameters,icon:gu,commandTag:kr._parameterCommandTag}),t},t}(pr);n("_ReportHamburgerMenu",tf);wf=function(n){function t(t,i){return n.call(this,t,i)||this}return e(t,n),Object.defineProperty(t.prototype,"_innerDocumentSource",{get:function(){return this._getDocumentSource()},enumerable:!0,configurable:!0}),t.prototype._getSource=function(){return this.filePath?new eu({serviceUrl:this.serviceUrl,filePath:this.filePath}):null},t}(k);n("PdfViewer",wf)}}})